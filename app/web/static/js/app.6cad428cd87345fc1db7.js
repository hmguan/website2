webpackJsonp([1],{"+NDk":function(e,t){},"+Wj/":function(e,t){},"/hZm":function(e,t){},"04n5":function(e,t){},"0C46":function(e,t){},"0xDb":function(e,t,s){"use strict";(function(e){var a,i=s("mvHQ"),o=s.n(i);e.serverIp="localhost"===window.location.hostname?"192.168.0.100":window.location.hostname,e.hostname="localhost"===window.location.hostname?"http://192.168.0.100":"http://"+window.location.hostname,e.url=window.location.protocol+"//"+window.location.host+"/",e.apiAddr="localhost"===window.location.hostname?"http://192.168.0.100:5008/":"/",e.socket="",(a=new XMLHttpRequest).open("post",e.apiAddr,"JSON"),a.send(o()({event:"event_query_ftp_port",login_token:localStorage.getItem("login_token")})),a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var t=JSON.parse(a.response).ftp_port,s=JSON.parse(a.response).websocket_port;console.log(JSON.parse(a.response)),console.log("websocketPort="+s),sessionStorage.setItem("upDowndApiAddr",e.hostname+":"+t),sessionStorage.setItem("websocketPort",s),console.log(sessionStorage.getItem("websocketPort"))}},function(){if(null!==localStorage.getItem("login_token")){var t=new XMLHttpRequest;t.open("post",e.apiAddr+"login","JSON"),t.send(o()({event:"event_login",login_token:localStorage.getItem("login_token"),uuid:localStorage.getItem("uuid")})),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=JSON.parse(t.response);e.code}}}}(),window.refreshLocalStorageTime=setInterval(function(){localStorage.setItem("updateStorage",(new Date).getTime())},500),e.getDetailTime=function(e){var t=new Date(e),s=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),o=t.getHours(),r=t.getMinutes(),n=t.getSeconds();return a<10&&(a="0"+a),i<10&&(i="0"+i),o<10&&(o="0"+o),r<10&&(r="0"+r),n<10&&(n="0"+n),s+"/"+a+"/"+i+" "+o+":"+r+":"+n},t.a=e}).call(t,s("DuR2"))},"1YA9":function(e,t){},"48+p":function(e,t){},"4jW2":function(e,t){},"6UJw":function(e,t){},Asdq:function(e,t){},BwDV:function(e,t){},EwqY:function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a),o=s("k0sY");t.a={name:"DeviceStatusDetail",props:["deviceDetailId"],data:function(){return{DeviceStatusDetail:[]}},created:function(){this.getDeviceDetail()},beforeDestroy:function(){o.a.$off("socketData")},mounted:function(){var e=this;o.a.$on("socketData",function(t){e.serverResponse(t)})},computed:{},methods:{getDeviceDetail:function(){var e=this,t=i()({event:"get_robot_detail_info",robot_id:this.deviceDetailId});this.$api.post("/",t,function(t){console.log(t),0===t.code?(e.DeviceStatusDetail=t.data,e.setDeviceStatusDetail()):e.$layer.msg("设备详情获取失败！")})},transmitDeviceId:function(){localStorage.removeItem("loadVarItemSelected"),this.$emit("deviceMonitorId",this.deviceDetailId)},backupLogFile:function(e){sessionStorage.setItem("backupLogFileDeviceId",e),this.$router.push({path:"/BackupLogFile"})},oneKeyUpdate:function(t){if(""===t)return this.$layer.msg("请先选择一个设备！"),!1;var s=this;s.$layer.open({type:2,area:["1000px","645px"],title:"一键更新",shade:.3,shadeClose:!1,maxmin:!1,anim:1,content:e.url+"/#/SoftwareVersionList?routerfrom=detail&deviceid="+t,end:function(){if("#/SoftwareUpgrade"===window.location.hash)return s.$router.push({path:"/SoftwareUpgrade"}),!1},yes:function(e){},success:function(){}})},unlockAndLock:function(e){var t=this;if(0===e.length)return this.$layer.msg("请先选择一个设备！"),!1;var s=0;"否"===this.DeviceStatusDetail.lock_status&&(s=1);var a=i()({event:"event_modify_file_lock",robot_list:e,opcode:s});this.$api.post("/",a,function(e){0===e.code?1===s?t.$layer.msg("正在加锁！"):0===s&&t.$layer.msg("正在解锁！"):t.$layer.msg("加解锁失败！")})},changeNtpAddress:function(t){if(0===t.length)return this.$layer.msg("请先选择一个设备！"),!1;var s=this;s.$layer.open({type:2,area:["380px","250px"],title:"更改NTP服务地址",shade:.3,shadeClose:!1,id:"ChangeNtpAddress",maxmin:!1,anim:1,content:e.url+"/#/ChangeNtpAddress?deviceList="+i()(t),yes:function(e){s.$layer.close(e)},end:function(){},success:function(){}})},urgentStop:function(e){var t=this;if(this.moreMenuIndex=-1,""!==e){var s=i()({event:"stop_emergency",robot_id:[e]});this.$api.post("/",s,function(e){0===e.code?t.$layer.msg("急停请求已下发！"):t.$layer.msg("急停请求下发失败！")})}else this.$layer.msg("请选择一个设备！")},clearWrong:function(e){var t=this;if(this.moreMenuIndex=-1,""!==e){var s=i()({event:"clear_error",robot_id:[e]});this.$api.post("/",s,function(e){0===e.code?t.$layer.msg("清错请求已下发！"):t.$layer.msg("清错请求下发失败！")})}else this.$layer.msg("请选择一个设备！")},setDeviceStatusDetail:function(){for(var e in this.DeviceStatusDetail)"disk_totoal_size"===e&&(this.DeviceStatusDetail[e]=this.DeviceStatusDetail[e]/1024/1024,this.DeviceStatusDetail[e]=this.DeviceStatusDetail[e].toFixed(2)+"GB"),"total_memory"===e&&(this.DeviceStatusDetail[e]=this.DeviceStatusDetail[e]/1024/1024/1024,this.DeviceStatusDetail[e]=this.DeviceStatusDetail[e].toFixed(2)+"GB"),"lock_status"===e&&(0===this.DeviceStatusDetail[e]?this.DeviceStatusDetail[e]="否":this.DeviceStatusDetail[e]="是"),delete this.DeviceStatusDetail.robot_id,delete this.DeviceStatusDetail.process_list},serverResponse:function(e){if(261===e.msg_type)for(var t in e.data)e.data[t].robot_id===this.deviceDetailId&&0===e.data[t].error_code&&(0===e.data[t].opcode?this.DeviceStatusDetail.lock_status="否":1===e.data[t].opcode&&(this.DeviceStatusDetail.lock_status="是"));if(264===e.msg_type)for(var s in e.data)e.data[s].robot_id===this.deviceDetailId&&(this.DeviceStatusDetail.ntp_server=e.data[0].ntp_server)}},watch:{}}}).call(t,s("DuR2"))},F5Wc:function(e,t){},FwBH:function(e,t){},Ix1J:function(e,t){},JXNQ:function(e,t){},KVpB:function(e,t){},Lae9:function(e,t){},M4UZ:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("7+uW"),i={name:"App",data:function(){return{}},created:function(){},watch:{$route:function(e,t){var s=document.getElementById("layui-layer"+this.$layer.index);s&&"none"!==s.style.display&&this.$layer.close(this.$layer.index)}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=s("VU/8")(i,o,!1,function(e){s("M4UZ")},null,null).exports,n=s("/ocq"),c=s("mvHQ"),l=s.n(c),u={data:function(){return{username:"",userpass:"",showPage:!1}},created:function(){var e=this;null!==sessionStorage.getItem("loginOutMsg")&&null===sessionStorage.getItem("exitLogin")&&(e.$layer.alert(sessionStorage.getItem("loginOutMsg"),{closeBtn:0},function(t){e.$layer.close(t)}),sessionStorage.removeItem("loginOutMsg")),null!==sessionStorage.getItem("exitLogin")&&sessionStorage.removeItem("exitLogin"),null!==localStorage.getItem("login_token")?e.autoLogin():e.showPage=!0,window.onlyOneUserLoginTime=setInterval(function(){e.onlyOneUserLogin()},1e3)},methods:{onlyOneUserLogin:function(){localStorage.setItem("updateStorage",(new Date).getTime()),null!==localStorage.getItem("login_token")&&(this.$layer.closeAll(),"root"===localStorage.getItem("username")?this.$router.push({path:"/UserManage"}):this.$router.push({path:"/DeviceStatus"}),console.log("当前浏览器其他窗口自动登陆！"),clearInterval(window.onlyOneUserLoginTime))},autoLogin:function(){var e=this,t=this,s=l()({event:"event_login",login_token:localStorage.getItem("login_token"),uuid:localStorage.getItem("uuid")});t.$api.post("/login",s,function(s){console.log(s),0===s.code?(localStorage.setItem("login_token",s.data.login_token),"root"===localStorage.getItem("username")?t.$router.push({path:"/UserManage"}):t.$router.push({path:"/DeviceStatus"})):(e.showPage=!0,localStorage.removeItem("uuid"),localStorage.removeItem("login_token"),localStorage.removeItem("username"))})},login:function(){var e=this,t=this;if(""===t.username)return this.$refs.usernameFocus.focus(),t.$layer.msg("用户名或密码不准为空！"),!1;if(""===t.userpass)return this.$refs.userpassFocus.focus(),t.$layer.msg("用户名或密码不准为空！"),!1;var s=l()({event:"event_login",user_name:t.username,password:t.$md5(t.userpass)});t.$api.post("/login",s,function(s){console.log(s),0===s.code?(localStorage.clear(),localStorage.setItem("uuid",s.data.uuid),localStorage.setItem("login_token",s.data.login_token),localStorage.setItem("username",t.username),"root"===t.username?t.$router.push({path:"/UserManage"}):t.$router.push({path:"/DeviceStatus"})):(e.showPage=!0,e.$refs.userpassFocus.focus(),t.$layer.msg("用户名或密码错误！"))})},forget:function(){this.$layer.msg("请与该项目管理员联系重置密码！")},clearSpace:function(e){this.username=this.username.replace(/(^\s*)|(\s*$)/g,""),this.userpass=this.userpass.replace(/(^\s*)|(\s*$)/g,""),this.$layer.msg("不允许输入空格！")}}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.showPage,expression:"showPage"}],staticClass:"login",on:{mousemove:e.onlyOneUserLogin}},[e._m(0),e._v(" "),s("div",{staticClass:"login-dialog"},[s("div",{staticClass:"user-name"},[s("div",{staticClass:"user-name-title"},[e._v("用户名：")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],ref:"usernameFocus",staticClass:"user-name-input",attrs:{type:"text",name:"name",autofocus:"autofocus"},domProps:{value:e.username},on:{keyup:[function(t){return"button"in t||13===t.keyCode?e.login(t):null},function(t){return"button"in t||32===t.keyCode?e.clearSpace(t):null}],input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"user-password"},[s("div",{staticClass:"user-password-title"},[e._v("密码：")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userpass,expression:"userpass"}],ref:"userpassFocus",staticClass:"user-password-input",attrs:{type:"password",name:"password"},domProps:{value:e.userpass},on:{keyup:[function(t){return"button"in t||13===t.keyCode?e.login(t):null},function(t){return"button"in t||32===t.keyCode?e.clearSpace(t):null}],input:function(t){t.target.composing||(e.userpass=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"forget",on:{click:e.forget}},[e._v("忘记密码？")]),e._v(" "),s("div",{staticClass:"submit-btn"},[s("button",{staticClass:"submit",on:{click:e.login}},[e._v("登录")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo"},[t("img",{staticClass:"logo-img",attrs:{src:"static/images/login/login_logo.png",alt:""}})])}]};var d=s("VU/8")(u,p,!1,function(e){s("+NDk")},null,null).exports,h=s("ccZh"),m={name:"PersonalCenter",components:{Menu:h.a},data:function(){return{showUpdatePassword:!1,oldPassword:"",newPassword:"",repeatNewPassword:"",userid:"",username:""}},created:function(){this.userid=localStorage.getItem("login_token"),this.username=localStorage.getItem("username")},methods:{oldPasswordFocus:function(){this.$refs.oldPasswordFocus.focus()},isShowUpdatePassword:function(){this.showUpdatePassword=!0},cancelupdatepassword:function(){this.showUpdatePassword=!1,this.oldPassword="",this.newPassword="",this.repeatNewPassword=""},updatepassword:function(){var e=this;if(""===this.oldPassword)return this.$layer.msg("旧密码不能为空！"),this.$refs.oldPasswordFocus.focus(),!1;if(""===this.newPassword)return this.$layer.msg("新密码不能为空！"),this.$refs.newPasswordFocus.focus(),!1;if(this.newPassword.length<6)this.$layer.msg("用户密码不允许少于6个字符！"),this.$refs.newPasswordFocus.focus();else if(this.newPassword.length>32)this.$layer.msg("用户密码不允许超过32个字符！"),this.$refs.newPasswordFocus.focus();else{if(""===this.repeatNewPassword)return this.$layer.msg("重复新密码不能为空"),this.$refs.repeatNewPasswordFocus.focus(),!1;if(this.newPassword!==this.repeatNewPassword)return this.$layer.msg("两次新密码不一致"),this.$refs.repeatNewPasswordFocus.focus(),!1;if(this.oldPassword===this.newPassword)this.$layer.msg("新密码不能与旧密码相同！"),this.$refs.newPasswordFocus.focus();else{var t=l()({event:"event_update_pwd",login_token:this.userid,old_password:this.$md5(this.oldPassword),new_password:this.$md5(this.newPassword)});this.$api.post("/",t,function(t){if(0===t.code){var s=e;s.oldPassword="",s.newPassword="",s.repeatNewPassword="",s.$layer.alert("修改密码成功，请重新登录！",{closeBtn:0,cancel:function(e){localStorage.removeItem("uuid"),localStorage.removeItem("token"),localStorage.removeItem("login_token"),localStorage.removeItem("username"),s.$layer.close(e),window.location.href="/"}},function(e){localStorage.removeItem("uuid"),localStorage.removeItem("token"),localStorage.removeItem("login_token"),localStorage.removeItem("username"),s.$layer.close(e),window.location.href="/"})}else 102===t.code?s.$layer.msg("原密码不正确！"):103===t.code?s.$layer.msg("该用户不存在！"):104===t.code||106===t.code?(localStorage.setItem("tokenInvalid",!0),window.location.href="/"):s.$layer.msg("更改密码失败！")})}}}},watch:{oldPassword:function(e,t){""!==this.oldPassword&&(-1!==this.oldPassword.indexOf(" ")?(this.$layer.msg("不允许输入空格！",{time:800}),this.oldPassword=t):this.repeatNewPassword.match(/[\u4e00-\u9fa5]/g)&&(this.repeatNewPassword=t))},newPassword:function(e,t){""!==this.newPassword&&(-1!==this.newPassword.indexOf(" ")?(this.$layer.msg("不允许输入空格！",{time:800}),this.newPassword=t):this.repeatNewPassword.match(/[\u4e00-\u9fa5]/g)&&(this.repeatNewPassword=t))},repeatNewPassword:function(e,t){""!==this.repeatNewPassword&&(-1!==this.repeatNewPassword.indexOf(" ")?(this.$layer.msg("不允许输入空格！",{time:800}),this.repeatNewPassword=t):this.repeatNewPassword.match(/[\u4e00-\u9fa5]/g)&&(this.repeatNewPassword=t))}}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("Menu"),e._v(" "),s("div",{staticClass:"personal-center page-right"},[e._m(0),e._v(" "),s("div",{staticClass:"personal-info"},[e._m(1),e._v(" "),s("div",{staticClass:"user-base-info"},[s("div",{staticClass:"user-name"},[s("span",[e._v("用户名：")]),e._v(" "),s("span",{staticClass:"name"},[e._v(e._s(e.username))])]),e._v(" "),s("div",{staticClass:"user-password"},[s("span",[e._v("密   码：")]),e._v(" "),s("span",{staticClass:"stars"},[e._v("******")]),e._v(" "),s("span",{staticClass:"edit-password-btn",on:{mousedown:e.isShowUpdatePassword,click:e.oldPasswordFocus}},[s("img",{attrs:{src:"static/images/commonly/edit.png"}})])])]),e._v(" "),e.showUpdatePassword?s("div",{staticClass:"update-password"},[s("div",{staticClass:"old-password-box"},[s("p",[e._v("请输入旧密码：")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],ref:"oldPasswordFocus",staticClass:"old-password",attrs:{type:"password",autofocus:e.showUpdatePassword},domProps:{value:e.oldPassword},on:{input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"new-password-box"},[s("p",[e._v("请输入新密码：")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],ref:"newPasswordFocus",staticClass:"new-password",attrs:{type:"password"},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"repeat-new-password-box"},[s("p",[e._v("请再次输入新密码：")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.repeatNewPassword,expression:"repeatNewPassword"}],ref:"repeatNewPasswordFocus",staticClass:"repeat-new-password",attrs:{type:"password"},domProps:{value:e.repeatNewPassword},on:{input:function(t){t.target.composing||(e.repeatNewPassword=t.target.value)}}})]),e._v(" "),s("span",{staticClass:"update-password-btn",on:{click:e.updatepassword}},[e._v("确定")]),e._v(" "),s("span",{staticClass:"cancel-update-password-btn",on:{click:e.cancelupdatepassword}},[e._v("取消")])]):e._e()])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tab-menu",attrs:{onselectstart:"return false;"}},[t("a",{staticClass:"active"},[this._v("个人中心")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("span",[this._v("基本信息")])])}]};var f=s("VU/8")(m,g,!1,function(e){s("Lae9")},null,null).exports,v=s("xSqM"),y={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("Menu"),e._v(" "),s("div",{staticClass:"user-manage page-right"},[s("span",{staticClass:"add-new-user-btn",on:{click:function(t){e.editUser("添加新用户")}}},[e._v("添加新用户")]),e._v(" "),s("label",{staticClass:"search-user-label",attrs:{for:"searchUser"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchUser,expression:"searchUser"}],attrs:{type:"text",name:"",id:"searchUser",maxlength:"50"},domProps:{value:e.searchUser},on:{keyup:e.limitInput,input:function(t){t.target.composing||(e.searchUser=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"user-info"},[s("div",{staticClass:"title"},[s("span",[e._v("用户列表")]),e._v("("),s("span",{staticClass:"version-count"},[e._v(e._s(e.searchUserFilter().length))]),e._v(")")]),e._v(" "),s("div",{staticClass:"user-list"},e._l(e.searchUserFilter(),function(t){return s("div",{key:t.target_id,staticClass:"user-item"},[s("div",{staticClass:"user-title-name"},[s("span",{staticClass:"name"},[e._v(e._s(t.user_name))]),e._v(" "),s("span",{staticClass:"action-bar"},[s("span",{staticClass:"edit-user",on:{click:function(s){e.editUser("编辑用户信息",t)}}},[s("img",{attrs:{src:"static/images/commonly/edit.png",title:"编辑用户信息"}})]),e._v(" "),s("span",{staticClass:"del-user",on:{click:function(s){e.delUser(t.target_id)}}},[s("img",{attrs:{src:"static/images/commonly/delete.png",title:"删除用户"}})]),e._v(" "),s("span",{staticClass:"repair-password",on:{click:function(s){e.resetPassword(t.target_id)}}},[s("img",{attrs:{src:"static/images/user-manage/repair-password.png",title:"重置密码"}})])])]),e._v(" "),e._m(0,!0),e._v(" "),s("p",[e._v("用户权限："),s("span",{staticClass:"user-rights"},[e._v(e._s("r"===t.permission?"只读":"可读可写"))])])])}))])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("密       码："),t("span",{staticClass:"user-password"},[this._v("******")])])}]};var _=function(e){s("QDzL")},w=s("VU/8")(v.a,y,!1,_,null,null).exports,b=s("lYFx"),k={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("Menu"),e._v(" "),s("div",{staticClass:"base-config page-right"},[s("div",{staticClass:"action-bar"},[s("span",{class:e.selectedDeviceList.length>0?"unlock actionBarBtnEniabled":"unlock",on:{click:function(t){e.unlockAndLock(e.selectedDeviceList,0)}}},[e._v("解锁")]),e._v(" "),s("span",{class:e.selectedDeviceList.length>0?"lock actionBarBtnEniabled":"lock",on:{click:function(t){e.unlockAndLock(e.selectedDeviceList,1)}}},[e._v("加锁")]),e._v(" "),s("span",{class:e.selectedDeviceList.length>0?"backup actionBarBtnEniabled":"backup",on:{click:function(t){e.backupConfigFile(e.selectedDeviceList.toString())}}},[e._v("备份配置文件")]),e._v(" "),s("span",{class:e.selectedDeviceList.length>0?"change-ntp-address actionBarBtnEniabled":"change-ntp-address",on:{click:function(t){e.changeNtpAddress(e.selectedDeviceList,"")}}},[e._v("更改NTP服务地址")]),e._v(" "),s("label",{staticClass:"search-device-label",attrs:{for:"searchDevice"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchDevice,expression:"searchDevice"}],attrs:{type:"text",name:"",id:"searchDevice",maxlength:"50"},domProps:{value:e.searchDevice},on:{keyup:e.limitInput,input:function(t){t.target.composing||(e.searchDevice=t.target.value)}}})]),e._v(" "),s("label",{staticClass:"show-group-label",attrs:{for:"showGroup"}},[s("span",[e._v("显示分组：")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectGroupName,expression:"selectGroupName"}],attrs:{name:"showGroup",id:"showGroup"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectGroupName=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("所有分组")]),e._v(" "),e._l(e.groupNameListData,function(t){return s("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})],2)])]),e._v(" "),s("DeviceListCommon",{attrs:{selectedGroup:e.selectGroupName,searchDevice:e.searchDevice,pageName:"BaseConfig",clearChecked:e.clearChecked},on:{selectedGroup:e.getselectedGroup,groupNameList:e.getGroupName,selectedDeviceList:e.getSelectedDeviceList,actionBarImplement:e.actionBarImplement}})],1)],1)},staticRenderFns:[]};var S=function(e){s("rzEX")},D=s("VU/8")(b.a,k,!1,S,null,null).exports,L=s("k0sY"),x={name:"GroupDevice",props:["searchDevice","sort","selectedGroup","deviceType","onlyStateAbnormality"],components:{UpdateGroupName:s("soZF").a},data:function(){return{editGroupKeyDownWhich:"",groupDeviceList:[],selectedDeviceList:[],allSelectCheckbox:!1,editGroupName:[],oldProcessgroupalias:"",oldUpdateGroupIndex:-1,allGroupNameList:[],originalGroupNameList:[],selectedGroupLen:0,unconnectedDevice:[],unusualDevice:[],unconnectedDeviceSearch:"",unusualDeviceSearch:"",moreMenuIndex:"01-01"}},created:function(){null!==localStorage.getItem("login_token")&&(this.getGroupDeviceInfo(),window.connectionTimeInterval=setInterval(this.connectionTime,1e3))},beforeDestroy:function(){L.a.$off("socketData"),clearInterval(window.connectionTimeInterval)},mounted:function(){var e=this;L.a.$on("socketData",function(t){e.serverResponse(t)})},watch:{unusualDevice:function(e,t){this.$emit("unusualDeviceLen",[{unusualDeviceLen:this.unusualDevice.length}])},groupDeviceList:function(e,t){var s=0;for(var a in this.groupDeviceList)s+=this.groupDeviceList[a].robot_list.length;this.$emit("groupDeviceListLen",[{groupDeviceListLen:s}])},unconnectedDevice:function(e,t){this.$emit("unconnectedDeviceLen",[{unconnectedDeviceLen:this.unconnectedDevice.length}])},sort:function(e,t){this.sortDeviceComputed()},searchDevice:function(e,t){this.selectedGroupLen=0,this.selectedDeviceList=[],this.allSelectCheckbox=!1,this.groupDeviceList.filter(function(e){e.groupDeviceAllSelect=!1,e.selectedLen=0;for(var t=0;t<e.robot_list.length;t++)e.robot_list[t].checked=!1;return e})},selectedGroup:function(e,t){this.selectedGroupLen=0,this.selectedDeviceList=[],this.allSelectCheckbox=!1,this.groupDeviceList.filter(function(e){e.groupDeviceAllSelect=!1,e.selectedLen=0;for(var t=0;t<e.robot_list.length;t++)e.robot_list[t].checked=!1;return e}),console.log(this.groupDeviceList)},onlyStateAbnormality:function(){this.selectedDeviceList=[],this.allSelectCheckbox=!1,this.groupDeviceList.filter(function(e){e.groupDeviceAllSelect=!1,e.selectedLen=0;for(var t=0;t<e.robot_list.length;t++)e.robot_list[t].checked=!1;return e})},selectedDeviceList:function(e,t){this.$emit("selectedDeviceList",this.selectedDeviceList)},deep:!0},methods:{limitInput:function(){-1===this.unconnectedDeviceSearch.indexOf(" ")&&-1===this.unusualDeviceSearch.indexOf(" ")||(this.unconnectedDeviceSearch=this.unconnectedDeviceSearch.replace(/\s/g,""),this.unusualDeviceSearch=this.unusualDeviceSearch.replace(/\s/g,""),this.$layer.msg("不允许输入空格！")),(this.unconnectedDeviceSearch.length>=50||this.unusualDeviceSearch.length>=50)&&this.$layer.msg("只允许输入50个字符！")},updateGroupNameAfter:function(e){this.$forceUpdate(),this.$set(this.groupDeviceList[e.index],"process_group_alias",e.grouNameText)},geteditGroupName:function(e){this.editGroupName=e},getoldProcessgroupalias:function(e){this.oldProcessgroupalias=e},getoldUpdateGroupIndex:function(e){this.oldUpdateGroupIndex=e},getGroupDeviceInfo:function(){var e=this,t=l()({event:"get_online_robot_list",login_token:localStorage.getItem("login_token")});this.$api.post("/",t,function(t){if(0===t.code){for(var s in e.groupDeviceList=t.data,e.groupDeviceList){e.groupDeviceList[s].currentGroupAllLen=e.groupDeviceList[s].robot_list.length,e.groupDeviceList[s].selectedLen=0;var a=e.groupDeviceList[s].process_group_alias;""===a&&(a=e.groupDeviceList[s].process_group),e.allGroupNameList.push(a),e.originalGroupNameList.push(e.groupDeviceList[s].process_group)}e.$emit("groupNameList",e.allGroupNameList),e.sortDeviceComputed();var i=l()({event:"load_error_status"});e.$api.post("/",i,function(t){for(var s in e.groupDeviceList)for(var a in e.groupDeviceList[s].robot_list){var i=t.data[e.groupDeviceList[s].robot_list[a].robot_id];i||(i=0),e.groupDeviceList[s].robot_list[a].status=i}})}else e.$layer.msg("获取已连接设备信息失败！")});var s=l()({event:"get_offline_robot_list"});this.$api.post("/",s,function(t){0===t.code?e.unconnectedDevice=t.robot_list:e.$layer.msg("获取未连接设备信息失败！")});var a=l()({event:"get_unusual_robot_list"});this.$api.post("/",a,function(t){0===t.code?e.unusualDevice=t.robot_list:e.$layer.msg("获取异常设备信息失败！")})},urgentStop:function(e){var t=this;if(this.moreMenuIndex=-1,""!==e){var s=l()({event:"stop_emergency",robot_id:[e]});this.$api.post("/",s,function(e){0===e.code?t.$layer.msg("急停请求已下发！"):t.$layer.msg("急停请求下发失败！")})}else this.$layer.msg("请选择一个设备！")},clearWrong:function(e){var t=this;if(this.moreMenuIndex=-1,""!==e){var s=l()({event:"clear_error",robot_id:[e]});this.$api.post("/",s,function(e){0===e.code?t.$layer.msg("清错请求已下发！"):t.$layer.msg("清错请求下发失败！")})}else this.$layer.msg("请选择一个设备！")},showDeviceMoreMenu:function(e,t){this.moreMenuIndex=e+"-"+t},serverResponse:function(e){var t=this;if(257===e.msg_type){var s={robot_id:e.robot_id,robot_mac:e.robot_mac,robot_host:e.robot_host,shell_time:e.shell_time,status:0},a={process_group:e.process_group,process_group_alias:"",robot_list:[{robot_id:e.robot_id,robot_mac:e.robot_mac,robot_host:e.robot_host,shell_time:e.shell_time,status:0}]},i=!1;for(var o in t.groupDeviceList)if(t.groupDeviceList[o].process_group===e.process_group){var r=!1;for(var n in t.groupDeviceList[o].robot_list)t.groupDeviceList[o].robot_list[n].robot_id===s.robot_id&&(r=!0);if(!r){t.groupDeviceList[o].robot_list.unshift(s),t.groupDeviceList[o].selectedLen===t.searchDeviceFilter(t.groupDeviceList[o]).length?(t.groupDeviceList[o].groupDeviceAllSelect||t.selectedGroupLen++,t.groupDeviceList[o].groupDeviceAllSelect=!0):t.selectedGroupLen>0&&(t.selectedGroupLen--,t.groupDeviceList[o].groupDeviceAllSelect=!1),t.getHasDeviceGroupNameLen()===t.selectedGroupLen?t.allSelectCheckbox=!0:t.allSelectCheckbox=!1;var c=0;for(var u in t.groupDeviceList)c+=t.searchDeviceFilter(t.groupDeviceList[u]).length;t.$emit("groupDeviceListLen",[{groupDeviceListLen:c}])}i=!0}if(!i){var p=l()({event:"event_query_alias",login_token:localStorage.getItem("login_token"),group_name:e.process_group});t.$api.post("/",p,function(s){var i=s;null===s?(i=e.process_group,t.groupDeviceList.push(a)):(i=s,a.process_group_alias=i,t.groupDeviceList.push(a)),t.getHasDeviceGroupNameLen()===t.selectedGroupLen&&t.selectedGroupLen>0?t.allSelectCheckbox=!0:t.allSelectCheckbox=!1,-1===t.allGroupNameList.indexOf(i)&&(t.allGroupNameList.push(i),t.$emit("groupNameList",t.allGroupNameList))})}for(var d in t.unconnectedDevice)t.unconnectedDevice[d].robot_id===e.robot_id&&(t.unconnectedDevice.splice(d,1),t.unconnectedDevice=t.unconnectedDevice);for(var h in t.unusualDevice)t.unusualDevice[h].robot_id===e.robot_id&&(t.unusualDevice.splice(h,1),t.unusualDevice=t.unusualDevice);t.sortDeviceComputed()}if(258===e.msg_type){var m=[];for(var g in t.groupDeviceList)for(var f in t.groupDeviceList[g].robot_list)if(t.groupDeviceList[g].robot_list[f].robot_id===e.robot_id){t.groupDeviceList[g].selectedLen>0&&t.groupDeviceList[g].robot_list[f].checked&&(t.groupDeviceList[g].selectedLen=t.groupDeviceList[g].selectedLen-1,t.selectedDeviceList.splice(t.selectedDeviceList.indexOf(e.robot_id),1)),m=t.groupDeviceList[g].robot_list[f],t.groupDeviceList[g].robot_list.splice(f,1),t.groupDeviceList[g].selectedLen===t.groupDeviceList[g].robot_list.length?(t.groupDeviceList[g].groupDeviceAllSelect||t.selectedGroupLen++,t.groupDeviceList[g].groupDeviceAllSelect=!0):t.selectedGroupLen>0&&(t.groupDeviceList[g].groupDeviceAllSelect&&t.selectedGroupLen--,t.groupDeviceList[g].groupDeviceAllSelect=!1);var v=0;for(var y in t.groupDeviceList)if(v+=t.groupDeviceList[y].robot_list.length,0===t.groupDeviceList[y].robot_list.length){t.selectedGroupLen>0&&t.groupDeviceList[y].groupDeviceAllSelect&&t.selectedGroupLen--,t.allSelectCheckbox=!1;var _=t.groupDeviceList[y].process_group_alias;""===_&&(_=t.groupDeviceList[y].process_group),t.allGroupNameList.splice(t.allGroupNameList.indexOf(_),1),t.groupDeviceList.splice(y,1)}t.getHasDeviceGroupNameLen()===t.selectedGroupLen&&t.selectedGroupLen>0?t.allSelectCheckbox=!0:t.allSelectCheckbox=!1,t.$emit("groupDeviceListLen",[{groupDeviceListLen:v}]),t.$emit("groupNameList",t.allGroupNameList)}var w={robot_id:m.robot_id,robot_mac:m.robot_mac,robot_host:m.robot_host};t.unconnectedDevice.unshift(w)}if(260===e.msg_type)for(var b in t.unusualDevice)if(t.unusualDevice[b].robot_id!==e.robot_id){var k={robot_id:e.robot_id,robot_mac:e.robot_mac,robot_host:e.robot_host};t.unusualDevice.unshift(k)}if(1537===e.msg_type){for(var S in t.groupDeviceList)for(var D in t.groupDeviceList[S].robot_list)t.groupDeviceList[S].robot_list[D].robot_id===e.robot_id&&(t.groupDeviceList[S].robot_list[D].status=e.status);t.sortDeviceComputed()}},transmitDeviceId:function(e,t){0===e?this.$emit("deviceDetailId",t):(localStorage.removeItem("loadVarItemSelected"),this.$emit("deviceMonitorId",t))},shrinkDeviceList:function(e){this.$forceUpdate(),this.$set(this.groupDeviceList[e],"shrink",!this.groupDeviceList[e].shrink)},sortDeviceComputed:function(){var e=this;for(var t in console.log(e.groupDeviceList),e.groupDeviceList)e.groupDeviceList[t].robot_list.sort(function(t,s){return"state_abnormality"===e.sort?t.status>s.status?-1:1:"normal_state"===e.sort?t.status>s.status?1:-1:t[e.sort]>s[e.sort]?1:-1})},searchDeviceFilter:function(e){var t=this,s=t.searchDevice.replace(/^\s+|\s+$/g,"");return""!==s||""!==t.selectedGroup||t.onlyStateAbnormality?e.robot_list.filter(function(a){var i=(""+a.robot_id).indexOf(s),o=("mac地址："+a.robot_mac).toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),r=("ip地址："+a.robot_host).toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),n="连接时长：".indexOf(s);return(-1!==i||-1!==o||-1!==r||-1!==n)&&(""===e.process_group_alias&&e.process_group===t.selectedGroup||e.process_group_alias===t.selectedGroup||""===t.selectedGroup)&&(t.onlyStateAbnormality&&a.status?a:t.onlyStateAbnormality?void 0:a)}):e.robot_list},unconnectedDeviceSearchFilter:function(e){var t=this;return e.filter(function(e){var s=(""+e.robot_id).indexOf(t.unconnectedDeviceSearch),a=("上一次mac地址："+e.robot_mac).toLocaleUpperCase().indexOf(t.unconnectedDeviceSearch.toLocaleUpperCase()),i=("上一次ip地址："+e.robot_host).toLocaleUpperCase().indexOf(t.unconnectedDeviceSearch.toLocaleUpperCase());return(-1!==s||-1!==a||-1!==i)&&e})},unusualDeviceSearchFilter:function(e){var t=this;return e.filter(function(e){var s=(""+e.robot_id).indexOf(t.unusualDeviceSearch),a=("上一次mac地址："+e.robot_mac).toLocaleUpperCase().indexOf(t.unusualDeviceSearch.toLocaleUpperCase()),i=("上一次ip地址："+e.robot_host).toLocaleUpperCase().indexOf(t.unusualDeviceSearch.toLocaleUpperCase());return(-1!==s||-1!==a||-1!==i)&&e})},getHasDeviceGroupNameLen:function(){var e=0;for(var t in this.groupDeviceList)this.searchDeviceFilter(this.groupDeviceList[t]).length>0&&e++;return e},singleSelcet:function(e){console.log(e.target.checked);var t=e.target.getAttribute("data-groupindex"),s=e.target.getAttribute("data-key"),a=this.searchDeviceFilter(this.groupDeviceList[t]);a[s].checked=e.target.checked,this.groupDeviceList[t].selectedLen||(this.groupDeviceList[t].selectedLen=0),e.target.checked?this.groupDeviceList[t].selectedLen++:this.groupDeviceList[t].selectedLen--,a.length===this.groupDeviceList[t].selectedLen?(this.groupDeviceList[t].groupDeviceAllSelect=!0,this.selectedGroupLen++):0===this.selectedGroupLen||e.target.checked||(this.groupDeviceList[t].groupDeviceAllSelect=!1,this.selectedGroupLen--),this.getHasDeviceGroupNameLen()===this.selectedGroupLen?this.allSelectCheckbox=!0:this.allSelectCheckbox=!1},allSelcet:function(e){var t=e.target.value,s=this.searchDeviceFilter(this.groupDeviceList[t]);for(var a in this.groupDeviceList[t].groupDeviceAllSelect=e.target.checked,s){s[a].checked=e.target.checked;var i=s[a].robot_id,o=this.selectedDeviceList.indexOf(i);e.target.checked?-1===o&&this.selectedDeviceList.push(i):this.selectedDeviceList.splice(o,1)}e.target.checked?(this.groupDeviceList[t].groupDeviceAllSelect=!0,this.selectedGroupLen++,this.groupDeviceList[t].selectedLen=s.length):0!==this.selectedGroupLen&&(this.groupDeviceList[t].groupDeviceAllSelect=!1,this.selectedGroupLen--,this.groupDeviceList[t].selectedLen=0),this.getHasDeviceGroupNameLen()===this.selectedGroupLen?this.allSelectCheckbox=!0:this.allSelectCheckbox=!1},selectCheckboxAll:function(e){if(this.selectedGroupLen=0,this.selectedDeviceList=[],e.target.checked&&(this.selectedGroupLen=this.getHasDeviceGroupNameLen(),0===this.selectedGroupLen))return!1;for(var t in this.groupDeviceList)for(var s in this.groupDeviceList[t].groupDeviceAllSelect=e.target.checked,this.groupDeviceList[t].selectedLen=0,this.searchDeviceFilter(this.groupDeviceList[t])){var a=this.searchDeviceFilter(this.groupDeviceList[t])[s];a.checked=e.target.checked,e.target.checked&&(this.groupDeviceList[t].selectedLen=this.groupDeviceList[t].selectedLen+1,this.selectedDeviceList.push(a.robot_id))}},connectionTime:function(){var e=this.groupDeviceList;for(var t in e){var s=e[t].robot_list;for(var a in s){var i=s[a].shell_time;"0"===i&&(i="00:00:00");var o="";o=2===i.split("-").length?i.split("-")[1].split(":"):i.split(":");var r="",n=parseInt(o[0]),c=parseInt(o[1]),l=parseInt(o[2])+1;60===l&&(l=0,c++),60===c&&(c=0,n++),n>=24&&(r=parseInt(n/24)+"-",n=0),n<10&&(n="0"+n),c<10&&(c="0"+c),l<10&&(l="0"+l),i=r+n+":"+c+":"+l,s[a].shell_time=i}}}}},C={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"groupDeviceComponent"},[s("label",{directives:[{name:"show",rawName:"v-show",value:0===e.deviceType,expression:"deviceType === 0"}],staticClass:"label-selectCheckboxAll",attrs:{for:"selectCheckboxAll"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelectCheckbox,expression:"allSelectCheckbox"}],attrs:{type:"checkbox",id:"selectCheckboxAll"},domProps:{checked:Array.isArray(e.allSelectCheckbox)?e._i(e.allSelectCheckbox,null)>-1:e.allSelectCheckbox},on:{click:e.selectCheckboxAll,change:function(t){var s=e.allSelectCheckbox,a=t.target,i=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&(e.allSelectCheckbox=s.concat([null])):o>-1&&(e.allSelectCheckbox=s.slice(0,o).concat(s.slice(o+1)))}else e.allSelectCheckbox=i}}}),e._v(" "),s("span",[e._v("全选")]),e._v(" "),s("i",{staticClass:"cover"}),e._v(" "),e.selectedDeviceList.length>0?s("span",{staticClass:"selected-length"},[e._v("已勾选设备："+e._s(e.selectedDeviceList.length))]):e._e()]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.deviceType,expression:"deviceType === 0"}],staticClass:"scroll-view-common"},e._l(e.groupDeviceList,function(t,a){return t.process_group_alias===e.selectedGroup||""===e.selectedGroup||""===t.process_group_alias&&t.process_group===e.selectedGroup?s("div",{key:t.id,staticClass:"group-device"},[s("div",{class:e.searchDeviceFilter(t).length>0&&!t.shrink?"group-title group-title-active":"group-title"},[s("UpdateGroupName",{attrs:{searchDeviceFilter:e.searchDeviceFilter(t),groupList:t,groupIndex:a,allGroupNameList:e.allGroupNameList,originalGroupNameList:e.originalGroupNameList,editGroupName:e.editGroupName,oldProcessgroupalias:e.oldProcessgroupalias,oldUpdateGroupIndex:e.oldUpdateGroupIndex},on:{updateGroupNameAfter:e.updateGroupNameAfter,editGroupName:e.geteditGroupName,getoldProcessgroupalias:e.getoldProcessgroupalias,getoldUpdateGroupIndex:e.getoldUpdateGroupIndex}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:!t.shrink,expression:"!groupList.shrink"}],staticClass:"arrow",attrs:{src:"static/images/commonly/packet-expansion.png"},on:{click:function(t){e.shrinkDeviceList(a)}}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:t.shrink,expression:"groupList.shrink"}],staticClass:"arrow",attrs:{src:"static/images/commonly/packet-folding.png"},on:{click:function(t){e.shrinkDeviceList(a)}}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.shrink,expression:"!groupList.shrink"}],staticClass:"single-group-device"},[e.searchDeviceFilter(t).length>0?s("label",{staticClass:"label-selectCheckboxGroup"},[s("input",{staticClass:"selectCheckboxGroup",attrs:{type:"checkbox"},domProps:{value:a,checked:t.groupDeviceAllSelect},on:{click:e.allSelcet}}),e._v(" "),s("span",[e._v("全选")]),e._v(" "),s("i",{staticClass:"cover"}),e._v(" "),t.selectedLen>0?s("span",{staticClass:"selected-length"},[e._v("已勾选设备："+e._s(t.selectedLen))]):e._e()]):e._e(),e._v(" "),e.searchDeviceFilter(t).length>0?s("div",{staticClass:"group-list"},e._l(e.searchDeviceFilter(t),function(t,i){return s("div",{key:t.robot_id,staticClass:"device-item",attrs:{onselectstart:"return false"}},[s("div",{class:t.status?"device-name device-status-abnormal":"device-name",on:{mouseleave:function(t){e.showDeviceMoreMenu(-1,-1)}}},[s("label",{staticClass:"label-select-device"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedDeviceList,expression:"selectedDeviceList"}],staticClass:"select-device",attrs:{type:"checkbox","data-key":i,"data-groupindex":a},domProps:{value:t.robot_id,checked:Array.isArray(e.selectedDeviceList)?e._i(e.selectedDeviceList,t.robot_id)>-1:e.selectedDeviceList},on:{click:e.singleSelcet,change:function(s){var a=e.selectedDeviceList,i=s.target,o=!!i.checked;if(Array.isArray(a)){var r=t.robot_id,n=e._i(a,r);i.checked?n<0&&(e.selectedDeviceList=a.concat([r])):n>-1&&(e.selectedDeviceList=a.slice(0,n).concat(a.slice(n+1)))}else e.selectedDeviceList=o}}}),e._v(" "),s("i",{staticClass:"cover"}),e._v(" "),s("span",{staticClass:"device-id"},[e._v(e._s(t.robot_id))])]),e._v(" "),s("span",{staticClass:"action-bar-device-item"},[t.status?s("span",{staticClass:"action-bar-device-abnormal",attrs:{title:"异常"}},[s("img",{attrs:{src:"static/images/device-status/action-bar-abnormal.png"}})]):e._e(),e._v(" "),s("span",{staticClass:"action-bar-device-detail",attrs:{title:"详细信息"},on:{click:function(s){e.transmitDeviceId(0,t.robot_id)}}},[s("img",{attrs:{src:"static/images/device-status/action-bar-device-detail.png"}})]),e._v(" "),t.status?e._e():s("span",{staticClass:"action-bar-monitor",attrs:{title:"实时监控"},on:{click:function(s){e.transmitDeviceId(1,t.robot_id)}}},[s("img",{attrs:{src:"static/images/device-status/action-bar-monitor.png"}})]),e._v(" "),s("span",{staticClass:"action-bar-more"},[s("img",{attrs:{src:"static/images/device-status/action-bar-more.png"},on:{click:function(t){e.showDeviceMoreMenu(a,i)}}}),e._v(" "),e.moreMenuIndex===a+"-"+i?s("span",{staticClass:"more-menu"},[t.status?s("span",{on:{click:function(s){e.transmitDeviceId(1,t.robot_id)}}},[e._v("实时监控")]):e._e(),e._v(" "),s("span",{on:{click:function(s){e.urgentStop(t.robot_id)}}},[e._v("急停")]),e._v(" "),s("span",{on:{click:function(s){e.clearWrong(t.robot_id)}}},[e._v("清错")])]):e._e()])]),e._v(" "),s("p",[e._v("MAC地址："),s("span",{staticClass:"mac-address"},[e._v(e._s(t.robot_mac))])]),e._v(" "),s("p",[e._v("IP地址："),s("span",{staticClass:"ip-address"},[e._v(e._s(t.robot_host))])]),e._v(" "),s("p",[e._v("连接时长："),s("span",{staticClass:"connection-length"},[e._v(e._s(t.shell_time))])])])])})):e._e()])]):e._e()})),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1===e.deviceType,expression:"deviceType === 1"}],staticClass:"scroll-view-common unconnected-height"},[s("div",{staticClass:"unconnectedDeviceSearch"},[s("label",{staticClass:"search-device-label",attrs:{for:"searchDevice"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.unconnectedDeviceSearch,expression:"unconnectedDeviceSearch"}],attrs:{type:"text",name:"",id:"unconnectedDeviceSearch",maxlength:"50"},domProps:{value:e.unconnectedDeviceSearch},on:{keyup:e.limitInput,input:function(t){t.target.composing||(e.unconnectedDeviceSearch=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"group-device"},[s("div",{staticClass:"group-title group-title-active"},[s("span",{staticClass:"group-name"},[e._v("设备列表")]),e._v("\n          ("),s("span",{staticClass:"device-count"},[e._v(e._s(e.unconnectedDeviceSearchFilter(e.unconnectedDevice).length))]),e._v(")\n        ")]),e._v(" "),s("div",{staticClass:"group-list"},e._l(e.unconnectedDeviceSearchFilter(e.unconnectedDevice),function(t){return s("div",{key:t.robot_id,staticClass:"device-item",attrs:{onselectstart:"return false;"}},[s("div",{staticClass:"device-name"},[s("label",{staticClass:"label-select-device"},[s("span",{staticClass:"device-id"},[e._v(e._s(t.robot_id))])]),e._v(" "),s("p",[e._v("上一次MAC地址："),s("span",{staticClass:"mac-address"},[e._v(e._s(t.robot_mac))])]),e._v(" "),s("p",[e._v("上一次IP地址："),s("span",{staticClass:"ip-address"},[e._v(e._s(t.robot_host))])])])])}))])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2===e.deviceType,expression:"deviceType === 2"}],staticClass:"scroll-view-common unusual-height"},[s("div",{staticClass:"unusualDeviceSearch"},[s("label",{staticClass:"search-device-label",attrs:{for:"searchDevice"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.unusualDeviceSearch,expression:"unusualDeviceSearch"}],attrs:{type:"text",name:"",id:"unusualDeviceSearch",maxlength:"50"},domProps:{value:e.unusualDeviceSearch},on:{keyup:e.limitInput,input:function(t){t.target.composing||(e.unusualDeviceSearch=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"group-device"},[s("div",{staticClass:"group-title group-title-active"},[s("span",{staticClass:"group-name"},[e._v("设备列表")]),e._v("\n          ("),s("span",{staticClass:"device-count"},[e._v(e._s(e.unusualDeviceSearchFilter(e.unusualDevice).length))]),e._v(")\n        ")]),e._v(" "),s("div",{staticClass:"group-list"},e._l(e.unusualDeviceSearchFilter(e.unusualDevice),function(t){return s("div",{key:t.robot_id,staticClass:"device-item",attrs:{onselectstart:"return false;"}},[s("div",{staticClass:"device-name"},[s("label",{staticClass:"label-select-device"},[s("span",{staticClass:"device-id"},[e._v(e._s(t.robot_id))])]),e._v(" "),s("p",[e._v("上一次MAC地址："),s("span",{staticClass:"mac-address"},[e._v(e._s(t.robot_mac))])]),e._v(" "),s("p",[e._v("上一次IP地址："),s("span",{staticClass:"ip-address"},[e._v(e._s(t.robot_host))])])])])}))])])])},staticRenderFns:[]};var I=s("VU/8")(x,C,!1,function(e){s("F5Wc")},null,null).exports,N=s("EwqY"),$={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"device-status-detail"},[s("div",{staticClass:"device-status-detail-info"},[s("div",{staticClass:"info"},[s("h1",{staticClass:"device-num"},[e._v("设备编号："),s("span",{staticClass:"num"},[e._v(e._s(e.deviceDetailId))])]),e._v(" "),s("h2",{staticClass:"base-info-title"},[e._v("基本信息")]),e._v(" "),s("div",{staticClass:"base-info-list"},[s("p",[e._v("IP地址："),s("span",{staticClass:"ipv4"},[e._v(e._s(e.DeviceStatusDetail.robot_host))])]),e._v(" "),s("p",[e._v("MAC地址："),s("span",{staticClass:"mac"},[e._v(e._s(e.DeviceStatusDetail.robot_mac))])]),e._v(" "),s("br"),e._v(" "),s("p",[e._v("是否锁住："),s("span",{staticClass:"lock-status"},[e._v(e._s(e.DeviceStatusDetail.lock_status))])]),e._v(" "),s("p",[e._v("NTP服务器地址："),s("span",{staticClass:"ntp-address"},[e._v(e._s(e.DeviceStatusDetail.ntp_server))])]),e._v(" "),s("br"),e._v(" "),s("p",[e._v("软件版本号："),s("span",[e._v("V"+e._s(e.DeviceStatusDetail.software_version))])]),e._v(" "),s("p",[e._v("配置版本号："),s("span",[e._v(e._s(e.DeviceStatusDetail.config_version))])]),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),s("br"),e._v(" "),s("p",[e._v("磁盘大小："),s("span",[e._v(e._s(e.DeviceStatusDetail.disk_totoal_size))])]),e._v(" "),s("p",[e._v("总内存："),s("span",[e._v(e._s(e.DeviceStatusDetail.total_memory))])]),e._v(" "),s("p",[e._v("CPU个数："),s("span",[e._v(e._s(e.DeviceStatusDetail.cpu_number))])]),e._v(" "),e._l(e.DeviceStatusDetail.cpu_list,function(t,a){return s("p",{key:a},[e._v("\n                  CPU名称："),s("span",[e._v(e._s(t.cpu_name))]),e._v("   CPU频率："),s("span",[e._v(e._s(t.cpu_hz))])])}),e._v(" "),s("p",[e._v("系统信息："),s("span",[e._v(e._s(e.DeviceStatusDetail.uname))])]),e._v(" "),s("br"),e._v(" "),e._m(3),e._v(" "),s("br"),s("br")],2),e._v(" "),s("div",{staticClass:"executable-operation-btn"},[s("h2",{staticClass:"executable-operation-title"},[e._v("操作")]),e._v(" "),s("div",{staticClass:"operation-btn-box"},[s("span",{on:{click:function(t){e.clearWrong(e.deviceDetailId)}}},[e._v("清错")]),e._v(" "),s("span",{on:{click:function(t){e.urgentStop(e.deviceDetailId)}}},[e._v("急停")]),e._v(" "),s("span",{on:{click:e.transmitDeviceId}},[e._v("实时监控")]),e._v(" "),s("span",{on:{click:function(t){e.changeNtpAddress([e.deviceDetailId])}}},[e._v("更改NTP服务器地址")]),e._v(" "),s("span",{on:{click:function(t){e.unlockAndLock([e.deviceDetailId])}}},[e._v(e._s("是"===e.DeviceStatusDetail.lock_status?"解锁":"加锁"))]),e._v(" "),s("span",[e._v("备份配置文件")]),e._v(" "),s("span",{on:{click:function(t){e.oneKeyUpdate(e.deviceDetailId)}}},[e._v("一键更新")]),e._v(" "),s("span",{on:{click:function(t){e.backupLogFile(e.deviceDetailId)}}},[e._v("备份日志文件")]),e._v(" "),s("span",[e._v("固件升级")])])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("相机版本号："),t("span")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("PLC版本号："),t("span")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("自主驱动版本号："),t("span")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("车载错误信息："),t("span")])}]};var T=function(e){s("04n5")},A=s("VU/8")(N.a,$,!1,T,null,null).exports,P=s("b6p9"),E={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"realtime-monitor"},[s("div",{staticClass:"system-process-monitor"},[s("div",{staticClass:"title"},[s("span",{class:"system"===e.systemProcess?"active":"",on:{click:function(t){e.tabSystemProcess(0)}}},[e._v("系统监控")]),e._v(" "),s("span",{class:"process"===e.systemProcess?"active":"",on:{click:function(t){e.tabSystemProcess(1)}}},[e._v("进程监控")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"system"===e.systemProcess,expression:"systemProcess === 'system'"}],staticClass:"system-monitor"},[s("div",{staticClass:"system-monitor-echarts",attrs:{id:"cpuEcharts"}}),e._v(" "),s("div",{staticClass:"cpu-info"},[s("span",[e._v("个数："+e._s(e.DeviceStatusDetail.cpu_number))]),e._v(" "),s("span",[e._v("基准速度："+e._s(e.datumSpeed)+"GHz")])]),e._v(" "),s("div",{staticClass:"system-monitor-echarts",attrs:{id:"memoryEcharts"}}),e._v(" "),s("div",{staticClass:"memory-info"},[s("span",[e._v("总内存："+e._s(e.totalMemory)+"GB")]),e._v(" "),s("span",[e._v("剩余内存："+e._s(e.freeMemory)+"GB")])]),e._v(" "),s("div",{staticClass:"system-monitor-echarts",attrs:{id:"harddiskEcharts"}}),e._v(" "),s("div",{staticClass:"harddisk-info"},[s("span",[e._v("总磁盘："+e._s(e.diskToalSize)+"GB")]),e._v(" "),s("span",[e._v("已使用磁盘："+e._s(e.diskUsedSize)+"GB")])]),e._v(" "),s("div",{staticClass:"system-monitor-echarts",attrs:{id:"networkFlowEcharts"}}),e._v(" "),s("div",{staticClass:"networkflow-info"},[s("span",[e._v("发送流量："+e._s(e.netIoTra)+"Kbps")]),e._v(" "),s("span",[e._v("接收流量："+e._s(e.netIoRec)+"Kbps")])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"process"===e.systemProcess,expression:"systemProcess === 'process'"}],staticClass:"process-monitor"},e._l(e.robotProcessDetailInfo,function(t,a){return s("div",{key:t.process_name,staticClass:"process"},[s("div",{staticClass:"process-monitor-echarts",attrs:{id:"mtEcharts"+a}},[e._v(e._s(t.process_name))]),e._v(" "),s("div",{staticClass:"process-info"},[s("span",[e._v("进程ID："+e._s(t.process_pid))]),e._v(" "),s("span",[e._v("运行时间："+e._s(t.run_time))])])])}))]),e._v(" "),s("div",{staticClass:"directional-comprehensive-monitor"},[s("div",{staticClass:"title"},[s("span",{class:"directional"===e.directionalComprehensive?"active":"",on:{click:function(t){e.tabDirectionalComprehensive(0)}}},[e._v("定向监控")]),e._v(" "),s("span",{class:"comprehensive"===e.directionalComprehensive?"active":"",on:{click:function(t){e.tabDirectionalComprehensive(1)}}},[e._v("综合监控")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"directional"===e.directionalComprehensive,expression:"directionalComprehensive === 'directional'"}],staticClass:"directional-content"},[s("div",{staticClass:"tab-directional-monitor"},[s("span",{class:"load_navigation"===e.directionalMonitor?"navigation active":"navigation",attrs:{"data-type":"load_navigation"},on:{click:e.tabDirectionalMonitor}},[e._v("导航实时监控")]),e._v(" "),s("span",{class:"load_vehicle"===e.directionalMonitor?"chassis active":"chassis",attrs:{"data-type":"load_vehicle"},on:{click:e.tabDirectionalMonitor}},[e._v("底盘实时监控")])]),e._v(" "),s("div",{staticClass:"monitor-list-data"},[e._m(0),e._v(" "),s("div",{ref:"scrollTop",staticClass:"table-scroll",domProps:{innerHTML:e._s(e.directionalMonitorHtml)}})])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"comprehensive"===e.directionalComprehensive,expression:"directionalComprehensive === 'comprehensive'"}],staticClass:"comprehensive-content"},[s("span",{staticClass:"select-parameter-source",on:{click:e.selectParameterSource}},[e._v("选择参数源")]),e._v(" "),s("div",{staticClass:"monitor-list-data"},[e._m(1),e._v(" "),s("div",{staticClass:"table-scroll"},[s("div",{staticClass:"loadVarlist"},e._l(e.loadVarlistData,function(t,a){return s("div",{key:t.id,staticClass:"loadVar-haschild"},[s("div",{staticClass:"loadVarItem"},[s("span",[s("a",{attrs:{href:"javascript:;","data-id":t.id,"data-type":t.type,"data-key":a},on:{click:e.getSingleItem}},[e._v(e._s(t.expend?"-":"+"))]),e._v("\n                    "+e._s(t.id)+":"+e._s(t.name)+"\n                  ")]),e._v(" "),s("span")]),e._v(" "),e._l(e.loadVardata,function(a){return t.expend&&e.getSingleItemSelectedId===t.id?s("div",{key:Object.keys(a)[0],staticClass:"child-item"},[s("span",[e._v(e._s(Object.keys(a)[0]))]),e._v(" "),s("span",[e._v(e._s(Object.values(a)[0]))])]):e._e()})],2)}))])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"thead-title"},[t("span",[this._v("参数")]),t("span",[this._v("值")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"thead-title"},[t("span",[this._v("参数")]),t("span",[this._v("值")])])}]};var U=function(e){s("+Wj/")},M={name:"DeviceStatus",components:{RealtimeMonitor:s("VU/8")(P.a,E,!1,U,null,null).exports,DeviceStatusDetail:A,GroupDevice:I,Menu:h.a},data:function(){return{onlyStateAbnormality:!1,deviceMonitorId:"",deviceDetailId:"",showMonitorPage:!0,showDetailPage:!0,selectedDeviceList:[],actionBarBtnEniabled:!1,crumbs:"",searchDevice:"",groupNameListData:[],selectGroupName:"",sort:"shell_time",deviceType:0,groupDeviceListLen:0,unconnectedDeviceLen:0,unusualDeviceLen:0}},created:function(){},methods:{urgentStop:function(){var e=this;if(this.selectedDeviceList.length>0){var t=l()({event:"stop_emergency",robot_id:this.selectedDeviceList});this.$api.post("/",t,function(t){0===t.code?e.$layer.msg("急停请求已下发！"):e.$layer.msg("急停请求下发失败！")})}else this.$layer.msg("请选择一个设备！")},clearWrong:function(){var e=this;if(this.selectedDeviceList.length>0){var t=l()({event:"clear_error",robot_id:this.selectedDeviceList});this.$api.post("/",t,function(t){0===t.code?e.$layer.msg("清错请求已下发！"):e.$layer.msg("清错请求下发失败！")})}else this.$layer.msg("请选择一个设备！")},backToDeviceList:function(){this.deviceDetailId="",this.deviceMonitorId=""},getDeviceMonitorId:function(e){this.deviceDetailId="",this.deviceMonitorId=e},getDeviceDetailId:function(e){this.deviceMonitorId="",this.deviceDetailId=e},getselectedGroup:function(e){this.selectGroupName=e},getSelectedDeviceList:function(e){console.log(e),this.selectedDeviceList=e,0===e.length?this.actionBarBtnEniabled=!1:this.actionBarBtnEniabled=!0},getUnusualDeviceLen:function(e){this.unusualDeviceLen=e[0].unusualDeviceLen},getGroupDeviceListLen:function(e){this.groupDeviceListLen=e[0].groupDeviceListLen},getUnconnectedDeviceLen:function(e){this.unconnectedDeviceLen=e[0].unconnectedDeviceLen},tabDeviceType:function(e){this.deviceType=e},getGroupName:function(e){this.selectGroupName="",this.groupNameListData=e},limitInput:function(){-1!==this.searchDevice.indexOf(" ")&&(this.searchDevice=this.searchDevice.replace(/\s/g,""),this.$layer.msg("不允许输入空格！")),this.searchDevice.length>=50&&this.$layer.msg("只允许输入50个字符！")}},watch:{deviceType:function(e,t){clearInterval(window.reloadLoadVarlistData),clearInterval(window.tabDirectionalMonitorTime),localStorage.removeItem("loadVarItemSelected"),0===e?this.crumbs="已连接设备":1===e?this.crumbs="未连接设备":2===e&&(this.crumbs="连接异常设备")},selectGroupName:function(e,t){}}},F={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("Menu"),e._v(" "),s("div",{staticClass:"device-status page-right"},[s("div",{staticClass:"tab-menu",attrs:{onselectstart:"return false;"}},[s("span",{class:0===e.deviceType?"active":"",on:{click:function(t){e.tabDeviceType(0)}}},[e._v("已连接设备("+e._s(e.groupDeviceListLen)+")")]),e._v(" "),s("span",{class:1===e.deviceType?"active":"",on:{click:function(t){e.tabDeviceType(1)}}},[e._v("未连接设备("+e._s(e.unconnectedDeviceLen)+")")]),e._v(" "),s("span",{class:2===e.deviceType?"active":"",on:{click:function(t){e.tabDeviceType(2)}}},[e._v("连接异常设备("+e._s(e.unusualDeviceLen)+")")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.deviceType,expression:"deviceType === 0"}],staticClass:"crumbs"},[s("a",[e._v("当前位置")]),s("a",[e._v(">")]),s("a",{on:{click:e.backToDeviceList}},[e._v("设备列表")]),e._v(" "),""!=e.deviceDetailId?s("a",[s("a",[e._v(">")]),e._v(e._s(e.deviceDetailId)+"详细信息")]):e._e(),e._v(" "),""!=e.deviceMonitorId?s("a",[s("a",[e._v(">")]),e._v(e._s(e.deviceMonitorId)+"：实时监控")]):e._e()]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""===e.deviceDetailId&&""===e.deviceMonitorId||0!==e.deviceType,expression:"(deviceDetailId === '' && deviceMonitorId === '') || deviceType !== 0"}]},[s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.deviceType,expression:"deviceType === 0"}],staticClass:"action-bar"},[s("span",{class:e.actionBarBtnEniabled?"urgent-stop actionBarBtnEniabled":"urgent-stop",on:{click:e.urgentStop}},[e._v("急停")]),e._v(" "),s("span",{class:e.actionBarBtnEniabled?"clear-wrong actionBarBtnEniabled":"clear-wrong",on:{click:e.clearWrong}},[e._v("清错")]),e._v(" "),s("label",{staticClass:"onlyStateAbnormality-label",attrs:{for:"onlyStateAbnormality"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.onlyStateAbnormality,expression:"onlyStateAbnormality"}],attrs:{type:"checkbox",id:"onlyStateAbnormality"},domProps:{checked:Array.isArray(e.onlyStateAbnormality)?e._i(e.onlyStateAbnormality,null)>-1:e.onlyStateAbnormality},on:{change:function(t){var s=e.onlyStateAbnormality,a=t.target,i=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&(e.onlyStateAbnormality=s.concat([null])):o>-1&&(e.onlyStateAbnormality=s.slice(0,o).concat(s.slice(o+1)))}else e.onlyStateAbnormality=i}}}),e._v(" "),s("span",[e._v("仅显示状态异常")])]),e._v(" "),s("label",{staticClass:"search-device-label",attrs:{for:"searchDevice"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchDevice,expression:"searchDevice"}],attrs:{type:"text",name:"",id:"searchDevice",maxlength:"50"},domProps:{value:e.searchDevice},on:{keyup:e.limitInput,input:function(t){t.target.composing||(e.searchDevice=t.target.value)}}})]),e._v(" "),s("label",{staticClass:"show-group-label",attrs:{for:"showGroup"}},[s("span",[e._v("显示分组：")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectGroupName,expression:"selectGroupName"}],attrs:{name:"showGroup",id:"showGroup"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectGroupName=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("所有分组")]),e._v(" "),e._l(e.groupNameListData,function(t){return s("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})],2)]),e._v(" "),s("label",{staticClass:"sort-label",attrs:{for:"sort"}},[s("span",[e._v("排序：")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.sort,expression:"sort"}],attrs:{id:"sort"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.sort=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"shell_time"}},[e._v("连接时长")]),e._v(" "),s("option",{attrs:{value:"robot_id"}},[e._v("设备编号")]),e._v(" "),s("option",{attrs:{value:"robot_host"}},[e._v("IP地址")]),e._v(" "),s("option",{attrs:{value:"state_abnormality"}},[e._v("状态异常")]),e._v(" "),s("option",{attrs:{value:"normal_state"}},[e._v("状态正常")])])])]),e._v(" "),s("GroupDevice",{attrs:{searchDevice:e.searchDevice,sort:e.sort,selectedGroup:e.selectGroupName,deviceType:e.deviceType,onlyStateAbnormality:e.onlyStateAbnormality},on:{selectedGroup:e.getselectedGroup,groupNameList:e.getGroupName,unconnectedDeviceLen:e.getUnconnectedDeviceLen,groupDeviceListLen:e.getGroupDeviceListLen,unusualDeviceLen:e.getUnusualDeviceLen,selectedDeviceList:e.getSelectedDeviceList,deviceDetailId:e.getDeviceDetailId,deviceMonitorId:e.getDeviceMonitorId}})],1),e._v(" "),0===e.deviceType&&""!==e.deviceDetailId?s("DeviceStatusDetail",{attrs:{deviceDetailId:e.deviceDetailId},on:{deviceMonitorId:e.getDeviceMonitorId}}):e._e(),e._v(" "),0===e.deviceType&&""!==e.deviceMonitorId?s("RealtimeMonitor",{attrs:{deviceMonitorId:e.deviceMonitorId},on:{deviceMonitorId:e.getDeviceMonitorId}}):e._e()],1)],1)},staticRenderFns:[]};var O=s("VU/8")(M,F,!1,function(e){s("it27")},null,null).exports,B=s("lo6S"),G={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"software-version-manage"},[s("span",{staticClass:"upload-new-version",on:{click:e.uploadSoftwareVersion}},[e._v("上传新版本")]),e._v(" "),s("label",{staticClass:"search-software-version-label",attrs:{for:"searchSoftwareVersion"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchSoftwareVersion,expression:"searchSoftwareVersion"}],attrs:{type:"text",name:"",id:"searchSoftwareVersion",maxlength:"50"},domProps:{value:e.searchSoftwareVersion},on:{keyup:e.limitInput,input:function(t){t.target.composing||(e.searchSoftwareVersion=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"software-version-info"},[s("div",{staticClass:"title"},[s("span",[e._v("软件版本")]),e._v("("),s("span",{staticClass:"version-count"},[e._v(e._s(e.searchSoftwareFilter().length))]),e._v(")")]),e._v(" "),s("div",{staticClass:"version-list"},e._l(e.searchSoftwareFilter(),function(t,a){return s("div",{key:t.id,staticClass:"version"},[s("div",{staticClass:"version-num-title"},[s("span",{staticClass:"version-text-box"},[s("span",{staticClass:"version-text"},[e._v("版本号：")]),e._v(" "),s("span",{staticClass:"version-num"},[e._v(e._s(t.version))])]),e._v(" "),"root"!==t.user_name||"root"===e.userName?s("span",{staticClass:"operation-btn"},[s("span",{staticClass:"delete",on:{click:function(s){e.deleteSoftware(t.id,t.package_name)}}},[s("img",{attrs:{src:"static/images/commonly/delete.png"}})]),e._v(" "),s("span",{staticClass:"edit",on:{click:function(s){e.editSoftware(a,t.package_name)}}},[s("img",{attrs:{src:"static/images/commonly/edit.png"}})]),e._v(" "),s("span",{staticClass:"download",on:{click:function(s){e.downloadSoftware(t.package_name)}}},[s("img",{attrs:{src:"static/images/commonly/download.png"}})])]):e._e()]),e._v(" "),s("p",[e._v("文件名："),s("span",{staticClass:"version-file-name"},[e._v(e._s(t.package_name))])]),e._v(" "),s("p",[e._v("上传时间："),s("span",{staticClass:"version-upload-time"},[e._v(e._s(t.time))])]),e._v(" "),s("p",[e._v("上传者："),s("span",{staticClass:"version-upload-user"},[e._v(e._s(t.user_name))])]),e._v(" "),s("p",[e._v("备注："),s("span",{staticClass:"version-remark"},[e._v(e._s(t.remarks))])])])}))])])},staticRenderFns:[]};var R=function(e){s("1YA9")},V=s("VU/8")(B.a,G,!1,R,null,null).exports,j={name:"LogTemplateManage",data:function(){return{logTemplateList:[],searchLogTemplate:""}},created:function(){this.getLogTemplateList()},beforeDestroy:function(){},mounted:function(){},methods:{detailTemplate:function(e){var t='<h3 id="tempName">模板名称：'+e.name+'</h3><div id="logType"><p class="custom">日志类型：'+e.temps_types+'</p><p class="others">其他资源：'+e.others+'</p></div><p id="createTime">创建时间：'+e.time+"</p>",s=this;s.$layer.open({type:1,area:["380px","480px"],title:"模板详情",shade:.3,shadeClose:!1,id:"detailTemplate",maxmin:!1,anim:4,content:t,btn:["关闭"],yes:function(e){s.$layer.close(e)},end:function(){},success:function(){}})},deleteLogTemplate:function(e){var t=this;t.$layer.confirm("确认删除该模板？",{title:"确认"},function(){var s=l()({event:"event_bk_temps_remove",temps_id:e});t.$api.post("/",s,function(e){console.log(e),0===e.code?(t.getLogTemplateList(),t.$layer.msg("删除日志模板成功！")):t.$layer.msg("删除日志模板失败！")})})},getLogTemplateList:function(){var e=this,t=l()({event:"event_bk_temps",login_token:localStorage.getItem("login_token")});this.$api.post("/",t,function(t){console.log(t),0===t.code?e.logTemplateList=t.data.temps:e.$layer.msg("日志模板列表获取失败！")})},searchLogTemplateFilter:function(){var e=this;return""!==e.searchLogTemplate?e.logTemplateList.filter(function(t){var s=e.searchLogTemplate.replace(/^\s+|\s+$/g,""),a=("模板名称："+t.name).toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),i=("日志类型："+t.temps_types).toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),o=("其他资源："+t.others).toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),r=("创建时间："+t.time).indexOf(s);return(-1!==a||-1!==i||-1!==o||-1!==r)&&t}):e.logTemplateList},limitInput:function(){-1!==this.searchLogTemplate.indexOf(" ")&&(this.searchLogTemplate=this.searchLogTemplate.replace(/\s/g,""),this.$layer.msg("不允许输入空格！")),this.searchLogTemplate.length>=50&&this.$layer.msg("只允许输入50个字符！")}},watch:{}},H={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"log-template"},[s("label",{staticClass:"search-log-template-label",attrs:{for:"searchLogTemplate"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchLogTemplate,expression:"searchLogTemplate"}],attrs:{type:"text",name:"",id:"searchLogTemplate",maxlength:"50"},domProps:{value:e.searchLogTemplate},on:{keyup:e.limitInput,input:function(t){t.target.composing||(e.searchLogTemplate=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"log-template-info"},[s("div",{staticClass:"title"},[s("span",[e._v("日志模板")]),e._v("("),s("span",{staticClass:"template-count"},[e._v(e._s(e.searchLogTemplateFilter().length))]),e._v(")")]),e._v(" "),s("div",{staticClass:"log-template-list"},e._l(e.searchLogTemplateFilter(),function(t){return s("div",{key:t.id,staticClass:"template"},[s("div",{staticClass:"template-num-title"},[s("span",{staticClass:"template-text"},[e._v("模板名称："+e._s(t.name))]),e._v(" "),s("span",[s("span",{staticClass:"delete",on:{click:function(s){e.deleteLogTemplate(t.id)}}},[s("img",{attrs:{src:"static/images/commonly/delete.png"}})]),e._v(" "),s("span",{staticClass:"detail-emplate",on:{click:function(s){e.detailTemplate(t)}}},[s("img",{attrs:{src:"static/images/manage-center/log-template-manage/log-template-detail.png"}})])])]),e._v(" "),s("p",[e._v("日志类型："),s("span",{staticClass:"template-name"},[e._v(e._s(t.temps_types))])]),e._v(" "),s("p",[e._v("其他资源："),s("span",{staticClass:"template-size"},[e._v(e._s(t.others))])]),e._v(" "),s("p",[e._v("创建时间："),s("span",{staticClass:"version-remark"},[e._v(e._s(t.time))])])])}))])])},staticRenderFns:[]};var Y=s("VU/8")(j,H,!1,function(e){s("z6SM")},null,null).exports,z={name:"ManageCenter",components:{SoftwareVersionManage:V,LogTemplateManage:Y,Menu:h.a},data:function(){return{tabMenuSwitchIndex:0}},methods:{tabMenuSwitch:function(e){this.tabMenuSwitchIndex=e}},watch:{}},q={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("Menu"),e._v(" "),s("div",{staticClass:"manage-center page-right"},[s("div",{staticClass:"tab-menu",attrs:{onselectstart:"return false;"}},[s("a",{class:0===e.tabMenuSwitchIndex?"active":"",on:{click:function(t){e.tabMenuSwitch(0)}}},[e._v("软件版本管理")]),e._v(" "),s("a",{class:1===e.tabMenuSwitchIndex?"active":"",on:{click:function(t){e.tabMenuSwitch(1)}}},[e._v("固件版本管理")]),e._v(" "),s("a",{class:2===e.tabMenuSwitchIndex?"active":"",on:{click:function(t){e.tabMenuSwitch(2)}}},[e._v("日志模板管理")])]),e._v(" "),0===e.tabMenuSwitchIndex?s("SoftwareVersionManage"):e._e(),e._v(" "),2===e.tabMenuSwitchIndex?s("LogTemplateManage"):e._e()],1)],1)},staticRenderFns:[]};var Q=s("VU/8")(z,q,!1,function(e){s("KVpB")},null,null).exports,J={name:"LogFile",data:function(){return{logFileList:[],searchLogFile:""}},created:function(){this.getLogFileList()},beforeDestroy:function(){},mounted:function(){},methods:{downloadLogFile:function(e){var t=this,s=l()({event:"event_exist_files",login_token:localStorage.getItem("login_token"),file_type:2,file_name:e});t.$api.post("/",s,function(s){if(0!==s.code)t.$layer.msg(s.msg),t.getLogFileList();else{var a=localStorage.getItem("login_token");window.location.href=sessionStorage.getItem("upDowndApiAddr")+"/download/login_token="+a+",type=2/"+e.replace(/#/g,"%23")}})},deleteLogFile:function(e){var t=this,s=l()({event:"event_exist_files",login_token:localStorage.getItem("login_token"),file_type:2,file_name:e});t.$api.post("/",s,function(s){0!==s.code?(t.$layer.msg(s.msg),t.getLogFileList()):t.$layer.confirm("确认删除该文件？",{title:"确认"},function(){var s=l()({event:"delete_log",login_token:localStorage.getItem("login_token"),log_name:e});t.$api.post("/",s,function(e){console.log(e),0===e.code?(t.getLogFileList(),t.$layer.msg("日志文件删除成功！")):t.$layer.msg("日志文件删除失败！")})})})},getLogFileList:function(){var e=this,t=l()({event:"get_log_list",login_token:localStorage.getItem("login_token")});this.$api.post("/",t,function(t){console.log(t),0===t.code?e.logFileList=t.log_list.sort(function(e,t){return e.time>t.time?-1:1}):e.$layer.msg("日志文件列表获取失败！")})},searchLogFileFilter:function(){var e=this;return""!==e.searchLogFile?e.logFileList.filter(function(t){var s=e.searchLogFile.replace(/^\s+|\s+$/g,""),a=("文件名："+t.path).toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),i=("文件大小："+(t.size/1024/1024).toFixed(3)+"MB").toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),o=("备份时间："+t.time).indexOf(s);return(-1!==a||-1!==i||-1!==o)&&t}):e.logFileList},limitInput:function(){-1!==this.searchLogFile.indexOf(" ")&&(this.searchLogFile=this.searchLogFile.replace(/\s/g,""),this.$layer.msg("不允许输入空格！")),this.searchLogFile.length>=50&&this.$layer.msg("只允许输入50个字符！")}},watch:{}},W={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"log-file"},[s("label",{staticClass:"search-log-file-label",attrs:{for:"searchLogFile"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchLogFile,expression:"searchLogFile"}],attrs:{type:"text",name:"",id:"searchLogFile",maxlength:"50"},domProps:{value:e.searchLogFile},on:{keyup:e.limitInput,input:function(t){t.target.composing||(e.searchLogFile=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"log-file-info"},[s("div",{staticClass:"title"},[s("span",[e._v("备份文件")]),e._v("("),s("span",{staticClass:"file-count"},[e._v(e._s(e.searchLogFileFilter().length))]),e._v(")")]),e._v(" "),s("div",{staticClass:"log-file-list"},e._l(e.searchLogFileFilter(),function(t){return s("div",{key:t.id,staticClass:"file"},[s("div",{staticClass:"file-num-title"},[s("span",{staticClass:"file-text"},[e._v("文件名："+e._s(t.path))]),e._v(" "),s("span",{staticClass:"operation-btn"},[s("span",{staticClass:"delete",on:{click:function(s){e.deleteLogFile(t.path)}}},[s("img",{attrs:{src:"static/images/commonly/delete.png"}})]),e._v(" "),s("span",{staticClass:"download",on:{click:function(s){e.downloadLogFile(t.path)}}},[s("img",{attrs:{src:"static/images/commonly/download.png"}})])])]),e._v(" "),s("p",[e._v("文件名："),s("span",{staticClass:"file-name"},[e._v(e._s(t.path))])]),e._v(" "),s("p",[e._v("文件大小："),s("span",{staticClass:"file-size"},[e._v(e._s((t.size/1024/1024).toFixed(3))+"MB")])]),e._v(" "),s("p",[e._v("备份时间："),s("span",{staticClass:"version-remark"},[e._v(e._s(t.time))])])])})),e._v(" "),s("div",{staticClass:"tip"},[e._v("备注：日志文件超过15天，将自动删除！")])])])},staticRenderFns:[]};var X=s("VU/8")(J,W,!1,function(e){s("0C46")},null,null).exports,K={name:"ManageCenter",components:{LogFile:X,Menu:h.a},data:function(){return{tabMenuSwitchIndex:"1"}},created:function(){null!==sessionStorage.getItem("downloadCenterTab")&&(this.tabMenuSwitchIndex=sessionStorage.getItem("downloadCenterTab"),sessionStorage.removeItem("downloadCenterTab"))},methods:{tabMenuSwitch:function(e){this.tabMenuSwitchIndex=e}},watch:{}},Z={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("Menu"),e._v(" "),s("div",{staticClass:"download-center page-right"},[s("div",{staticClass:"tab-menu",attrs:{onselectstart:"return false;"}},[s("a",{class:"0"===e.tabMenuSwitchIndex?"active":"",on:{click:function(t){e.tabMenuSwitch("0")}}},[e._v("配置文件")]),e._v(" "),s("a",{class:"1"===e.tabMenuSwitchIndex?"active":"",on:{click:function(t){e.tabMenuSwitch("1")}}},[e._v("日志文件")])]),e._v(" "),"1"===e.tabMenuSwitchIndex?s("LogFile"):e._e()],1)],1)},staticRenderFns:[]};var ee=s("VU/8")(K,Z,!1,function(e){s("R3Wd")},null,null).exports,te=s("sI/C"),se={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("Menu"),e._v(" "),s("div",{staticClass:"software-upgrade page-right"},[s("div",{staticClass:"action-bar"},[s("span",{class:e.selectedDeviceList.length>0?"one-key-update actionBarBtnEniabled":"one-key-update",on:{click:function(t){e.oneKeyUpdate(e.selectedDeviceList)}}},[e._v("一键更新")]),e._v(" "),s("label",{staticClass:"search-device-label",attrs:{for:"searchDevice"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchDevice,expression:"searchDevice"}],attrs:{type:"text",name:"",id:"searchDevice",maxlength:"50"},domProps:{value:e.searchDevice},on:{keyup:e.limitInput,input:function(t){t.target.composing||(e.searchDevice=t.target.value)}}})]),e._v(" "),s("label",{staticClass:"show-group-label",attrs:{for:"showGroup"}},[s("span",[e._v("显示分组：")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectGroupName,expression:"selectGroupName"}],attrs:{name:"showGroup",id:"showGroup"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectGroupName=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("所有分组")]),e._v(" "),e._l(e.groupNameListData,function(t){return s("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})],2)]),e._v(" "),s("label",{staticClass:"version-label",attrs:{for:"version"}},[s("span",[e._v("软件版本：")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.version,expression:"version"}],attrs:{id:"version"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.version=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("所有版本")]),e._v(" "),e._l(e.versionList,function(t,a){return s("option",{key:a,domProps:{value:t}},[e._v("V"+e._s(t))])})],2)])]),e._v(" "),s("DeviceListCommon",{attrs:{selectedGroup:e.selectGroupName,versionNum:e.version,searchDevice:e.searchDevice,pageName:"softwareupgrade",clearChecked:e.clearChecked},on:{selectedGroup:e.getselectedGroup,groupNameList:e.getGroupName,getOnlineDeviceInfo:e.getOnlineDeviceInfo,onlineRobotList:e.onlineRobotList,selectedDeviceList:e.getSelectedDeviceList,actionBarImplement:e.actionBarImplement}})],1)],1)},staticRenderFns:[]};var ae=function(e){s("bElu")},ie=s("VU/8")(te.a,se,!1,ae,null,null).exports,oe=s("P1tU"),re={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("Menu"),e._v(" "),s("div",{staticClass:"backup-log-file page-right"},[s("div",{staticClass:"crumbs"},[s("a",[e._v("当前位置")]),s("a",[e._v(">")]),s("a",{on:{click:e.backToDeviceList}},[e._v("设备列表")]),e._v(" "),e.isShowDeviceListBlock?e._e():s("a",[s("a",[e._v(">")]),e._v("备份日志文件")])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDeviceListBlock,expression:"isShowDeviceListBlock"}],staticClass:"device-list-block"},[s("div",{staticClass:"action-bar"},[s("span",{class:e.selectedDeviceList.length>0?"backup-log-btn actionBarBtnEniabled":"backup-log-btn",on:{click:function(t){e.BackupLogFile(e.selectedDeviceList)}}},[e._v("备份日志文件")]),e._v(" "),s("label",{staticClass:"search-device-label",attrs:{for:"searchDevice"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchDevice,expression:"searchDevice"}],attrs:{type:"text",name:"",id:"searchDevice",maxlength:"50"},domProps:{value:e.searchDevice},on:{keyup:e.limitInput,input:function(t){t.target.composing||(e.searchDevice=t.target.value)}}})]),e._v(" "),s("label",{staticClass:"show-group-label",attrs:{for:"showGroup"}},[s("span",[e._v("显示分组：")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectGroupName,expression:"selectGroupName"}],attrs:{name:"showGroup",id:"showGroup"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectGroupName=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("所有分组")]),e._v(" "),e._l(e.groupNameListData,function(t){return s("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])})],2)])]),e._v(" "),s("DeviceListCommon",{attrs:{selectedGroup:e.selectGroupName,searchDevice:e.searchDevice,pageName:"BackupLogFile",clearChecked:e.clearChecked},on:{selectedGroup:e.getselectedGroup,groupNameList:e.getGroupName,selectedDeviceList:e.getSelectedDeviceList,actionBarImplement:e.actionBarImplement}})],1),e._v(" "),e.isShowDeviceListBlock?e._e():s("div",{staticClass:"backup-log-file-block"},[s("div",{staticClass:"selected-device-list"},[s("div",{staticClass:"title"},[e._v("已选择设备")]),e._v(" "),s("div",{staticClass:"list"},[e._v("\n          "+e._s(e.selectedDeviceList.toString())+"\n        ")])]),e._v(" "),s("div",{staticClass:"log-type"},[s("div",{staticClass:"log-type-title"},[e._v("日志类型")]),e._v(" "),s("div",{staticClass:"custom"},[s("div",{class:["custom-title","custom"===e.logTypePartition?"custom-title-active":""],on:{click:function(t){e.logTypePartitionChange("custom")}}},[s("span",{staticClass:"name"},[e._v("自定义")]),e._v(" "),s("img",{staticClass:"arrow",attrs:{src:"custom"===e.logTypePartition?"static/images/commonly/packet-expansion.png":"static/images/commonly/packet-folding.png"}})]),e._v(" "),"custom"===e.logTypePartition?s("div",{staticClass:"custom-expansion"},[s("div",{staticClass:"action-bar"},[s("label",{staticClass:"label-selectlogtype"},[s("input",{attrs:{type:"checkbox",name:"selectlogtype",id:"selectlogtype"},domProps:{checked:e.isAllLogTypeSelect},on:{click:e.selectAllLogType}}),e._v(" "),s("span",[e._v("全选")]),e._v(" "),0!==e.selectlogtype.length?s("span",[e._v("   已勾选日志类型：  "+e._s(e.selectlogtype.length))]):e._e()]),e._v(" "),s("img",{staticClass:"create-template",attrs:{src:"static/images/backup-log-file/create-template.png",title:"创建模板"},on:{click:e.createTemplate}}),e._v(" "),s("label",{staticClass:"search-log-type-label",attrs:{for:"searchLogType"}},[s("img",{attrs:{src:"static/images/commonly/search.png"}}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchLogType,expression:"searchLogType"}],attrs:{type:"text",name:"",id:"searchLogType"},domProps:{value:e.searchLogType},on:{input:function(t){t.target.composing||(e.searchLogType=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"log-type-list"},e._l(e.selectlogtypeFilter(),function(t){return s("label",{key:t,staticClass:"item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectlogtype,expression:"selectlogtype"}],staticClass:"log-type-item",attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.selectlogtype)?e._i(e.selectlogtype,t)>-1:e.selectlogtype},on:{change:function(s){var a=e.selectlogtype,i=s.target,o=!!i.checked;if(Array.isArray(a)){var r=t,n=e._i(a,r);i.checked?n<0&&(e.selectlogtype=a.concat([r])):n>-1&&(e.selectlogtype=a.slice(0,n).concat(a.slice(n+1)))}else e.selectlogtype=o}}}),e._v(" "),s("span",{staticClass:"log-type-name"},[e._v(e._s(t))])])})),e._v(" "),s("div",[s("label",{staticClass:"localization-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.others,expression:"others"}],staticClass:"localization-input",attrs:{type:"checkbox",value:"localization"},domProps:{checked:Array.isArray(e.others)?e._i(e.others,"localization")>-1:e.others},on:{change:function(t){var s=e.others,a=t.target,i=!!a.checked;if(Array.isArray(s)){var o="localization",r=e._i(s,o);a.checked?r<0&&(e.others=s.concat([o])):r>-1&&(e.others=s.slice(0,r).concat(s.slice(r+1)))}else e.others=i}}}),e._v(" "),s("span",{staticClass:"localization"},[e._v("localization")])]),e._v(" "),s("label",{staticClass:"deviation-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.others,expression:"others"}],staticClass:"deviation-input",attrs:{type:"checkbox",value:"deviation"},domProps:{checked:Array.isArray(e.others)?e._i(e.others,"deviation")>-1:e.others},on:{change:function(t){var s=e.others,a=t.target,i=!!a.checked;if(Array.isArray(s)){var o=e._i(s,"deviation");a.checked?o<0&&(e.others=s.concat(["deviation"])):o>-1&&(e.others=s.slice(0,o).concat(s.slice(o+1)))}else e.others=i}}}),e._v(" "),s("span",{staticClass:"deviation"},[e._v("deviation")])]),e._v(" "),s("label",{staticClass:"system-log-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.others,expression:"others"}],staticClass:"system-log-input",attrs:{type:"checkbox",value:"system_log"},domProps:{checked:Array.isArray(e.others)?e._i(e.others,"system_log")>-1:e.others},on:{change:function(t){var s=e.others,a=t.target,i=!!a.checked;if(Array.isArray(s)){var o="system_log",r=e._i(s,o);a.checked?r<0&&(e.others=s.concat([o])):r>-1&&(e.others=s.slice(0,r).concat(s.slice(r+1)))}else e.others=i}}}),e._v(" "),s("span",{staticClass:"system-log"},[e._v("system_log")])])])]):e._e()]),e._v(" "),s("div",{staticClass:"template"},[s("div",{class:["template-title","template"===e.logTypePartition?"template-title-active":""],on:{click:function(t){e.logTypePartitionChange("template")}}},[s("span",{staticClass:"name"},[e._v("模板")]),e._v(" "),s("img",{staticClass:"arrow",attrs:{src:"template"===e.logTypePartition?"static/images/commonly/packet-expansion.png":"static/images/commonly/packet-folding.png"}})]),e._v(" "),"template"===e.logTypePartition?s("div",{staticClass:"template-expansion"},[s("div",{staticClass:"template-list"},e._l(e.templateList,function(t){return s("div",{key:t.id,staticClass:"template-item"},[s("div",{staticClass:"title"},[s("span",{staticClass:"template-name"},[e._v("模板名称："+e._s(t.name))]),e._v(" "),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.templateSelected,expression:"templateSelected"}],attrs:{type:"radio",name:"template"},domProps:{value:t,checked:e._q(e.templateSelected,t)},on:{change:function(s){e.templateSelected=t}}}),e._v(" "),s("span",[e._v("选择该模板")])])]),e._v(" "),s("p",[s("span",[e._v("日志类型：")]),s("span",{attrs:{title:t.temps_types}},[e._v(e._s(t.temps_types))])]),e._v(" "),s("p",[s("span",[e._v("其他资源：")]),s("span",{attrs:{title:t.others}},[e._v(e._s(t.others))])]),e._v(" "),s("p",[s("span",[e._v("创建时间：")]),s("span",[e._v(e._s(e.getDetailTime(t.time)))])])])}))]):e._e()])]),e._v(" "),s("div",{staticClass:"time-select"},[s("div",{staticClass:"time-select-title"},[e._v("时间选择")]),e._v(" "),s("div",{staticClass:"time-type"},[s("label",{staticClass:"time-type-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedtimeType,expression:"selectedtimeType"}],attrs:{type:"radio",name:"time-select",id:"yesterday",value:"0"},domProps:{checked:e._q(e.selectedtimeType,"0")},on:{change:function(t){e.selectedtimeType="0"}}}),e._v(" "),s("span",[e._v("昨天")])]),e._v(" "),s("label",{staticClass:"time-type-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedtimeType,expression:"selectedtimeType"}],attrs:{type:"radio",name:"time-select",id:"today",value:"1"},domProps:{checked:e._q(e.selectedtimeType,"1")},on:{change:function(t){e.selectedtimeType="1"}}}),e._v(" "),s("span",[e._v("今天")])]),e._v(" "),s("label",{staticClass:"time-type-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedtimeType,expression:"selectedtimeType"}],attrs:{type:"radio",name:"time-select",id:"alldate",value:"2"},domProps:{checked:e._q(e.selectedtimeType,"2")},on:{change:function(t){e.selectedtimeType="2"}}}),e._v(" "),s("span",[e._v("所有时间段")])]),e._v(" "),s("label",{staticClass:"time-type-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedtimeType,expression:"selectedtimeType"}],attrs:{type:"radio",name:"time-select",id:"lastTwoHours",value:"3"},domProps:{checked:e._q(e.selectedtimeType,"3")},on:{change:function(t){e.selectedtimeType="3"}}}),e._v(" "),s("span",[e._v("最近两小时")])]),e._v(" "),s("label",{staticClass:"time-type-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedtimeType,expression:"selectedtimeType"}],attrs:{type:"radio",name:"time-select",id:"specifiedTimeperiod",value:"4"},domProps:{checked:e._q(e.selectedtimeType,"4")},on:{change:function(t){e.selectedtimeType="4"}}}),e._v(" "),s("span",[e._v("指定时间段")])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"4"===e.selectedtimeType,expression:"selectedtimeType === '4'"}],staticClass:"specified-time-period"},[s("label",{staticClass:"start-time"},[s("span",[e._v("起始时间：")]),e._v(" "),s("vue-datepicker-local",{attrs:{format:"YYYY-MM-DD HH:mm:ss","show-buttons":""},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),e._v(" "),s("label",{staticClass:"end-time"},[s("span",[e._v("结束时间：")]),e._v(" "),s("vue-datepicker-local",{attrs:{format:"YYYY-MM-DD HH:mm:ss","show-buttons":"",disabled:e.isSelectLastTime},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),e._v(" "),s("label",{staticClass:"last-time"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.isSelectLastTime,expression:"isSelectLastTime"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.isSelectLastTime)?e._i(e.isSelectLastTime,null)>-1:e.isSelectLastTime},on:{change:function(t){var s=e.isSelectLastTime,a=t.target,i=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&(e.isSelectLastTime=s.concat([null])):o>-1&&(e.isSelectLastTime=s.slice(0,o).concat(s.slice(o+1)))}else e.isSelectLastTime=i}}}),e._v(" "),s("span",[e._v("最新时间")])])])]),e._v(" "),s("div",{staticClass:"backup-log-file-btn",on:{click:e.startBackup}},[e._v("备份日志文件")])])])],1)},staticRenderFns:[]};var ne=function(e){s("/hZm")},ce=s("VU/8")(oe.a,re,!1,ne,null,null).exports,le={name:"RootUserSoftwareManage",components:{SoftwareVersionManage:V,Menu:h.a},data:function(){return{}}},ue={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"page"},[t("Menu"),this._v(" "),t("SoftwareVersionManage",{staticClass:"RootUserSoftwareManage page-right"})],1)},staticRenderFns:[]};var pe=s("VU/8")(le,ue,!1,function(e){s("Xmbd")},null,null).exports,de={name:"EditUser",data:function(){return{userList:[],userNameList:[],newUserName:"",newUserPass:"123456",userRights:"",targetidParm:"",usernameParm:"",permissionParm:""}},created:function(){if(window.onpopstate=function(){parent.layer.close(parent.layer.index)},null!==sessionStorage.getItem("editUserParm")){var e=JSON.parse(sessionStorage.getItem("editUserParm"));this.targetidParm=e.target_id,this.usernameParm=e.username,this.permissionParm=e.permission,this.newUserName=e.username,this.userRights=e.permission}null!==sessionStorage.getItem("addUserParm")&&(this.userNameList=JSON.parse(sessionStorage.getItem("addUserParm")),sessionStorage.removeItem("addUserParm"))},methods:{yes:function(){var e=this;if(""===e.newUserName)return parent.layer.msg("用户名不准为空！",{time:800}),e.$refs.userNameFocus.focus(),!1;if(e.newUserName.length>20)return parent.layer.msg("用户名不允许超过20个字符！",{time:800}),!1;if(e.newUserName.length<4)return parent.layer.msg("用户名不允许少于4个字符！",{time:800}),!1;if(e.newUserName.match(/[^A-Za-z0-9\u4e00-\u9fa5_]/g))parent.layer.msg("用户名不支持特殊符号！");else if(-1!==e.userNameList.indexOf(e.newUserName)||"root"===e.newUserName)parent.layer.msg("该用户名已存在！",{time:800});else{if(""===e.userRights)return parent.layer.msg("请选择用户权限！",{time:800}),!1;if(""===e.targetidParm){var t=l()({event:"event_register_user",login_token:localStorage.getItem("login_token"),user_name:e.newUserName,password:e.$md5(e.newUserPass),permission:e.userRights});e.$api.post("/",t,function(t){0===t.code?(parent.layer.close(window.parent.layer.getFrameIndex("EditUser")),parent.layer.msg("新用户已添加！",{time:800})):100===t.code?e.layer.msg("该用户名已存在！"):104===t.code||106===t.code?(localStorage.setItem("tokenInvalid",!0),window.location.href="/"):105===t.code?e.layer.msg("该用户名权限不足！"):e.layer.msg("添加新用户失败！",{time:800})})}else{var s=l()({event:"event_alter_permission",login_token:localStorage.getItem("login_token"),target_id:parseInt(e.targetidParm),permission:e.userRights});e.$api.post("/",s,function(e){0===e.code?(parent.layer.close(window.parent.layer.getFrameIndex("EditUser")),parent.layer.msg("用户信息更改成功！",{time:800})):105===e.code?parent.layer.msg("该用户名权限不足！"):104===e.code||106===e.code?(localStorage.setItem("tokenInvalid",!0),window.location.href="/"):parent.layer.msg("用户信息更改失败！",{time:800})})}}},cancel:function(){parent.layer.close(window.parent.layer.getFrameIndex("EditUser"))}},watch:{newUserName:function(e,t){""!==this.newUserName&&(-1!==this.newUserName.indexOf(" ")?(parent.layer.msg("不允许输入空格！",{time:800}),this.newUserName=t):this.newUserName.match(/[^A-Za-z0-9\u4e00-\u9fa5_]/g)&&(parent.layer.msg("用户名不支持特殊符号！",{time:800}),this.newUserName=t))}}},he={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editUser"},[s("div",{staticClass:"dialogUserName"},[s("span",[e._v("用  户  名：")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUserName,expression:"newUserName"}],ref:"userNameFocus",class:""===e.targetidParm?"name":"name disabled",attrs:{type:"text",disabled:""!==e.targetidParm,autofocus:"autofocus"},domProps:{value:e.newUserName},on:{input:function(t){t.target.composing||(e.newUserName=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"dialogUserPassword"},[s("span",[e._v("初始密码：")]),e._v(" "),s("span",{staticClass:"initial-cipher"},[e._v(e._s(""===e.targetidParm?e.newUserPass:"******"))])]),e._v(" "),s("div",{staticClass:"user-rights"},[s("span",[e._v("用户权限：")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.userRights,expression:"userRights"}],staticClass:"user-rights-select",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.userRights=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}},[e._v("请选择用户权限")]),e._v(" "),s("option",{attrs:{value:"r"}},[e._v("只读")]),e._v(" "),s("option",{attrs:{value:"wr"}},[e._v("可读可写")])])]),e._v(" "),s("div",{staticClass:"bar-btn"},[s("span",{staticClass:"yes",on:{click:e.yes}},[e._v("确认")]),e._v(" "),s("span",{staticClass:"cancel",on:{click:e.cancel}},[e._v("取消")])])])},staticRenderFns:[]};var me=s("VU/8")(de,he,!1,function(e){s("Asdq")},null,null).exports,ge=s("gRE1"),fe=s.n(ge),ve=s("fZjL"),ye=s.n(ve),_e={name:"ComprehensiveMonitorSelect",data:function(){return{isAllSelected:!1,loadVarItemSelected:[],loadVarlistData:[],robotid:""}},created:function(){window.onpopstate=function(){parent.layer.close(parent.layer.index)},this.$route.query.robotid&&(this.robotid=this.$route.query.robotid,this.getComprehensiveData())},methods:{singleSelectVarItem:function(e){e.target.checked||(this.allSelectVarList=!1)},allSelectVarList:function(e){var t=this;this.loadVarItemSelected=[],e.target.checked?(this.isAllSelected=!0,this.loadVarlistData.forEach(function(e){t.loadVarItemSelected.push(e)})):this.isAllSelected=!1},getComprehensiveData:function(){var e=this,t={event:"load_varlist",robot_id:this.robotid.toString()};this.$api.post("/",t,function(t){var s=[];t.data.forEach(function(e){var t=ye()(e)[0],a=fe()(e)[0],i={expend:!1,id:t,name:fe()(a)[0],type:ye()(a)[0]};s.push(i)}),e.loadVarlistData=s,null!==localStorage.getItem("loadVarItemSelected")&&(e.loadVarItemSelected=JSON.parse(localStorage.getItem("loadVarItemSelected")),e.loadVarlistData.length===e.loadVarItemSelected.length?e.isAllSelected=!0:e.isAllSelected=!1)})},yes:function(){parent.layer.close(window.parent.layer.getFrameIndex("ComprehensiveMonitor"))},cancel:function(){localStorage.removeItem("loadVarItemSelected"),parent.layer.close(window.parent.layer.getFrameIndex("ComprehensiveMonitor"))}},watch:{loadVarItemSelected:function(e,t){this.loadVarlistData.length===e.length?this.isAllSelected=!0:this.isAllSelected=!1,localStorage.setItem("loadVarItemSelected",l()(e))}}},we={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"comprehensive-monitor-select"},[s("div",{staticClass:"monitor-list-data"},[s("div",{staticClass:"thead-title"},[s("span",[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.isAllSelected},on:{click:e.allSelectVarList}})]),s("span",[e._v("参数名称")]),s("span",[e._v("值")])]),e._v(" "),s("div",{ref:"scrollTop",staticClass:"table-scroll"},[s("div",{staticClass:"loadVarlist"},e._l(e.loadVarlistData,function(t){return s("div",{key:t.id,staticClass:"loadVarItem"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.loadVarItemSelected,expression:"loadVarItemSelected"}],attrs:{type:"checkbox"},domProps:{value:t,checked:Array.isArray(e.loadVarItemSelected)?e._i(e.loadVarItemSelected,t)>-1:e.loadVarItemSelected},on:{change:function(s){var a=e.loadVarItemSelected,i=s.target,o=!!i.checked;if(Array.isArray(a)){var r=t,n=e._i(a,r);i.checked?n<0&&(e.loadVarItemSelected=a.concat([r])):n>-1&&(e.loadVarItemSelected=a.slice(0,n).concat(a.slice(n+1)))}else e.loadVarItemSelected=o}}})]),e._v(" "),s("span",[e._v(e._s(t.id)+":"+e._s(t.name))]),e._v(" "),s("span",[e._v("    ")])])}))])]),e._v(" "),s("div",{staticClass:"bar-btn"},[s("span",{staticClass:"yes",on:{click:e.yes}},[e._v("确认")]),e._v(" "),s("span",{staticClass:"cancel",on:{click:e.cancel}},[e._v("取消")])])])},staticRenderFns:[]};var be=s("VU/8")(_e,we,!1,function(e){s("4jW2")},null,null).exports,ke={name:"uploadSoftwareVersion",data:function(){return{softwareList:[],isExistExtendName:!1,isExistFile:!1,uploadStatusId:1,useridParm:"",softwareFile:"",filePath:"",fileName:"",fileVersion:"",fileRemark:"",xhr:"",uploadStatus:[],oldTime:0,oldLoaded:0,oldSpeed:0}},created:function(){window.onpopstate=function(){parent.layer.close(parent.layer.index)},this.getSoftwareList(),this.uploadStatusId=(new Date).getTime()},methods:{getSoftwareList:function(){var e=this,t=l()({event:"event_packages",login_token:localStorage.getItem("login_token")});this.$api.post("/",t,function(t){0===t.code?e.softwareList=t.data.users:e.$layer.msg("软件包列表获取失败！")})},getUploadfile:function(e){var t=this;if(t.file=t.$refs.uploadfile.files[0],!t.file)return!1;if(".tar"!==t.file.name.substring(t.file.name.lastIndexOf(".")))return t.$layer.msg("请选择一个.tar文件！"),!1;if(t.file.name.match(/[^A-Za-z0-9_.]/g))return t.$layer.msg("文件名只允许包含数字字母下划线小数点！",{time:2e3}),!1;if(t.file.size>1073741824)return t.$layer.msg("文件不能大于1G，请重新选择！"),!1;t.fileName=t.file.name,t.filePath=t.$refs.uploadfile.value;var s=t.fileName.substr(0,t.fileName.lastIndexOf(".")),a=s;for(var i in t.fileVersion="",a.replace(/\d+/,function(){var e=s.substr(arguments[1]);return t.fileVersion="V"+e,arguments[0]}),t.isExistFile=!1,t.isExistExtendName=!1,t.softwareList)if(t.fileName===t.softwareList[i].package_name&&localStorage.getItem("username")===t.softwareList[i].user_name&&(t.isExistFile=!0),t.fileVersion===t.softwareList[i].version&&localStorage.getItem("username")===t.softwareList[i].user_name&&(t.isExistExtendName=!0),t.isExistFile&&t.isExistExtendName)break},yes:function(){var e=this;if("true"===sessionStorage.getItem("isUploading"))return e.$layer.msg("列表中有未上传完成的文件，请稍后再上传新版本！"),!1;if(""===e.fileName||""===e.filePath)return e.$layer.msg("未选择文件！"),!1;if(""===e.fileVersion)return e.$layer.msg("获取不到版本号，请重新选择！"),!1;var t=e.fileRemark.replace(/(^\s*)|(\s*$)/g,"");if(t.length>100)return e.$layer.msg("备注不允许超过100个字符！"),!1;var s=l()({event:"event_query_file_state",author_id:localStorage.getItem("login_token"),file_type:1,file_name:e.fileName});e.$api.post("/",s,function(s){if(console.log(s),0===s.code){if(1===s.bOccupied)return e.$layer.msg("该文件正在被占用，请稍后再试！"),!1;var a=new FormData;a.append("file",e.file),a.append("version",e.fileVersion),a.append("remark",t),a.append("login_token",localStorage.getItem("login_token")),e.xhr=new XMLHttpRequest,console.log("that.xhr*******************************************"),console.log(e.xhr),e.xhr.open("post",sessionStorage.getItem("upDowndApiAddr")+"/upload"),e.xhr.onload=e.uploadComplete,e.xhr.onerror=e.uploadFailed,e.xhr.upload.onprogress=e.progressFunction,e.xhr.upload.onloadstart=function(){sessionStorage.setItem("uploadSoftwarePage","true"),sessionStorage.removeItem("uploadSuccess"),e.oldTime=(new Date).getTime(),e.oldLoaded=0},e.xhr.onreadystatechange=function(){4===e.xhr.readyState&&200===e.xhr.status&&(0!==JSON.parse(e.xhr.response).code?parent.layer.msg(JSON.parse(e.xhr.response).msg):(sessionStorage.setItem("uploadSuccess","true"),parent.layer.msg("软件版本上传成功！")))},e.xhr.send(a);var i=window.parent.layer.getFrameIndex("UploadSoftwareVersion");window.parent.document.getElementById("layui-layer-shade"+i).style.display="none",window.parent.document.getElementById("layui-layer"+i).style.display="none"}else e.$layer.msg("查询文件状态失败！")})},uploadComplete:function(){sessionStorage.removeItem("uploadSoftwarePage"),sessionStorage.setItem("isUploading","false"),this.closeUploadDialog()},uploadFailed:function(){var e=JSON.parse(sessionStorage.getItem("uploadStatus"));e[0].status="已取消",sessionStorage.setItem("uploadStatus",l()(e)),sessionStorage.setItem("isUploading","false"),this.closeUploadDialog()},cancleUploadFile:function(){this.xhr.abort(),this.closeUploadDialog()},closeUploadDialog:function(){parent.layer.close(window.parent.layer.getFrameIndex("UploadSoftwareVersion"))},progressFunction:function(e){console.log(e);var t=Math.round(e.loaded/e.total*100)+"%",s=(new Date).getTime(),a=(s-this.oldTime)/1e3,i=e.loaded-this.oldLoaded,o="B/s";if(a>=1){this.oldTime=s,this.oldLoaded=e.loaded;var r=i/a;r/1024>1&&(r/=1024,o="kB/s"),r/1024>1&&(r/=1024,o="MB/s"),r=r.toFixed(1)+o,this.oldSpeed=r}if(0===this.oldSpeed&&(this.oldSpeed=i,this.oldSpeed/1024>1&&(this.oldSpeed=this.oldSpeed/1024,o="kB/s"),this.oldSpeed/1024>1&&(this.oldSpeed=this.oldSpeed/1024,o="MB/s"),this.oldSpeed=this.oldSpeed.toFixed(1)+o),"100%"===t?(parent.layer.msg("正在往服务器存放文件，请稍后..."),sessionStorage.setItem("isUploading","false")):sessionStorage.setItem("isUploading","true"),null===sessionStorage.getItem("uploadStatus"))this.uploadStatus.unshift({id:this.uploadStatusId,filename:this.fileName,status:t,speed:this.oldSpeed}),sessionStorage.setItem("uploadStatus",l()(this.uploadStatus));else{this.uploadStatus=JSON.parse(sessionStorage.getItem("uploadStatus"));var n=!1;for(var c in this.uploadStatus){if("已取消"===this.uploadStatus[c].status&&this.uploadStatus[c].id===this.uploadStatusId)return this.cancleUploadFile(),sessionStorage.setItem("isUploading","false"),!1;this.uploadStatus[c].id===this.uploadStatusId&&(this.uploadStatus[c].status=t,this.uploadStatus[c].speed=this.oldSpeed,n=!0)}!1===n&&this.uploadStatus.unshift({id:this.uploadStatusId,filename:this.fileName,status:t,speed:this.oldSpeed}),sessionStorage.setItem("uploadStatus",l()(this.uploadStatus))}},cancel:function(){parent.layer.close(parent.layer.index)}},watch:{fileRemark:function(e,t){}}},Se={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"upload-software-version"},[s("label",{staticClass:"select-file"},[e._v("选择上传文件\n    "),s("input",{ref:"uploadfile",staticClass:"upload-file-input",attrs:{type:"file"},on:{change:function(t){e.getUploadfile(t)}}})]),e._v(" "),s("p",{staticClass:"file-rule-tip"},[e._v("注：上传的文件名规范，必须带有版本号！例：patch2.3.4.tar")]),e._v(" "),s("div",{staticClass:"file-info"},[s("span",{staticClass:"title"},[e._v("文件路径：")]),e._v(" "),s("span",{staticClass:"file-path"},[e._v(e._s(e.filePath))])]),e._v(" "),s("div",{staticClass:"file-info"},[s("span",{staticClass:"title"},[e._v("文  件  名：")]),e._v(" "),s("span",{staticClass:"file-name"},[e._v(e._s(e.fileName))]),e._v(" "),e.isExistFile?s("img",{attrs:{src:"static/images/manage-center/software-version-manage/alarm.png",title:"存在同名文件，确认后将覆盖原版本！"}}):e._e()]),e._v(" "),s("div",{staticClass:"file-info"},[s("span",{staticClass:"title"},[e._v("版  本  号：")]),e._v(" "),s("span",{staticClass:"file-version"},[e._v(e._s(e.fileVersion))]),e._v(" "),!e.isExistFile&&e.isExistExtendName?s("img",{attrs:{src:"static/images/manage-center/software-version-manage/alarm.png",title:"列表中已存在该版本号，建议更改文件名！"}}):e._e()]),e._v(" "),s("div",{staticClass:"file-info"},[s("span",{staticClass:"title"},[e._v("备       注：")]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.fileRemark,expression:"fileRemark"}],staticClass:"file-remark",domProps:{value:e.fileRemark},on:{input:function(t){t.target.composing||(e.fileRemark=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"bar-btn"},[s("span",{staticClass:"yes",on:{click:e.yes}},[e._v("确认")]),e._v(" "),s("span",{staticClass:"cancel",on:{click:e.cancel}},[e._v("取消")])])])},staticRenderFns:[]};var De=s("VU/8")(ke,Se,!1,function(e){s("me7q")},null,null).exports,Le=s("isEs"),xe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"edit-software-version"},[s("div",{staticClass:"file-info"},[s("span",{staticClass:"title"},[e._v("版  本  号：")]),e._v(" "),s("span",{staticClass:"file-version"},[e._v(e._s(e.version))])]),e._v(" "),s("div",{staticClass:"file-info"},[s("span",{staticClass:"title"},[e._v("文  件  名：")]),e._v(" "),s("span",{staticClass:"file-name"},[e._v(e._s(e.packageName))])]),e._v(" "),s("div",{staticClass:"file-info"},[s("span",{staticClass:"title"},[e._v("上传时间：")]),e._v(" "),s("span",{staticClass:"file-path"},[e._v(e._s(e.uploadTime))])]),e._v(" "),s("div",{staticClass:"file-info"},[s("span",{staticClass:"title"},[e._v("上  传  者：")]),e._v(" "),s("span",{staticClass:"file-path"},[e._v(e._s(e.userName))])]),e._v(" "),s("div",{staticClass:"file-info"},[s("span",{staticClass:"title"},[e._v("备       注：")]),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.remarks,expression:"remarks"}],staticClass:"file-remark",domProps:{value:e.remarks},on:{input:function(t){t.target.composing||(e.remarks=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"bar-btn"},[s("span",{staticClass:"yes",on:{click:e.yes}},[e._v("确认")]),e._v(" "),s("span",{staticClass:"cancel",on:{click:e.cancel}},[e._v("取消")])])])},staticRenderFns:[]};var Ce=function(e){s("Ix1J")},Ie=s("VU/8")(Le.a,xe,!1,Ce,null,null).exports,Ne={name:"uploadSoftwareVersion",data:function(){return{uploadStatus:[],isUploading:!1}},created:function(){window.onpopstate=function(){parent.layer.close(parent.layer.index)},this.getUploadStatus()},methods:{cancelUpload:function(e){this.uploadStatus[e].status="已取消",sessionStorage.setItem("uploadStatus",l()(this.uploadStatus)),parent.layer.close(window.parent.layer.getFrameIndex("UploadSoftwareVersion"))},getUploadStatus:function(){var e=this;window.uploadStatusInterval=setInterval(function(){localStorage.setItem("updateStorage",(new Date).getTime()),e.isUploading=sessionStorage.getItem("isUploading"),e.uploadStatus=JSON.parse(sessionStorage.getItem("uploadStatus"))},1e3)}}},$e={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"software-version-upload-progress"},[e._m(0),e._v(" "),e._l(e.uploadStatus,function(t,a){return s("div",{key:a,staticClass:"upload-task"},[s("span",[e._v(e._s(t.filename))]),e._v(" "),s("span",{staticClass:"status"},["100%"!==t.status&&"-1"!==t.status?s("a",[e._v(e._s("true"===e.isUploading&&"已取消"!==t.status?t.status+"("+t.speed+")":"已取消"))]):e._e(),e._v(" "),"-1"===t.status?s("img",{staticClass:"abnormal",attrs:{src:"static/images/commonly/abnormal.png",title:"上传失败"}}):e._e(),e._v(" "),"100%"===t.status?s("img",{staticClass:"finish",attrs:{src:"static/images/commonly/finish.png"}}):e._e(),e._v(" "),"100%"!==t.status&&"已取消"!==t.status&&"-1"!=t.status?s("img",{staticClass:"cancelUpload",attrs:{src:"static/images/commonly/cancel.png"},on:{click:function(t){e.cancelUpload(a)}}}):e._e()])])})],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("span",[this._v("文件名")]),t("span",[this._v("状态")])])}]};var Te=s("VU/8")(Ne,$e,!1,function(e){s("p3Mr")},null,null).exports,Ae=s("l2A8"),Pe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"version-list"},[s("div",{staticClass:"title"},[e._v("已上传的软件版本：")]),e._v(" "),e._l(e.softwareList,function(t){return s("div",{key:t.id,staticClass:"version"},[s("div",{staticClass:"version-num-title"},[s("span",[e._v("版本号：")]),e._v(" "),s("span",{staticClass:"version-num"},[e._v(e._s(t.version))]),e._v(" "),s("label",{staticClass:"select-this-version"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectVersion,expression:"selectVersion"}],staticClass:"select-version-radio",attrs:{type:"radio",name:"select-version"},domProps:{value:t,checked:e._q(e.selectVersion,t)},on:{change:function(s){e.selectVersion=t}}}),e._v("选择该版本\n        ")])]),e._v(" "),s("p",[e._v("文件名："),s("span",{staticClass:"version-file-name"},[e._v(e._s(t.package_name))])]),e._v(" "),s("p",[e._v("上传时间："),s("span",{staticClass:"version-upload-time"},[e._v(e._s(e.uploadTimeComputed(t.time)))])]),e._v(" "),s("p",[e._v("上传者："),s("span",{staticClass:"version-upload-user"},[e._v(e._s(t.user_name))])]),e._v(" "),s("p",[e._v("备注："),s("span",{staticClass:"version-remark"}),e._v(e._s(t.remarks))])])}),e._v(" "),s("div",{staticClass:"bar-btn"},[s("span",{staticClass:"cancel",on:{click:e.cancel}},[e._v("取消")]),e._v(" "),s("span",{staticClass:"yes",on:{click:e.yes}},[e._v("确认")]),e._v(" "),s("span",{staticClass:"uploadNewVersion",on:{click:e.uploadNewVersion}},[e._v("上传新版本")])])],2)},staticRenderFns:[]};var Ee=function(e){s("FwBH")},Ue=s("VU/8")(Ae.a,Pe,!1,Ee,null,null).exports,Me={name:"SoftwareUpgradeStatus",data:function(){return{userTransferQueue:[],transferQueueing:[],allTransferQueue:[]}},created:function(){window.onpopstate=function(){parent.layer.close(parent.layer.index)},this.getUserTransferQueue()},methods:{getUserTransferQueue:function(){var e=this;window.userTransferQueueInterval=setInterval(function(){e.userTransferQueue=JSON.parse(localStorage.getItem("userTransferQueue")),e.transferQueueing=JSON.parse(localStorage.getItem("transferQueueing")),null===localStorage.getItem("userTransferQueue")&&null!==localStorage.getItem("transferQueueing")?e.allTransferQueue=e.transferQueueing:null!==localStorage.getItem("userTransferQueue")&&null!==localStorage.getItem("transferQueueing")?e.allTransferQueue=e.userTransferQueue.concat(e.transferQueueing):null!==localStorage.getItem("userTransferQueue")&&null===localStorage.getItem("transferQueueing")&&(e.allTransferQueue=e.userTransferQueue)},300)},cancelUpgrade:function(e,t){var s=this,a=l()({event:"cancle_file_transform_task",login_token:localStorage.getItem("login_token"),robot_id:e,task_list:[t]});s.$api.post("/",a,function(e){if(console.log(e),0===e.code){var a=JSON.parse(localStorage.getItem("transferQueueing"));for(var i in a)if(a[i].task_id===t){a[i].step="已取消",a[i].task_id="";var o=[];null!==localStorage.getItem("userTransferQueue")&&(o=JSON.parse(localStorage.getItem("userTransferQueue"))),o.push(a[i]),localStorage.setItem("userTransferQueue",l()(o)),a.splice(i,1),0===a.length&&localStorage.removeItem("transferQueueing")}null!==localStorage.getItem("transferQueueing")&&localStorage.setItem("transferQueueing",l()(a))}else s.$layer.msg("软件升级取消失败！")})}}},Fe={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"software-upgrade-status"},[e._m(0),e._v(" "),e._l(e.allTransferQueue,function(t,a){return s("div",{key:a,staticClass:"upload-task"},[s("span",[e._v(e._s(t.robot_id))]),e._v(" "),s("span",[e._v(e._s(t.version))]),e._v(" "),s("span",{staticClass:"status"},["100%"!==t.step&&"-1"!==t.step?s("a",[e._v(e._s(t.step))]):e._e(),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:"100%"===t.step,expression:"item.step === '100%'"}],staticClass:"finish",attrs:{src:"static/images/commonly/finish.png"}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:"-1"===t.step,expression:"item.step === '-1'"}],staticClass:"abnormal",attrs:{title:"状态异常，升级失败！",src:"static/images/commonly/abnormal.png"}}),e._v(" "),"100%"!==t.step&&"已取消"!==t.step&&"-1"!==t.step?s("img",{staticClass:"cancelUpload",attrs:{src:"static/images/commonly/cancel.png"},on:{click:function(s){e.cancelUpgrade(t.robot_id,t.task_id)}}}):e._e()])])})],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("span",[this._v("设备编号")]),t("span",[this._v("更新版本")]),t("span",{staticClass:"title-status-text"},[this._v("状态")])])}]};var Oe=s("VU/8")(Me,Fe,!1,function(e){s("XBlY")},null,null).exports,Be={name:"LogBackupStatus",data:function(){return{finishExecutingLog:[],executingLog:[],allExecutingLog:[]}},created:function(){window.onpopstate=function(){parent.layer.close(parent.layer.index)},this.getExecutingLog()},methods:{getExecutingLog:function(){var e=this;window.executingLogInterval=setInterval(function(){e.finishExecutingLog=JSON.parse(localStorage.getItem("finishExecutingLog")),e.executingLog=JSON.parse(localStorage.getItem("executingLog")),null===localStorage.getItem("finishExecutingLog")&&null!==localStorage.getItem("executingLog")?e.allExecutingLog=e.executingLog.reverse():null!==localStorage.getItem("finishExecutingLog")&&null!==localStorage.getItem("executingLog")?e.allExecutingLog=e.finishExecutingLog.concat(e.executingLog).reverse():null!==localStorage.getItem("finishExecutingLog")&&null===localStorage.getItem("executingLog")&&(e.allExecutingLog=e.finishExecutingLog.reverse())},300)},cancelExecutingLog:function(e){var t=this,s=l()({event:"cancle_get_log",task_id:e});t.$api.post("/",s,function(s){if(console.log(s),0===s.code){var a=JSON.parse(localStorage.getItem("executingLog"));if(a[0].task_id===e){if(a[0].step="已取消",a[0].task_id="",null===localStorage.getItem("finishExecutingLog"))localStorage.setItem("finishExecutingLog",l()(a));else{var i=JSON.parse(localStorage.getItem("finishExecutingLog"));i=i.concat(a),localStorage.setItem("finishExecutingLog",l()(i))}localStorage.removeItem("executingLog")}}else t.$layer.msg("取消拉取日志失败！")})},toDownload:function(){sessionStorage.setItem("downloadCenterTab","1"),parent.window.location.href="/#/DownloadCenter",parent.layer.close(window.parent.layer.getFrameIndex("LogBackupStatus"))}}},Ge={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"log-backup-progress"},[e._m(0),e._v(" "),e._l(e.allExecutingLog,function(t,a){return s("div",{key:a,staticClass:"backup-log"},[s("span",[e._v(e._s(t.log_name))]),e._v(" "),s("span",{staticClass:"status"},["100%"!==t.step&&"-1"!==t.step?s("a",[e._v(e._s("0%"===t.step?"文件获取中":t.step))]):e._e(),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:"100%"===t.step,expression:"item.step === '100%'"}],staticClass:"finish",attrs:{src:"static/images/commonly/finish.png"}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:"100%"===t.step,expression:"item.step === '100%'"}],staticClass:"todownload",attrs:{src:"static/images/backup-log-file/to-download.png"},on:{click:e.toDownload}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:"-1"===t.step,expression:"item.step === '-1'"}],staticClass:"abnormal",attrs:{title:"状态异常，备份文件失败！",src:"static/images/commonly/abnormal.png"}}),e._v(" "),"100%"!==t.step&&"已取消"!==t.step&&"-1"!==t.step?s("img",{staticClass:"cancelUpload",attrs:{src:"static/images/commonly/cancel.png"},on:{click:function(s){e.cancelExecutingLog(t.task_id)}}}):e._e()])])})],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("span",[this._v("文件名")]),t("span",{staticClass:"title-status-text"},[this._v("状态")])])}]};var Re=s("VU/8")(Be,Ge,!1,function(e){s("TWOx")},null,null).exports,Ve={name:"EditUser",data:function(){return{selectedDeviceList:"",ntpAddress:"",address1:"",address2:"",address3:"",address4:""}},created:function(){window.onpopstate=function(){parent.layer.close(parent.layer.index)},this.$route.query.selectedDeviceList&&(this.selectedDeviceList=JSON.parse(this.$route.query.selectedDeviceList),""!==this.$route.query.ntp&&(this.ntpAddress=this.$route.query.ntp.split("."),this.address1=this.ntpAddress[0],this.address2=this.ntpAddress[1],this.address3=this.ntpAddress[2],this.address4=this.ntpAddress[3]))},methods:{yes:function(){if(""===this.address1||""===this.address2||""===this.address3||""===this.address4)return parent.layer.msg("请输入完整的NTP服务器地址,例：127.0.0.1"),!1;var e=this.address1+"."+this.address2+"."+this.address3+"."+this.address4,t=l()({event:"event_update_ntp_server",robot_list:this.selectedDeviceList,ntp_host:e});this.$api.post("/",t,function(e){0===e.code?(parent.layer.close(window.parent.layer.getFrameIndex("ChangeNtpAddress")),parent.layer.msg("正在更改机器人NTP服务器地址！")):parent.layer.msg("更改机器人NTP服务器地址失败！")})},cancel:function(){parent.layer.close(window.parent.layer.getFrameIndex("ChangeNtpAddress"))}},watch:{address1:function(e,t){if(-1!==e.toString().indexOf(" "))return this.address1=this.address1.replace(/ /g,""),this.$refs.address2.focus(),!1;e.match(/[^0-9]/g)?this.address1=t:""!==e&&(this.address1=parseInt(this.address1).toString(),e.length>=3&&this.$refs.address2.focus(),e>223&&(parent.layer.msg(e+"不是有效项。请指定一个介于0和223间的值",{time:2e3}),this.address1=223))},address2:function(e,t){if(-1!==e.toString().indexOf(" "))return this.address2=this.address2.replace(/ /g,""),this.$refs.address3.focus(),!1;e.match(/[^0-9]/g)?this.address2=t:""!==e&&(this.address2=parseInt(this.address2).toString(),e.length>=3&&this.$refs.address3.focus(),e>255&&(parent.layer.msg(e+"不是有效项。请指定一个介于0和255间的值",{time:2e3}),this.address2=255))},address3:function(e,t){if(-1!==e.toString().indexOf(" "))return this.address3=this.address3.replace(/ /g,""),this.$refs.address4.focus(),!1;e.match(/[^0-9]/g)?this.address3=t:""!==e&&(this.address3=parseInt(this.address3).toString(),e.length>=3&&this.$refs.address4.focus(),e>255&&(parent.layer.msg(e+"不是有效项。请指定一个介于0和255间的值",{time:2e3}),this.address3=255))},address4:function(e,t){if(-1!==e.toString().indexOf(" "))return this.address4=this.address4.replace(/ /g,""),this.$refs.address1.focus(),!1;e.match(/[^0-9]/g)?this.address4=t:""!==e&&(this.address4=parseInt(this.address4).toString(),e>255&&(parent.layer.msg(e+"不是有效项。请指定一个介于0和255间的值",{time:2e3}),this.address4=255))}}},je={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"update-change-ntp-address"},[s("p",{staticClass:"title"},[e._v("NTP服务地址(应用于所选设备)")]),e._v(" "),s("div",{staticClass:"input-ntp-address"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.address1,expression:"address1"}],ref:"address1",staticClass:"address",attrs:{type:"text",autofocus:"autofocus"},domProps:{value:e.address1},on:{input:function(t){t.target.composing||(e.address1=t.target.value)}}}),s("i"),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.address2,expression:"address2"}],ref:"address2",staticClass:"address",attrs:{type:"text"},domProps:{value:e.address2},on:{input:function(t){t.target.composing||(e.address2=t.target.value)}}}),s("i"),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.address3,expression:"address3"}],ref:"address3",staticClass:"address",attrs:{type:"text"},domProps:{value:e.address3},on:{input:function(t){t.target.composing||(e.address3=t.target.value)}}}),s("i"),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.address4,expression:"address4"}],ref:"address4",staticClass:"address",attrs:{type:"text"},domProps:{value:e.address4},on:{input:function(t){t.target.composing||(e.address4=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"bar-btn"},[s("span",{staticClass:"yes",on:{click:e.yes}},[e._v("确认")]),e._v(" "),s("span",{staticClass:"cancel",on:{click:e.cancel}},[e._v("取消")])])])},staticRenderFns:[]};var He=s("VU/8")(Ve,je,!1,function(e){s("6UJw")},null,null).exports;a.a.use(n.a);var Ye=new n.a({routes:[{path:"*",redirect:"/"},{path:"/",component:d},{path:"/PersonalCenter",component:f},{path:"/UserManage",component:w},{path:"/BaseConfig",component:D},{path:"/DeviceStatus",component:O},{path:"/ManageCenter",component:Q},{path:"/LogTemplateManage",component:Y},{path:"/DownloadCenter",component:ee},{path:"/LogFile",component:X},{path:"/SoftwareUpgrade",component:ie},{path:"/BackupLogFile",component:ce},{path:"/SoftwareVersionManage",component:V},{path:"/RootUserSoftwareManage",component:pe},{path:"/EditUser",component:me},{path:"/ComprehensiveMonitor",component:be},{path:"/UploadSoftwareVersion",component:De},{path:"/EditSoftwareVersion",component:Ie},{path:"/SoftwareUploadProgress",component:Te},{path:"/SoftwareVersionList",component:Ue},{path:"/SoftwareUpgradeStatus",component:Oe},{path:"/LogBackupStatus",component:Re},{path:"/ChangeNtpAddress",component:He}],scrollBehavior:function(e,t,s){return{x:0,y:0}}});s("j1ja");!function(e,t){var a,i,o=e.layui&&layui.define,r={getPath:function(){var e=document.currentScript?document.currentScript.src:function(){for(var e,t=document.scripts,s=t.length-1,a=s;a>0;a--)if("interactive"===t[a].readyState){e=t[a].src;break}return e||t[s].src}();return e.substring(0,e.lastIndexOf("/")+1)}(),config:{},end:{},minIndex:0,minLeft:[],btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:["dialog","page","iframe","loading","tips"],getStyle:function(t,s){var a=t.currentStyle?t.currentStyle:e.getComputedStyle(t,null);return a[a.getPropertyValue?"getPropertyValue":"getAttribute"](s)},link:function(t,s,a){if(n.path){var i=document.getElementsByTagName("head")[0],o=document.createElement("link");"string"==typeof s&&(a=s);var c="layuicss-"+(a||t).replace(/\.|\//g,""),l=0;o.rel="stylesheet",o.href=t,o.id=c,document.getElementById(c)||i.appendChild(o),"function"==typeof s&&function t(){return++l>80?e.console&&console.error("layer.css: Invalid"):void(1989===parseInt(r.getStyle(document.getElementById(c),"width"))?s():setTimeout(t,100))}()}}},n={v:"3.1.1",ie:function(){var t=navigator.userAgent.toLowerCase();return!!(e.ActiveXObject||"ActiveXObject"in e)&&((t.match(/msie\s(\d+)/)||[])[1]||"11")}(),index:e.layer&&e.layer.v?1e5:0,path:r.getPath,config:function(e,t){return e=e||{},n.cache=r.config=a.extend({},r.config,e),n.path=r.config.path||n.path,"string"==typeof e.extend&&(e.extend=[e.extend]),r.config.path&&n.ready(),e.extend?(o?layui.addcss("modules/layer/"+e.extend):r.link("theme/"+e.extend),this):this},ready:function(e){var t="layer",s=(o?"modules/layer/":"static/js/lib/layer/theme/")+"default/layer.css?v="+n.v;return o?layui.addcss(s,e,t):r.link(s,e,t),this},alert:function(e,t,s){var i="function"==typeof t;return i&&(s=t),n.open(a.extend({content:e,yes:s},i?{}:t))},confirm:function(e,t,s,i){var o="function"==typeof t;return o&&(i=s,s=t),n.open(a.extend({content:e,btn:r.btn,yes:s,btn2:i},o?{}:t))},msg:function(e,t,s){var i="function"==typeof t,o=r.config.skin,c=(o?o+" "+o+"-msg":"")||"layui-layer-msg",u=l.anim.length-1;return i&&(s=t),n.open(a.extend({content:e,time:3e3,shade:!1,skin:c,title:!1,closeBtn:!1,btn:!1,resize:!1,end:s},i&&!r.config.skin?{skin:c+" layui-layer-hui",anim:u}:((-1===(t=t||{}).icon||void 0===t.icon&&!r.config.skin)&&(t.skin=c+" "+(t.skin||"layui-layer-hui")),t)))},load:function(e,t){return n.open(a.extend({type:3,icon:e||0,resize:!1,shade:.01},t))},tips:function(e,t,s){return n.open(a.extend({type:4,content:[e,t],closeBtn:!1,time:3e3,shade:!1,resize:!1,fixed:!1,maxWidth:210},s))}},c=function(e){var t=this;t.index=++n.index,t.config=a.extend({},t.config,r.config,e),document.body?t.creat():setTimeout(function(){t.creat()},30)};c.pt=c.prototype;var l=["layui-layer",".layui-layer-title",".layui-layer-main",".layui-layer-dialog","layui-layer-iframe","layui-layer-content","layui-layer-btn","layui-layer-close"];l.anim=["layer-anim-00","layer-anim-01","layer-anim-02","layer-anim-03","layer-anim-04","layer-anim-05","layer-anim-06"],c.pt.config={type:0,shade:.3,fixed:!0,move:l[1],title:"&#x4FE1;&#x606F;",offset:"auto",area:"auto",closeBtn:1,time:0,zIndex:19891014,maxWidth:360,anim:0,isOutAnim:!0,icon:-1,moveType:1,resize:!0,scrollbar:!0,tips:2},c.pt.vessel=function(e,t){var s=this,i=s.index,o=s.config,n=o.zIndex+i,c="object"==typeof o.title,u=o.maxmin&&(1===o.type||2===o.type),p=o.title?'<div class="layui-layer-title" style="'+(c?o.title[1]:"")+'">'+(c?o.title[0]:o.title)+"</div>":"";return o.zIndex=n,t([o.shade?'<div class="layui-layer-shade" id="layui-layer-shade'+i+'" times="'+i+'" style="z-index:'+(n-1)+'; "></div>':"",'<div class="'+l[0]+" layui-layer-"+r.type[o.type]+(0!=o.type&&2!=o.type||o.shade?"":" layui-layer-border")+" "+(o.skin||"")+'" id="'+l[0]+i+'" type="'+r.type[o.type]+'" times="'+i+'" showtime="'+o.time+'" conType="'+(e?"object":"string")+'" style="z-index: '+n+"; width:"+o.area[0]+";height:"+o.area[1]+(o.fixed?"":";position:absolute;")+'">'+(e&&2!=o.type?"":p)+'<div id="'+(o.id||"")+'" class="layui-layer-content'+(0==o.type&&-1!==o.icon?" layui-layer-padding":"")+(3==o.type?" layui-layer-loading"+o.icon:"")+'">'+(0==o.type&&-1!==o.icon?'<i class="layui-layer-ico layui-layer-ico'+o.icon+'"></i>':"")+(1==o.type&&e?"":o.content||"")+'</div><span class="layui-layer-setwin">'+function(){var e=u?'<a class="layui-layer-min" href="javascript:;"><cite></cite></a><a class="layui-layer-ico layui-layer-max" href="javascript:;"></a>':"";return o.closeBtn&&(e+='<a class="layui-layer-ico '+l[7]+" "+l[7]+(o.title?o.closeBtn:4==o.type?"1":"2")+'" href="javascript:;"></a>'),e}()+"</span>"+(o.btn?function(){var e="";"string"==typeof o.btn&&(o.btn=[o.btn]);for(var t=0,s=o.btn.length;t<s;t++)e+='<a class="'+l[6]+t+'">'+o.btn[t]+"</a>";return'<div class="'+l[6]+" layui-layer-btn-"+(o.btnAlign||"")+'">'+e+"</div>"}():"")+(o.resize?'<span class="layui-layer-resize"></span>':"")+"</div>"],p,a('<div class="layui-layer-move"></div>')),s},c.pt.creat=function(){var e=this,t=e.config,s=e.index,o="object"==typeof(u=t.content),c=a("body");if(!t.id||!a("#"+t.id)[0]){switch("string"==typeof t.area&&(t.area="auto"===t.area?["",""]:[t.area,""]),t.shift&&(t.anim=t.shift),6==n.ie&&(t.fixed=!1),t.type){case 0:t.btn="btn"in t?t.btn:r.btn[0],n.closeAll("dialog");break;case 2:var u=t.content=o?t.content:[t.content||"http://layer.layui.com","auto"];t.content='<iframe scrolling="'+(t.content[1]||"auto")+'" allowtransparency="true" id="'+l[4]+s+'" name="'+l[4]+s+'" onload="this.className=\'\';" class="layui-layer-load" frameborder="0" src="'+t.content[0]+'"></iframe>';break;case 3:delete t.title,delete t.closeBtn,-1===t.icon&&t.icon,n.closeAll("loading");break;case 4:o||(t.content=[t.content,"body"]),t.follow=t.content[1],t.content=t.content[0]+'<i class="layui-layer-TipsG"></i>',delete t.title,t.tips="object"==typeof t.tips?t.tips:[t.tips,!0],t.tipsMore||n.closeAll("tips")}if(e.vessel(o,function(i,n,p){c.append(i[0]),o?2==t.type||4==t.type?a("body").append(i[1]):u.parents("."+l[0])[0]||(u.data("display",u.css("display")).show().addClass("layui-layer-wrap").wrap(i[1]),a("#"+l[0]+s).find("."+l[5]).before(n)):c.append(i[1]),a(".layui-layer-move")[0]||c.append(r.moveElem=p),e.layero=a("#"+l[0]+s),t.scrollbar||l.html.css("overflow","hidden").attr("layer-full",s)}).auto(s),a("#layui-layer-shade"+e.index).css({"background-color":t.shade[1]||"#000",opacity:t.shade[0]||t.shade}),2==t.type&&6==n.ie&&e.layero.find("iframe").attr("src",u[0]),4==t.type?e.tips():e.offset(),t.fixed&&i.on("resize",function(){e.offset(),(/^\d+%$/.test(t.area[0])||/^\d+%$/.test(t.area[1]))&&e.auto(s),4==t.type&&e.tips()}),t.time<=0||setTimeout(function(){n.close(e.index)},t.time),e.move().callback(),l.anim[t.anim]){var p="layer-anim "+l.anim[t.anim];e.layero.addClass(p).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){a(this).removeClass(p)})}t.isOutAnim&&e.layero.data("isOutAnim",!0)}},c.pt.auto=function(e){var t=this.config,s=a("#"+l[0]+e);""===t.area[0]&&t.maxWidth>0&&(n.ie&&n.ie<8&&t.btn&&s.width(s.innerWidth()),s.outerWidth()>t.maxWidth&&s.width(t.maxWidth));var o=[s.innerWidth(),s.innerHeight()],r=s.find(l[1]).outerHeight()||0,c=s.find("."+l[6]).outerHeight()||0,u=function(e){(e=s.find(e)).height(o[1]-r-c-2*(0|parseFloat(e.css("padding-top"))))};switch(t.type){case 2:u("iframe");break;default:""===t.area[1]?t.maxHeight>0&&s.outerHeight()>t.maxHeight?(o[1]=t.maxHeight,u("."+l[5])):t.fixed&&o[1]>=i.height()&&(o[1]=i.height(),u("."+l[5])):u("."+l[5])}return this},c.pt.offset=function(){var e=this,t=e.config,s=e.layero,a=[s.outerWidth(),s.outerHeight()],o="object"==typeof t.offset;e.offsetTop=(i.height()-a[1])/2,e.offsetLeft=(i.width()-a[0])/2,o?(e.offsetTop=t.offset[0],e.offsetLeft=t.offset[1]||e.offsetLeft):"auto"!==t.offset&&("t"===t.offset?e.offsetTop=0:"r"===t.offset?e.offsetLeft=i.width()-a[0]:"b"===t.offset?e.offsetTop=i.height()-a[1]:"l"===t.offset?e.offsetLeft=0:"lt"===t.offset?(e.offsetTop=0,e.offsetLeft=0):"lb"===t.offset?(e.offsetTop=i.height()-a[1],e.offsetLeft=0):"rt"===t.offset?(e.offsetTop=0,e.offsetLeft=i.width()-a[0]):"rb"===t.offset?(e.offsetTop=i.height()-a[1],e.offsetLeft=i.width()-a[0]):e.offsetTop=t.offset),t.fixed||(e.offsetTop=/%$/.test(e.offsetTop)?i.height()*parseFloat(e.offsetTop)/100:parseFloat(e.offsetTop),e.offsetLeft=/%$/.test(e.offsetLeft)?i.width()*parseFloat(e.offsetLeft)/100:parseFloat(e.offsetLeft),e.offsetTop+=i.scrollTop(),e.offsetLeft+=i.scrollLeft()),s.attr("minLeft")&&(e.offsetTop=i.height()-(s.find(l[1]).outerHeight()||0),e.offsetLeft=s.css("left")),s.css({top:e.offsetTop,left:e.offsetLeft})},c.pt.tips=function(){var e=this.config,t=this.layero,s=[t.outerWidth(),t.outerHeight()],o=a(e.follow);o[0]||(o=a("body"));var r={width:o.outerWidth(),height:o.outerHeight(),top:o.offset().top,left:o.offset().left},n=t.find(".layui-layer-TipsG"),c=e.tips[0];e.tips[1]||n.remove(),r.autoLeft=function(){r.left+s[0]-i.width()>0?(r.tipLeft=r.left+r.width-s[0],n.css({right:12,left:"auto"})):r.tipLeft=r.left},r.where=[function(){r.autoLeft(),r.tipTop=r.top-s[1]-10,n.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color",e.tips[1])},function(){r.tipLeft=r.left+r.width+10,r.tipTop=r.top,n.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color",e.tips[1])},function(){r.autoLeft(),r.tipTop=r.top+r.height+10,n.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css("border-right-color",e.tips[1])},function(){r.tipLeft=r.left-s[0]-10,r.tipTop=r.top,n.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color",e.tips[1])}],r.where[c-1](),1===c?r.top-(i.scrollTop()+s[1]+16)<0&&r.where[2]():2===c?i.width()-(r.left+r.width+s[0]+16)>0||r.where[3]():3===c?r.top-i.scrollTop()+r.height+s[1]+16-i.height()>0&&r.where[0]():4===c&&s[0]+16-r.left>0&&r.where[1](),t.find("."+l[5]).css({"background-color":e.tips[1],"padding-right":e.closeBtn?"30px":""}),t.css({left:r.tipLeft-(e.fixed?i.scrollLeft():0),top:r.tipTop-(e.fixed?i.scrollTop():0)})},c.pt.move=function(){var e=this,t=e.config,s=a(document),o=e.layero,c=o.find(t.move),l=o.find(".layui-layer-resize"),u={};return t.move&&c.css("cursor","move"),c.on("mousedown",function(e){e.preventDefault(),t.move&&(u.moveStart=!0,u.offset=[e.clientX-parseFloat(o.css("left")),e.clientY-parseFloat(o.css("top"))],r.moveElem.css("cursor","move").show())}),l.on("mousedown",function(e){e.preventDefault(),u.resizeStart=!0,u.offset=[e.clientX,e.clientY],u.area=[o.outerWidth(),o.outerHeight()],r.moveElem.css("cursor","se-resize").show()}),s.on("mousemove",function(s){if(u.moveStart){var a=s.clientX-u.offset[0],r=s.clientY-u.offset[1],c="fixed"===o.css("position");if(s.preventDefault(),u.stX=c?0:i.scrollLeft(),u.stY=c?0:i.scrollTop(),!t.moveOut){var l=i.width()-o.outerWidth()+u.stX,p=i.height()-o.outerHeight()+u.stY;a<u.stX&&(a=u.stX),a>l&&(a=l),r<u.stY&&(r=u.stY),r>p&&(r=p)}o.css({left:a,top:r})}if(t.resize&&u.resizeStart){a=s.clientX-u.offset[0],r=s.clientY-u.offset[1];s.preventDefault(),n.style(e.index,{width:u.area[0]+a,height:u.area[1]+r}),u.isResize=!0,t.resizing&&t.resizing(o)}}).on("mouseup",function(e){u.moveStart&&(delete u.moveStart,r.moveElem.hide(),t.moveEnd&&t.moveEnd(o)),u.resizeStart&&(delete u.resizeStart,r.moveElem.hide())}),e},c.pt.callback=function(){var e=this,t=e.layero,s=e.config;e.openLayer(),s.success&&(2==s.type?t.find("iframe").on("load",function(){s.success(t,e.index)}):s.success(t,e.index)),6==n.ie&&e.IE6(t),t.find("."+l[6]).children("a").on("click",function(){var i=a(this).index();0===i?s.yes?s.yes(e.index,t):s.btn1?s.btn1(e.index,t):n.close(e.index):!1===(s["btn"+(i+1)]&&s["btn"+(i+1)](e.index,t))||n.close(e.index)}),t.find("."+l[7]).on("click",function(){!1===(s.cancel&&s.cancel(e.index,t))||n.close(e.index)}),s.shadeClose&&a("#layui-layer-shade"+e.index).on("click",function(){n.close(e.index)}),t.find(".layui-layer-min").on("click",function(){!1===(s.min&&s.min(t))||n.min(e.index,s)}),t.find(".layui-layer-max").on("click",function(){a(this).hasClass("layui-layer-maxmin")?(n.restore(e.index),s.restore&&s.restore(t)):(n.full(e.index,s),setTimeout(function(){s.full&&s.full(t)},100))}),s.end&&(r.end[e.index]=s.end)},r.reselect=function(){a.each(a("select"),function(e,t){var s=a(this);s.parents("."+l[0])[0]||1==s.attr("layer")&&a("."+l[0]).length<1&&s.removeAttr("layer").show(),s=null})},c.pt.IE6=function(e){a("select").each(function(e,t){var s=a(this);s.parents("."+l[0])[0]||"none"===s.css("display")||s.attr({layer:"1"}).hide(),s=null})},c.pt.openLayer=function(){n.zIndex=this.config.zIndex,n.setTop=function(e){return n.zIndex=parseInt(e[0].style.zIndex),e.on("mousedown",function(){n.zIndex++,e.css("z-index",n.zIndex+1)}),n.zIndex}},r.record=function(e){var t=[e.width(),e.height(),e.position().top,e.position().left+parseFloat(e.css("margin-left"))];e.find(".layui-layer-max").addClass("layui-layer-maxmin"),e.attr({area:t})},r.rescollbar=function(e){l.html.attr("layer-full")==e&&(l.html[0].style.removeProperty?l.html[0].style.removeProperty("overflow"):l.html[0].style.removeAttribute("overflow"),l.html.removeAttr("layer-full"))},e.layer=n,n.getChildFrame=function(e,t){return t=t||a("."+l[4]).attr("times"),a("#"+l[0]+t).find("iframe").contents().find(e)},n.getFrameIndex=function(e){return a("#"+e).parents("."+l[4]).attr("times")},n.iframeAuto=function(e){if(e){var t=n.getChildFrame("html",e).outerHeight(),s=a("#"+l[0]+e),i=s.find(l[1]).outerHeight()||0,o=s.find("."+l[6]).outerHeight()||0;s.css({height:t+i+o}),s.find("iframe").css({height:t})}},n.iframeSrc=function(e,t){a("#"+l[0]+e).find("iframe").attr("src",t)},n.style=function(e,t,s){var i=a("#"+l[0]+e),o=i.find(".layui-layer-content"),n=i.attr("type"),c=i.find(l[1]).outerHeight()||0,u=i.find("."+l[6]).outerHeight()||0;i.attr("minLeft"),n!==r.type[3]&&n!==r.type[4]&&(s||(parseFloat(t.width)<=260&&(t.width=260),parseFloat(t.height)-c-u<=64&&(t.height=64+c+u)),i.css(t),u=i.find("."+l[6]).outerHeight(),n===r.type[2]?i.find("iframe").css({height:parseFloat(t.height)-c-u}):o.css({height:parseFloat(t.height)-c-u-parseFloat(o.css("padding-top"))-parseFloat(o.css("padding-bottom"))}))},n.min=function(e,t){var s=a("#"+l[0]+e),o=s.find(l[1]).outerHeight()||0,c=s.attr("minLeft")||181*r.minIndex+"px",u=s.css("position");r.record(s),r.minLeft[0]&&(c=r.minLeft[0],r.minLeft.shift()),s.attr("position",u),n.style(e,{width:180,height:o,left:c,top:i.height()-o,position:"fixed",overflow:"hidden"},!0),s.find(".layui-layer-min").hide(),"page"===s.attr("type")&&s.find(l[4]).hide(),r.rescollbar(e),s.attr("minLeft")||r.minIndex++,s.attr("minLeft",c)},n.restore=function(e){var t=a("#"+l[0]+e),s=t.attr("area").split(",");t.attr("type"),n.style(e,{width:parseFloat(s[0]),height:parseFloat(s[1]),top:parseFloat(s[2]),left:parseFloat(s[3]),position:t.attr("position"),overflow:"visible"},!0),t.find(".layui-layer-max").removeClass("layui-layer-maxmin"),t.find(".layui-layer-min").show(),"page"===t.attr("type")&&t.find(l[4]).show(),r.rescollbar(e)},n.full=function(e){var t,s=a("#"+l[0]+e);r.record(s),l.html.attr("layer-full")||l.html.css("overflow","hidden").attr("layer-full",e),clearTimeout(t),t=setTimeout(function(){var t="fixed"===s.css("position");n.style(e,{top:t?0:i.scrollTop(),left:t?0:i.scrollLeft(),width:i.width(),height:i.height()},!0),s.find(".layui-layer-min").hide()},100)},n.title=function(e,t){a("#"+l[0]+(t||n.index)).find(l[1]).html(e)},n.close=function(e){var t=a("#"+l[0]+e),s=t.attr("type");if(t[0]){var i="layui-layer-wrap",o=function(){if(s===r.type[1]&&"object"===t.attr("conType")){t.children(":not(."+l[5]+")").remove();for(var o=t.find("."+i),n=0;n<2;n++)o.unwrap();o.css("display",o.data("display")).removeClass(i)}else{if(s===r.type[2])try{var c=a("#"+l[4]+e)[0];c.contentWindow.document.write(""),c.contentWindow.close(),t.find("."+l[5])[0].removeChild(c)}catch(e){}t[0].innerHTML="",t.remove()}"function"==typeof r.end[e]&&r.end[e](),delete r.end[e]};t.data("isOutAnim")&&t.addClass("layer-anim layer-anim-close"),a("#layui-layer-moves, #layui-layer-shade"+e).remove(),6==n.ie&&r.reselect(),r.rescollbar(e),t.attr("minLeft")&&(r.minIndex--,r.minLeft.push(t.attr("minLeft"))),n.ie&&n.ie<10||!t.data("isOutAnim")?o():setTimeout(function(){o()},200)}},n.closeAll=function(e){a.each(a("."+l[0]),function(){var t=a(this),s=e?t.attr("type")===e:1;s&&n.close(t.attr("times")),s=null})};var u=n.cache||{},p=function(e){return u.skin?" "+u.skin+" "+u.skin+"-"+e:""};n.prompt=function(e,t){var s="";if("function"==typeof(e=e||{})&&(t=e),e.area){var o=e.area;s='style="width: '+o[0]+"; height: "+o[1]+';"',delete e.area}var r,c=2==e.formType?'<textarea class="layui-layer-input"'+s+">"+(e.value||"")+"</textarea>":'<input type="'+(1==e.formType?"password":"text")+'" class="layui-layer-input" value="'+(e.value||"")+'">',l=e.success;return delete e.success,n.open(a.extend({type:1,btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],content:c,skin:"layui-layer-prompt"+p("prompt"),maxWidth:i.width(),success:function(e){(r=e.find(".layui-layer-input")).focus(),"function"==typeof l&&l(e)},resize:!1,yes:function(s){var a=r.val();""===a?r.focus():a.length>(e.maxlength||500)?n.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(e.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",r,{tips:1}):t&&t(a,s,r)}},e))},n.tab=function(e){var t=(e=e||{}).tab||{},s="layui-this",i=e.success;return delete e.success,n.open(a.extend({type:1,skin:"layui-layer-tab"+p("tab"),resize:!1,title:function(){var e=t.length,a=1,i="";if(e>0)for(i='<span class="'+s+'">'+t[0].title+"</span>";a<e;a++)i+="<span>"+t[a].title+"</span>";return i}(),content:'<ul class="layui-layer-tabmain">'+function(){var e=t.length,a=1,i="";if(e>0)for(i='<li class="layui-layer-tabli '+s+'">'+(t[0].content||"no content")+"</li>";a<e;a++)i+='<li class="layui-layer-tabli">'+(t[a].content||"no  content")+"</li>";return i}()+"</ul>",success:function(t){var o=t.find(".layui-layer-title").children(),r=t.find(".layui-layer-tabmain").children();o.on("mousedown",function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0;var i=a(this),o=i.index();i.addClass(s).siblings().removeClass(s),r.eq(o).show().siblings().hide(),"function"==typeof e.change&&e.change(o)}),"function"==typeof i&&i(t)}},e))},n.photos=function(t,s,i){var o={};if((t=t||{}).photos){var r=t.photos.constructor===Object,c=r?t.photos:{},l=c.data||[],u=c.start||0;o.imgIndex=1+(0|u),t.img=t.img||"img";var d=t.success;if(delete t.success,r){if(0===l.length)return n.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}else{var h=a(t.photos),m=function(){l=[],h.find(t.img).each(function(e){var t=a(this);t.attr("layer-index",e),l.push({alt:t.attr("alt"),pid:t.attr("layer-pid"),src:t.attr("layer-src")||t.attr("src"),thumb:t.attr("src")})})};if(m(),0===l.length)return;if(s||h.on("click",t.img,function(){var e=a(this).attr("layer-index");n.photos(a.extend(t,{photos:{start:e,data:l,tab:t.tab},full:t.full}),!0),m()}),!s)return}o.imgprev=function(e){o.imgIndex--,o.imgIndex<1&&(o.imgIndex=l.length),o.tabimg(e)},o.imgnext=function(e,t){o.imgIndex++,o.imgIndex>l.length&&(o.imgIndex=1,t)||o.tabimg(e)},o.keyup=function(e){if(!o.end){var t=e.keyCode;e.preventDefault(),37===t?o.imgprev(!0):39===t?o.imgnext(!0):27===t&&n.close(o.index)}},o.tabimg=function(e){if(!(l.length<=1))return c.start=o.imgIndex-1,n.close(o.index),n.photos(t,!0,e)},o.event=function(){o.bigimg.hover(function(){o.imgsee.show()},function(){o.imgsee.hide()}),o.bigimg.find(".layui-layer-imgprev").on("click",function(e){e.preventDefault(),o.imgprev()}),o.bigimg.find(".layui-layer-imgnext").on("click",function(e){e.preventDefault(),o.imgnext()}),a(document).on("keyup",o.keyup)},o.loadi=n.load(1,{shade:!("shade"in t)&&.9,scrollbar:!1}),function(e,t,s){var a=new Image;a.src=e,a.complete?t(a):(a.onload=function(){a.onload=null,t(a)},a.onerror=function(e){a.onerror=null,s(e)})}(l[u].src,function(s){n.close(o.loadi),o.index=n.open(a.extend({type:1,id:"layui-layer-photos",area:function(){var i=[s.width,s.height],o=[a(e).width()-100,a(e).height()-100];if(!t.full&&(i[0]>o[0]||i[1]>o[1])){var r=[i[0]/o[0],i[1]/o[1]];r[0]>r[1]?(i[0]=i[0]/r[0],i[1]=i[1]/r[0]):r[0]<r[1]&&(i[0]=i[0]/r[1],i[1]=i[1]/r[1])}return[i[0]+"px",i[1]+"px"]}(),title:!1,shade:.9,shadeClose:!0,closeBtn:!1,move:".layui-layer-phimg img",moveType:1,scrollbar:!1,moveOut:!0,isOutAnim:!1,skin:"layui-layer-photos"+p("photos"),content:'<div class="layui-layer-phimg"><img src="'+l[u].src+'" alt="'+(l[u].alt||"")+'" layer-pid="'+l[u].pid+'"><div class="layui-layer-imgsee">'+(l.length>1?'<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>':"")+'<div class="layui-layer-imgbar" style="display:'+(i?"block":"")+'"><span class="layui-layer-imgtit"><a href="javascript:;">'+(l[u].alt||"")+"</a><em>"+o.imgIndex+"/"+l.length+"</em></span></div></div></div>",success:function(e,s){o.bigimg=e.find(".layui-layer-phimg"),o.imgsee=e.find(".layui-layer-imguide,.layui-layer-imgbar"),o.event(e),t.tab&&t.tab(l[u],e),"function"==typeof d&&d(e)},end:function(){o.end=!0,a(document).off("keyup",o.keyup)}},t))},function(){n.close(o.loadi),n.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:3e4,btn:["&#x4E0B;&#x4E00;&#x5F20;","&#x4E0D;&#x770B;&#x4E86;"],yes:function(){l.length>1&&o.imgnext(!0,!0)}})})}},r.run=function(t){i=(a=t)(e),l.html=a("html"),n.open=function(e){return new c(e).index}},e.layui&&layui.define?(n.ready(),layui.define("jquery",function(t){n.path=layui.cache.dir,r.run(layui.$),e.layer=n,t("layer",n)})):"function"==typeof define&&s("nErl")?define(["jquery"],function(){return r.run(e.jQuery),n}):(r.run(e.jQuery),n.ready())}(window);var ze=layer,qe=s("0xDb"),Qe=s("gyMJ"),Je=s("WjA+"),We=s.n(Je),Xe=s("NC6I"),Ke=s.n(Xe),Ze=s("XLwt"),et=s.n(Ze);a.a.config.productionTip=!1,a.a.prototype.$api=Qe.a,a.a.prototype.$layer=ze,a.a.prototype.$socket=We.a,a.a.prototype.$md5=Ke.a,a.a.prototype.$echarts=et.a,a.a.prototype.$global=qe.a,new a.a({el:"#app",router:Ye,components:{App:r},template:"<App/>"})},P1tU:function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a),o=s("k0sY"),r=s("WUXh"),n=s("PKHa"),c=s("ccZh");t.a={name:"BackupLogFile",components:{VueDatepickerLocal:r.a,DeviceListCommon:n.a,Menu:c.a},data:function(){return{clearChecked:!1,searchDevice:"",selectGroupName:"",groupNameListData:[],selectedDeviceList:[],isShowDeviceListBlock:!0,allLogTypeList:[],searchLogType:"",selectlogtype:[],others:[],templateSelectlogtype:[],templateOthers:[],isAllLogTypeSelect:!1,templateList:[],templateAllNameList:[],templateSelected:[],isSelectedTemplate:!1,logFileNameList:[],selectedtimeType:"4",logTypePartition:"custom",startTime:new Date(e.getDetailTime(new Date).split(" ")[0]+" 00:00:00"),endTime:new Date,isSelectLastTime:!1}},created:function(){null===localStorage.getItem("finishExecutingLog")&&null===localStorage.getItem("executingLog")||this.logBackupStatus(),null!==sessionStorage.getItem("backupLogFileDeviceId")&&(this.BackupLogFile([parseInt(sessionStorage.getItem("backupLogFileDeviceId"))]),sessionStorage.removeItem("backupLogFileDeviceId")),this.getExecutingLog(),this.getTemplateList()},mounted:function(){var e=this;o.a.$on("socketData",function(t){e.serverResponse(t)})},beforeDestroy:function(){o.a.$off("socketData"),this.$layer.getFrameIndex("LogBackupStatus")&&this.$layer.close(this.$layer.getFrameIndex("LogBackupStatus"))},methods:{limitInput:function(){-1!==this.searchDevice.indexOf(" ")&&(this.searchDevice=this.searchDevice.replace(/\s/g,""),this.$layer.msg("不允许输入空格！")),this.searchDevice.length>=50&&this.$layer.msg("只允许输入50个字符！")},resetBackupModelPage:function(){this.others=[],this.selectlogtype=[],this.searchLogType=[],this.isAllLogTypeSelect=!1,this.selectedtimeType="4",this.templateSelected=[],this.logTypePartition="custom"},backToDeviceList:function(){this.isShowDeviceListBlock||(this.isShowDeviceListBlock=!0,this.clearChecked=!this.clearChecked,this.resetBackupModelPage(),this.$layer.getFrameIndex("LogBackupStatus")&&this.$layer.restore(this.$layer.getFrameIndex("LogBackupStatus")))},logTypePartitionChange:function(e){this.logTypePartition=e},selectlogtypeFilter:function(){var e=this;return""!==e.searchLogType?e.allLogTypeList.filter(function(t){return-1!==t.toString().indexOf(e.searchLogType)&&t}):e.allLogTypeList},selectAllLogType:function(e){e.target.checked?(this.selectlogtype=this.allLogTypeList,this.isAllLogTypeSelect=!0):(this.selectlogtype=[],this.isAllLogTypeSelect=!1)},actionBarImplement:function(e){if("BackupLogFile"===e.method){var t=[e.data.robot_id];this.BackupLogFile(t)}},BackupLogFile:function(e){if(0===e.length)return this.$layer.msg("请先选择一个设备！"),!1;null===localStorage.getItem("executingLog")?(this.$layer.getFrameIndex("LogBackupStatus")&&this.$layer.min(this.$layer.getFrameIndex("LogBackupStatus")),this.selectedDeviceList=e,this.isShowDeviceListBlock=!1,this.getAllLogTypeList()):this.$layer.msg("列表中有未备份完成的文件，请稍后再试！")},logBackupStatus:function(){var t=this;t.$layer.open({type:2,area:["640px","370px"],title:"备份日志",shade:0,shadeClose:!1,id:"LogBackupStatus",offset:"rb",maxmin:!0,anim:-1,content:e.url+"/#/LogBackupStatus",cancel:function(){return null!==localStorage.getItem("executingLog")?t.$layer.confirm("列表中有未备份完成的日志文件，确定要放弃吗？",{title:"放弃备份"},function(){var e=JSON.parse(localStorage.getItem("executingLog"));t.cancelExecutingLog(e[0].task_id),t.$layer.close(t.$layer.index),t.$layer.getFrameIndex("LogBackupStatus")&&t.$layer.close(t.$layer.getFrameIndex("LogBackupStatus"))}):(t.$layer.getFrameIndex("LogBackupStatus")&&t.$layer.close(t.$layer.getFrameIndex("LogBackupStatus")),localStorage.removeItem("finishExecutingLog"),t.$layer.close(t.$layer.index)),!1},end:function(){if("#/DownloadCenter"===window.location.hash)return t.$router.push({path:"/DownloadCenter"}),!1;t.$router.push({path:window.location.hash.replace(/#/g,"")})},yes:function(e){},success:function(){}})},getExecutingLog:function(){var e=this,t=i()({event:"get_executing_log",login_token:localStorage.getItem("login_token")});e.$api.post("/",t,function(t){if(0===t.code){var s="",a="";if(-1===t.task_id){s=-1;var o=JSON.parse(localStorage.getItem("executingLog"));if(o[0].step="-1",null===localStorage.getItem("finishExecutingLog"))localStorage.setItem("finishExecutingLog",i()(o));else{var r=JSON.parse(localStorage.getItem("finishExecutingLog"));r=r.concat(o),localStorage.setItem("finishExecutingLog",i()(r))}localStorage.removeItem("executingLog")}else if(100!==t.step&&-1!==t.task_id)s=t.step+"%",a=[{log_name:t.log_name,step:s,task_id:t.task_id}],localStorage.setItem("executingLog",i()(a));else if(100===t.step&&null!==localStorage.getItem("executingLog")){if(s=t.step+"%",a=[{log_name:t.log_name,step:s,task_id:t.task_id}],null===localStorage.getItem("finishExecutingLog"))localStorage.setItem("finishExecutingLog",i()(a));else{var n=JSON.parse(localStorage.getItem("finishExecutingLog"));n=n.concat(a),localStorage.setItem("finishExecutingLog",i()(n))}localStorage.removeItem("executingLog")}}else e.$layer.msg("获取正在备份的文件列表失败！！")})},startBackup:function(){var t=this,s="",a="";if("0"===t.selectedtimeType){var o=e.getDetailTime((new Date).getTime()-864e5).split(" ")[0].replace(/\//g,"");s=o+"_000000",a=o+"_235959"}else if("1"===t.selectedtimeType){var r=e.getDetailTime(new Date).split(" ")[0].replace(/\//g,"");s=r+"_000000",a=e.getDetailTime(new Date).replace(/\//g,"").replace(/ /g,"_").replace(/:/g,"")}else if("2"===t.selectedtimeType)s="",a="";else if("3"===t.selectedtimeType)s=e.getDetailTime(new Date-72e5).replace(/\//g,"").replace(/ /g,"_").replace(/:/g,""),a=e.getDetailTime(new Date).replace(/\//g,"").replace(/ /g,"_").replace(/:/g,"");else if("4"===t.selectedtimeType)if(s=e.getDetailTime(t.startTime).replace(/\//g,"").replace(/ /g,"_").replace(/:/g,""),""===t.endTime)a="";else if(a=e.getDetailTime(t.endTime).replace(/\//g,"").replace(/ /g,"_").replace(/:/g,""),s>a)return t.$layer.msg("起始时间不能大于结束时间！",{time:1e3}),!1;return 0===t.selectlogtype.concat(t.others).length&&"custom"===t.logTypePartition?(t.$layer.msg("请选择一个日志类型！",{time:1e3}),!1):"template"===t.logTypePartition&&0===t.templateSelected.length?(t.$layer.msg("请选择一个模板！",{time:1e3}),!1):(t.getLogFileList(),void t.$layer.prompt({title:"请为该文件命名",formType:0},function(e,o){if(null!==localStorage.getItem("executingLog"))t.$layer.msg("列表中有未备份完成的文件，请稍后再试！");else if(0===e.replace(/(^\s*)|(\s*$)/g,"").length)t.$layer.msg("文件名不能为空！",{time:1e3});else if(e.match(/[^A-Za-z0-9_.]/g))t.$layer.msg("只允许输入数字字母下划线小数点！",{time:1e3});else if(e.length>32)t.$layer.msg("文件名不允许超过32个字符！",{time:1e3});else if(e.length<4)t.$layer.msg("文件名不允许少于4个字符！",{time:1e3});else if(-1!==t.logFileNameList.toString().toLocaleUpperCase().split(",").indexOf((e+".tar").toLocaleUpperCase()))t.$layer.msg("文件名不允许重复！");else{var r=[];r="custom"===t.logTypePartition?t.selectlogtype.concat(t.others):t.templateSelectlogtype.concat(t.templateOthers);var n=i()({event:"send_log_condition",robot_id:t.selectedDeviceList,login_token:localStorage.getItem("login_token"),start_time:s,end_time:a,type_list:r,name:e+".tar"});t.$api.post("/",n,function(s){if(0===s.code){t.$layer.close(o);var a=[{log_name:e+".tar",step:"0%",task_id:s.task_id}];localStorage.setItem("executingLog",i()(a)),t.$layer.getFrameIndex("LogBackupStatus")&&t.$layer.restore(t.$layer.getFrameIndex("LogBackupStatus")),t.resetBackupModelPage(),t.clearChecked=!t.clearChecked,t.isShowDeviceListBlock=!0,t.logBackupStatus()}else t.$layer.msg("备份日志文件失败！！")})}}))},createTemplate:function(){var e=this;if(0===e.selectlogtype.concat(e.others).length)return e.$layer.msg("请选择一个日志类型！"),!1;e.$layer.prompt({title:"输入模板名称",formType:0},function(t,s){if(0===t.replace(/(^\s*)|(\s*$)/g,"").length)e.$layer.msg("模板名称不能为空！",{time:1e3});else if(t.length>32)e.$layer.msg("模板名称不允许超过32个字符！",{time:1e3});else if(t.length<4)e.$layer.msg("模板名称不允许少于4个字符！",{time:1e3});else if(-1!==e.templateAllNameList.toString().toLocaleUpperCase().split(",").indexOf(t.toLocaleUpperCase()))e.$layer.msg("模板名称不允许重复！");else{t=t.replace(/\s+/g,"");var a=i()({event:"event_bk_temps_insert",login_token:localStorage.getItem("login_token"),name:t,temps_types:e.selectlogtype.toString(),others:e.others.toString()});e.$api.post("/",a,function(t){console.log(t),0===t.code?(e.$layer.close(s),e.others=[],e.selectlogtype=[],e.isAllLogTypeSelect=!1,e.getTemplateList(),e.logTypePartition="template",e.$layer.msg("日志模板创建成功！")):e.$layer.msg("日志模板创建失败！")})}})},getLogFileList:function(){var e=this,t=i()({event:"get_log_list",login_token:localStorage.getItem("login_token")});e.$api.post("/",t,function(t){if(console.log(t),0===t.code){for(var s in t.log_list)e.logFileNameList.push(t.log_list[s].path);console.log(e.logFileNameList)}else e.$layer.msg("日志文件列表获取失败！")})},getTemplateList:function(){var e=this,t=i()({event:"event_bk_temps",login_token:localStorage.getItem("login_token")});e.$api.post("/",t,function(t){if(console.log(t),0===t.code){for(var s in e.templateList=t.data.temps,e.templateList)e.templateAllNameList.push(e.templateList[s].name);console.log(e.templateAllNameList)}else e.$layer.msg("获取日志类型模板失败！")})},getAllLogTypeList:function(){var e=this,t=i()({event:"get_log_types",robot_id:e.selectedDeviceList});e.$api.post("/",t,function(t){console.log(t),0===t.code?(e.allLogTypeList=t.data.sort(),console.log(t.data)):e.$layer.msg("获取日志类型列表失败！")})},getDetailTime:function(t){return e.getDetailTime(t)},getselectedGroup:function(e){this.selectGroupName=e},getSelectedDeviceList:function(e){console.log(e),this.selectedDeviceList=e},getGroupName:function(e){this.selectGroupName="",this.groupNameListData=e},cancelExecutingLog:function(e){var t=this,s=i()({event:"cancle_get_log",task_id:e});t.$api.post("/",s,function(s){if(console.log(s),0===s.code){var a=JSON.parse(localStorage.getItem("executingLog"));if(a[0].task_id===e){if(a[0].step="已取消",a[0].task_id="",null===localStorage.getItem("finishExecutingLog"))localStorage.setItem("finishExecutingLog",i()(a));else{var o=JSON.parse(localStorage.getItem("finishExecutingLog"));o=o.concat(a),localStorage.setItem("finishExecutingLog",i()(o))}localStorage.removeItem("executingLog")}}else t.$layer.msg("取消拉取日志失败！")})},serverResponse:function(e){if(e.login_token===localStorage.getItem("login_token")){if(262===e.msg_type&&null!==localStorage.getItem("executingLog")){var t=JSON.parse(localStorage.getItem("executingLog"));if(t[0].task_id===e.task_id&&(t[0].step=e.step+"%",localStorage.setItem("executingLog",i()(t)),100===e.step)){if(null===localStorage.getItem("finishExecutingLog"))localStorage.setItem("finishExecutingLog",i()(t));else{var s=JSON.parse(localStorage.getItem("finishExecutingLog"));s=s.concat(t),localStorage.setItem("finishExecutingLog",i()(s))}localStorage.removeItem("executingLog")}}if(263===e.msg_type&&null!==localStorage.getItem("executingLog")){var a=JSON.parse(localStorage.getItem("executingLog"));if(a[0].task_id===e.task_id){if(a[0].step="-1",null===localStorage.getItem("finishExecutingLog"))localStorage.setItem("finishExecutingLog",i()(a));else{var o=JSON.parse(localStorage.getItem("finishExecutingLog"));o=o.concat(a),localStorage.setItem("finishExecutingLog",i()(o))}localStorage.removeItem("executingLog")}}}}},watch:{isSelectLastTime:function(e,t){this.endTime=e?"":new Date},selectedtimeType:function(e,t){},templateSelected:function(e,t){console.log(e),e.id&&(this.others=[],this.selectlogtype=[],this.templateSelectlogtype=e.temps_types.split(","),this.templateOthers=e.others.split(","))},others:function(e,t){"custom"===this.logTypePartition&&(this.templateSelected=[])},selectlogtype:function(e,t){"custom"===this.logTypePartition&&(this.templateSelected=[]),console.log(e),this.selectlogtype.length===this.allLogTypeList.length?this.isAllLogTypeSelect=!0:this.isAllLogTypeSelect=!1}}}}).call(t,s("DuR2"))},PKHa:function(e,t,s){"use strict";var a=s("mvHQ"),i=s.n(a),o=s("k0sY"),r={name:"GroupDevice",props:["pageName","searchDevice","selectedGroup","versionNum","clearChecked"],components:{UpdateGroupName:s("soZF").a},data:function(){return{editGroupKeyDownWhich:"",groupDeviceList:[],selectedDeviceList:[],allSelectCheckbox:!1,editGroupName:[],allGroupNameList:[],originalGroupNameList:[],selectedGroupLen:0,oldProcessgroupalias:"",oldUpdateGroupIndex:-1}},created:function(){this.getOnlineRobotList(),window.connectionTime=setInterval(this.connectionTime,1e3)},beforeDestroy:function(){o.a.$off("socketData")},mounted:function(){var e=this;o.a.$on("socketData",function(t){e.serverResponse(t)})},watch:{clearChecked:function(e,t){this.cancelDeviceCheck()},searchDevice:function(e,t){this.selectedGroupLen=0,this.selectedDeviceList=[],this.allSelectCheckbox=!1,this.groupDeviceList.filter(function(e){e.groupDeviceAllSelect=!1,e.selectedLen=0;for(var t=0;t<e.robot_list.length;t++)e.robot_list[t].checked=!1;return e})},selectedGroup:function(e,t){this.selectedGroupLen=0,this.selectedDeviceList=[],this.allSelectCheckbox=!1,this.groupDeviceList.filter(function(e){e.groupDeviceAllSelect=!1,e.selectedLen=0;for(var t=0;t<e.robot_list.length;t++)e.robot_list[t].checked=!1;return e}),console.log(this.groupDeviceList)},selectedDeviceList:function(e,t){this.$emit("selectedDeviceList",this.selectedDeviceList)},deep:!0},methods:{actionBarImplement:function(e,t){this.$emit("actionBarImplement",{method:e,data:t})},cancelDeviceCheck:function(){this.selectedGroupLen=0,this.selectedDeviceList=[],this.allSelectCheckbox=!1,this.groupDeviceList.filter(function(e){e.groupDeviceAllSelect=!1,e.selectedLen=0;for(var t=0;t<e.robot_list.length;t++)e.robot_list[t].checked=!1;return e})},shrinkDeviceList:function(e){this.$forceUpdate(),this.$set(this.groupDeviceList[e],"shrink",!this.groupDeviceList[e].shrink)},getOnlineRobotList:function(){var e=this,t=this,s=i()({event:"get_online_robot_list",login_token:localStorage.getItem("login_token")});t.$api.post("/",s,function(s){if(0===s.code){for(var a in t.groupDeviceList=s.data,t.groupDeviceList){e.groupDeviceList[a].currentGroupAllLen=e.groupDeviceList[a].robot_list.length,e.groupDeviceList[a].selectedLen=0;var i=t.groupDeviceList[a].process_group_alias;""===i&&(i=t.groupDeviceList[a].process_group),-1===t.allGroupNameList.indexOf(i)&&t.allGroupNameList.push(i),t.originalGroupNameList.push(t.groupDeviceList[a].process_group)}t.$emit("groupNameList",t.allGroupNameList),t.$emit("onlineRobotList",t.groupDeviceList),t.sortDeviceComputed()}else t.$layer.msg("获取已连接设备信息失败！")})},sortDeviceComputed:function(){for(var e in this.groupDeviceList)this.groupDeviceList[e].robot_list.sort(function(e,t){return e.robot_id>t.robot_id?1:-1})},searchDeviceFilter:function(e){var t=this,s=!1,a=t.searchDevice.replace(/^\s+|\s+$/g,"");return(""===e.process_group_alias&&e.process_group===t.selectedGroup||e.process_group_alias===t.selectedGroup||""===t.selectedGroup)&&(s=!0),"BaseConfig"===t.pageName?e.robot_list.filter(function(e){var t=(""+e.robot_id).indexOf(a),i=("ip地址："+e.robot_host).toLocaleUpperCase().indexOf(a.toLocaleUpperCase()),o=("是否锁住："+(0===e.lock_status?"否":"是")).indexOf(a),r=("NTP服务地址："+e.ntp_server).toLocaleUpperCase().indexOf(a.toLocaleUpperCase());return!(-1===t&&-1===i&&-1===o&&-1===r||!s)&&e}):"BackupLogFile"===t.pageName?e.robot_list.filter(function(e){var t=(""+e.robot_id).indexOf(a),i=("ip地址："+e.robot_host).toLocaleUpperCase().indexOf(a.toLocaleUpperCase());return!(-1===t&&-1===i||!s)&&e}):"softwareupgrade"===t.pageName?e.robot_list.filter(function(e){var i=(""+e.robot_id).indexOf(a),o=("ip地址："+e.robot_host).toLocaleUpperCase().indexOf(a.toLocaleUpperCase()),r=("软件版本：V"+e.shell_version).toLocaleUpperCase().indexOf(a.toLocaleUpperCase()),n=e.shell_version.indexOf(t.versionNum);return!(-1===i&&-1===o&&-1===r||-1===n||!s)&&e}):e.robot_list},getHasDeviceGroupNameLen:function(){var e=0;for(var t in this.groupDeviceList)this.searchDeviceFilter(this.groupDeviceList[t]).length>0&&e++;return e},singleSelcet:function(e){var t=e.target.getAttribute("data-groupindex"),s=e.target.getAttribute("data-key"),a=this.searchDeviceFilter(this.groupDeviceList[t]);a[s].checked=e.target.checked,this.groupDeviceList[t].selectedLen||(this.groupDeviceList[t].selectedLen=0),e.target.checked?this.groupDeviceList[t].selectedLen++:this.groupDeviceList[t].selectedLen--,a.length===this.groupDeviceList[t].selectedLen?(this.groupDeviceList[t].groupDeviceAllSelect=!0,this.selectedGroupLen++):0===this.selectedGroupLen||e.target.checked||(this.groupDeviceList[t].groupDeviceAllSelect=!1,this.selectedGroupLen--),this.getHasDeviceGroupNameLen()===this.selectedGroupLen?this.allSelectCheckbox=!0:this.allSelectCheckbox=!1},allSelcet:function(e){var t=e.target.value,s=this.searchDeviceFilter(this.groupDeviceList[t]);for(var a in this.groupDeviceList[t].groupDeviceAllSelect=e.target.checked,s){s[a].checked=e.target.checked;var i=s[a].robot_id,o=this.selectedDeviceList.indexOf(i);e.target.checked?-1===o&&this.selectedDeviceList.push(i):this.selectedDeviceList.splice(o,1)}e.target.checked?(this.groupDeviceList[t].groupDeviceAllSelect=!0,this.selectedGroupLen++,this.groupDeviceList[t].selectedLen=s.length):0!==this.selectedGroupLen&&(this.groupDeviceList[t].groupDeviceAllSelect=!1,this.selectedGroupLen--,this.groupDeviceList[t].selectedLen=0),this.getHasDeviceGroupNameLen()===this.selectedGroupLen?this.allSelectCheckbox=!0:this.allSelectCheckbox=!1},selectCheckboxAll:function(e){if(this.selectedGroupLen=0,this.selectedDeviceList=[],e.target.checked&&(this.selectedGroupLen=this.getHasDeviceGroupNameLen(),0===this.selectedGroupLen))return!1;for(var t in this.groupDeviceList)for(var s in this.groupDeviceList[t].groupDeviceAllSelect=e.target.checked,this.groupDeviceList[t].selectedLen=0,this.searchDeviceFilter(this.groupDeviceList[t])){var a=this.searchDeviceFilter(this.groupDeviceList[t])[s];a.checked=e.target.checked,e.target.checked&&(this.groupDeviceList[t].selectedLen=this.groupDeviceList[t].selectedLen+1,this.selectedDeviceList.push(a.robot_id))}},updateGroupNameAfter:function(e){this.$forceUpdate(),this.$set(this.groupDeviceList[e.index],"process_group_alias",e.grouNameText)},geteditGroupName:function(e){this.editGroupName=e},getoldProcessgroupalias:function(e){this.oldProcessgroupalias=e},getoldUpdateGroupIndex:function(e){this.oldUpdateGroupIndex=e},serverResponse:function(e){var t=this;if(257===e.msg_type){var s={robot_id:e.robot_id,robot_mac:e.robot_mac,robot_host:e.robot_host,shell_time:e.shell_time,shell_version:e.shell_version,lock_status:e.lock_status,ntp_server:e.ntp_server},a={process_group:e.process_group,process_group_alias:"",robot_list:[{robot_id:e.robot_id,robot_mac:e.robot_mac,robot_host:e.robot_host,shell_time:e.shell_time,shell_version:e.shell_version,lock_status:e.lock_status,ntp_server:e.ntp_server}]},o=!1;for(var r in t.groupDeviceList)if(t.groupDeviceList[r].process_group===e.process_group){var n=!1;for(var c in t.groupDeviceList[r].robot_list)t.groupDeviceList[r].robot_list[c].robot_id===s.robot_id&&(n=!0);n||(t.groupDeviceList[r].robot_list.unshift(s),t.groupDeviceList[r].selectedLen===t.searchDeviceFilter(t.groupDeviceList[r]).length?(t.groupDeviceList[r].groupDeviceAllSelect||t.selectedGroupLen++,t.groupDeviceList[r].groupDeviceAllSelect=!0):t.selectedGroupLen>0&&(t.selectedGroupLen--,t.groupDeviceList[r].groupDeviceAllSelect=!1),t.getHasDeviceGroupNameLen()===t.selectedGroupLen?t.allSelectCheckbox=!0:t.allSelectCheckbox=!1),o=!0}if(!o){var l=i()({event:"event_query_alias",login_token:localStorage.getItem("login_token"),group_name:e.process_group});t.$api.post("/",l,function(s){var i=s;null===s?(i=e.process_group,t.groupDeviceList.push(a)):(i=s,a.process_group_alias=i,t.groupDeviceList.push(a)),t.getHasDeviceGroupNameLen()===t.selectedGroupLen&&t.selectedGroupLen>0?t.allSelectCheckbox=!0:t.allSelectCheckbox=!1,-1===t.allGroupNameList.indexOf(i)&&(t.allGroupNameList.push(i),t.$emit("groupNameList",t.allGroupNameList))})}t.sortDeviceComputed(),t.$emit("getOnlineDeviceInfo",e)}if(258===e.msg_type){for(var u in t.groupDeviceList)for(var p in t.groupDeviceList[u].robot_list)if(t.groupDeviceList[u].robot_list[p].robot_id===e.robot_id){for(var d in t.groupDeviceList[u].selectedLen>0&&t.groupDeviceList[u].robot_list[p].checked&&(t.groupDeviceList[u].selectedLen=t.groupDeviceList[u].selectedLen-1,t.selectedDeviceList.splice(t.selectedDeviceList.indexOf(e.robot_id),1)),t.groupDeviceList[u].robot_list.splice(p,1),t.groupDeviceList[u].selectedLen===t.groupDeviceList[u].robot_list.length?(t.groupDeviceList[u].groupDeviceAllSelect||t.selectedGroupLen++,t.groupDeviceList[u].groupDeviceAllSelect=!0):t.selectedGroupLen>0&&(t.groupDeviceList[u].groupDeviceAllSelect&&t.selectedGroupLen--,t.groupDeviceList[u].groupDeviceAllSelect=!1),t.groupDeviceList)if(0===t.groupDeviceList[d].robot_list.length){t.selectedGroupLen>0&&t.groupDeviceList[d].groupDeviceAllSelect&&t.selectedGroupLen--,t.allSelectCheckbox=!1;var h=t.groupDeviceList[d].process_group_alias;""===h&&(h=t.groupDeviceList[d].process_group),t.allGroupNameList.splice(t.allGroupNameList.indexOf(h),1),t.$emit("groupNameList",t.allGroupNameList),t.groupDeviceList.splice(d,1)}t.getHasDeviceGroupNameLen()===t.selectedGroupLen&&t.selectedGroupLen>0?t.allSelectCheckbox=!0:t.allSelectCheckbox=!1}t.$emit("onlineRobotList",t.groupDeviceList)}if(261===e.msg_type)for(var m in t.groupDeviceList)for(var g in t.groupDeviceList[m].robot_list)for(var f in e.data)t.groupDeviceList[m].robot_list[g].robot_id===e.data[f].robot_id&&0===e.data[f].error_code&&(t.groupDeviceList[m].robot_list[g].lock_status=e.data[f].opcode);if(264===e.msg_type)for(var v in console.log(e),t.cancelDeviceCheck(),t.groupDeviceList)for(var y in t.groupDeviceList[v].robot_list)for(var _ in e.data)t.groupDeviceList[v].robot_list[y].robot_id===e.data[_].robot_id&&0===e.data[_].error_code&&(t.groupDeviceList[v].robot_list[y].ntp_server=e.data[_].ntp_server)}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"groupDeviceComponent"},[s("label",{staticClass:"label-selectCheckboxAll",attrs:{for:"selectCheckboxAll"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.allSelectCheckbox,expression:"allSelectCheckbox"}],attrs:{type:"checkbox",id:"selectCheckboxAll"},domProps:{checked:Array.isArray(e.allSelectCheckbox)?e._i(e.allSelectCheckbox,null)>-1:e.allSelectCheckbox},on:{click:e.selectCheckboxAll,change:function(t){var s=e.allSelectCheckbox,a=t.target,i=!!a.checked;if(Array.isArray(s)){var o=e._i(s,null);a.checked?o<0&&(e.allSelectCheckbox=s.concat([null])):o>-1&&(e.allSelectCheckbox=s.slice(0,o).concat(s.slice(o+1)))}else e.allSelectCheckbox=i}}}),e._v(" "),s("span",[e._v("全选")]),e.selectedDeviceList.length>0?s("span",{staticClass:"selected-length"},[e._v("已勾选设备："+e._s(e.selectedDeviceList.length))]):e._e()]),e._v(" "),s("div",{staticClass:"scroll-view-common"},e._l(e.groupDeviceList,function(t,a){return t.process_group_alias===e.selectedGroup||""===e.selectedGroup||""===t.process_group_alias&&t.process_group===e.selectedGroup?s("div",{key:t.id,staticClass:"group-device"},[s("div",{class:e.searchDeviceFilter(t).length>0&&!t.shrink?"group-title group-title-active":"group-title"},[s("UpdateGroupName",{attrs:{searchDeviceFilter:e.searchDeviceFilter(t),groupList:t,groupIndex:a,allGroupNameList:e.allGroupNameList,originalGroupNameList:e.originalGroupNameList,editGroupName:e.editGroupName,oldProcessgroupalias:e.oldProcessgroupalias,oldUpdateGroupIndex:e.oldUpdateGroupIndex},on:{updateGroupNameAfter:e.updateGroupNameAfter,editGroupName:e.geteditGroupName,getoldProcessgroupalias:e.getoldProcessgroupalias,getoldUpdateGroupIndex:e.getoldUpdateGroupIndex}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:!t.shrink,expression:"!groupList.shrink"}],staticClass:"arrow",attrs:{src:"static/images/commonly/packet-expansion.png"},on:{click:function(t){e.shrinkDeviceList(a)}}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:t.shrink,expression:"groupList.shrink"}],staticClass:"arrow",attrs:{src:"static/images/commonly/packet-folding.png"},on:{click:function(t){e.shrinkDeviceList(a)}}})],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.shrink,expression:"!groupList.shrink"}],staticClass:"single-group-device"},[e.searchDeviceFilter(t).length>0?s("label",{staticClass:"label-selectCheckboxGroup"},[s("input",{staticClass:"selectCheckboxGroup",attrs:{type:"checkbox"},domProps:{value:a,checked:t.groupDeviceAllSelect},on:{click:e.allSelcet}}),e._v(" "),s("span",[e._v("全选")]),e._v(" "),s("i",{staticClass:"cover"}),e._v(" "),t.selectedLen>0?s("span",{staticClass:"selected-length"},[e._v("已勾选设备："+e._s(t.selectedLen))]):e._e()]):e._e(),e._v(" "),e.searchDeviceFilter(t).length>0?s("div",{staticClass:"group-list"},e._l(e.searchDeviceFilter(t),function(t,i){return s("div",{key:t.robot_id,staticClass:"device-item",attrs:{onselectstart:"return false"}},[s("div",{class:t.status?"device-name device-status-abnormal":"device-name"},[s("label",{staticClass:"label-select-device"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedDeviceList,expression:"selectedDeviceList"}],staticClass:"select-device",attrs:{type:"checkbox","data-key":i,"data-groupindex":a},domProps:{value:t.robot_id,checked:Array.isArray(e.selectedDeviceList)?e._i(e.selectedDeviceList,t.robot_id)>-1:e.selectedDeviceList},on:{click:e.singleSelcet,change:function(s){var a=e.selectedDeviceList,i=s.target,o=!!i.checked;if(Array.isArray(a)){var r=t.robot_id,n=e._i(a,r);i.checked?n<0&&(e.selectedDeviceList=a.concat([r])):n>-1&&(e.selectedDeviceList=a.slice(0,n).concat(a.slice(n+1)))}else e.selectedDeviceList=o}}}),e._v(" "),s("i",{staticClass:"cover"}),e._v(" "),s("span",{staticClass:"device-id"},[e._v(e._s(t.robot_id))])]),e._v(" "),"softwareupgrade"===e.pageName?s("div",{staticClass:"bar-box"},[s("span",{staticClass:"action-bar-device-item"},[s("span",{staticClass:"action-bar-device-update",attrs:{title:"一键更新"},on:{click:function(s){e.actionBarImplement("oneKeyUpdate",t)}}},[s("img",{attrs:{src:"static/images/software-upgrade/action-bar-upgrade.png"}})])]),e._v(" "),s("p",[e._v("IP地址："),s("span",{staticClass:"ip-address"},[e._v(e._s(t.robot_host))])]),e._v(" "),s("p",[e._v("软件版本："),s("span",{staticClass:"connection-length"},[e._v("V"+e._s(t.shell_version))])])]):e._e(),e._v(" "),"BaseConfig"===e.pageName?s("div",{staticClass:"bar-box"},[s("span",{staticClass:"action-bar-device-item"},[s("span",{directives:[{name:"show",rawName:"v-show",value:1===t.lock_status,expression:"item.lock_status === 1"}],staticClass:"action-bar-unlockandlock",attrs:{title:"解锁"},on:{click:function(s){e.actionBarImplement("unlockAndLock",t)}}},[s("img",{attrs:{src:"static/images/base-config/action-bar-lock.png"}})]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:0===t.lock_status,expression:"item.lock_status === 0"}],staticClass:"action-bar-unlockandlock",attrs:{title:"加锁"},on:{click:function(s){e.actionBarImplement("unlockAndLock",t)}}},[s("img",{attrs:{src:"static/images/base-config/action-bar-unlock.png"}})]),e._v(" "),s("span",{staticClass:"action-bar-backup",attrs:{title:"备份配置文件"},on:{click:function(s){e.actionBarImplement("backupConfigFile",t)}}},[s("img",{attrs:{src:"static/images/base-config/action-bar-backup.png"}})]),e._v(" "),s("span",{staticClass:"action-bar-changeNtp",attrs:{title:"更改NTP服务地址"},on:{click:function(s){e.actionBarImplement("changeNtp",t)}}},[s("img",{attrs:{src:"static/images/base-config/action-bar-ntp.png"}})])]),e._v(" "),s("p",[e._v("IP地址："),s("span",{staticClass:"ip-address"},[e._v(e._s(t.robot_host))])]),e._v(" "),s("p",[e._v("是否锁住："),s("span",{staticClass:"islock"},[e._v(e._s(0===t.lock_status?"否":"是"))])]),e._v(" "),s("p",[e._v("NTP服务地址："),s("span",{staticClass:"change-ntp-address"},[e._v(e._s(t.ntp_server))])])]):e._e(),e._v(" "),"BackupLogFile"===e.pageName?s("div",{staticClass:"bar-box"},[s("span",{staticClass:"action-bar-device-item"},[s("span",{staticClass:"action-bar-device-update",attrs:{title:"备份日志文件"},on:{click:function(s){e.actionBarImplement("BackupLogFile",t)}}},[s("img",{attrs:{src:"static/images/backup-log-file/action-bar-backuplogfile.png"}})])]),e._v(" "),s("p",[e._v("IP地址："),s("span",{staticClass:"ip-address"},[e._v(e._s(t.robot_host))])])]):e._e()])])})):e._e()])]):e._e()}))])},staticRenderFns:[]};var c=s("VU/8")(r,n,!1,function(e){s("48+p")},null,null);t.a=c.exports},QDzL:function(e,t){},R3Wd:function(e,t){},TWOx:function(e,t){},U1zl:function(e,t,s){"use strict";var a={name:"VueDatepickerLocalCalendar",props:{value:null,left:!1,right:!1},data:function(){var e=this.get(this.value);return{pre:"calendar",m:"D",showYears:!1,showMonths:!1,showHours:!1,showMinutes:!1,showSeconds:!1,year:e.year,month:e.month,day:e.day,hour:e.hour,minute:e.minute,second:e.second}},watch:{value:function(e){var t=this.get(e);this.year=t.year,this.month=t.month,this.day=t.day,this.hour=t.hour,this.minute=t.minute,this.second=t.second}},computed:{local:function(){return this.$parent.local},format:function(){return this.$parent.format},start:function(){return this.parse(this.$parent.dates[0])},end:function(){return this.parse(this.$parent.dates[1])},ys:function(){return 10*parseInt(this.year/10)},ye:function(){return this.ys+10},years:function(){for(var e=[],t=this.ys-1;e.length<12;)e.push(t++);return e},days:function(){var e=[],t=this.year,s=this.month,a=new Date(t,s,1),i=this.local.dow||7;a.setDate(0);for(var o=a.getDate(),r=a.getDay()||7,n=i<=r?r-i+1:r+(7-i+1);n>0;)e.push({i:o-n+1,y:s>0?t:t-1,m:s>0?s-1:11,p:!0}),n--;a.setMonth(a.getMonth()+2,0),o=a.getDate();var c=1;for(c=1;c<=o;c++)e.push({i:c,y:t,m:s});for(c=1;e.length<42;c++)e.push({i:c,y:s<11?t:t+1,m:s<11?s+1:0,n:!0});return e}},filters:{dd:function(e){return("0"+e).slice(-2)}},methods:{get:function(e){return{year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}},parse:function(e){return parseInt(e/1e3)},status:function(e,t,s,a,i,o,r){var n=new Date(e,t+1,0).getDate(),c=new Date(e,t,s>n?n:s,a,i,o),l=this.parse(c),u=this.$parent.tf,p={},d=!1;return d="YYYY"===r?e===this.year:"YYYYMM"===r?t===this.month:u(this.value,r)===u(c,r),p[this.pre+"-date"]=!0,p[this.pre+"-date-disabled"]=this.right&&l<this.start||this.left&&l>this.end||this.$parent.disabledDate(c,r),p[this.pre+"-date-on"]=this.left&&l>this.start||this.right&&l<this.end,p[this.pre+"-date-selected"]=d,p},nm:function(){this.month<11?this.month++:(this.month=0,this.year++)},pm:function(){this.month>0?this.month--:(this.month=11,this.year--)},is:function(e){return-1===e.target.className.indexOf(this.pre+"-date-disabled")},ok:function(e){var t="",s="";if(e&&e.n&&this.nm(),e&&e.p&&this.pm(),"h"===e){var a=this.get(this.value);t=a.year,s=a.month}this.$emit("input",new Date(t||this.year,s||this.month,this.day,this.hour,this.minute,this.second)),this.$parent.ok("h"===e)}},mounted:function(){var e=this,t=function(t){return-1!==e.format.indexOf(t)};t("s")&&t("m")&&(t("h")||t("H"))?e.m="H":t("D")?e.m="D":t("M")?(e.m="M",e.showMonths=!0):t("Y")&&(e.m="Y",e.showYears=!0)}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:""+e.pre},[s("div",{class:e.pre+"-head"},[s("a",{directives:[{name:"show",rawName:"v-show",value:e.showYears,expression:"showYears"}],class:e.pre+"-prev-decade-btn",on:{click:function(t){e.year-=10}}},[e._v("«")]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.showYears,expression:"!showYears"}],class:e.pre+"-prev-year-btn",on:{click:function(t){e.year--}}},[e._v("«")]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.showYears&&!e.showMonths,expression:"!showYears&&!showMonths"}],class:e.pre+"-prev-month-btn",on:{click:e.pm}},[e._v("‹")]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:e.showYears,expression:"showYears"}],class:e.pre+"-year-select"},[e._v(e._s(e.ys+"-"+e.ye))]),e._v(" "),e.local.yearSuffix?[s("a",{directives:[{name:"show",rawName:"v-show",value:!e.showYears,expression:"!showYears"}],class:e.pre+"-year-select",on:{click:function(t){e.showYears=!e.showYears}}},[e._v(e._s(e.year)+e._s(e.local.yearSuffix))]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.showYears&&!e.showMonths,expression:"!showYears&&!showMonths"}],class:e.pre+"-month-select",on:{click:function(t){e.showMonths=!e.showMonths}}},[e._v(e._s(e.local.monthsHead[e.month]))])]:[s("a",{directives:[{name:"show",rawName:"v-show",value:!e.showYears&&!e.showMonths,expression:"!showYears&&!showMonths"}],class:e.pre+"-month-select",on:{click:function(t){e.showMonths=!e.showMonths}}},[e._v(e._s(e.local.monthsHead[e.month]))]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.showYears,expression:"!showYears"}],class:e.pre+"-year-select",on:{click:function(t){e.showYears=!e.showYears}}},[e._v(e._s(e.year))])],e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.showYears&&!e.showMonths,expression:"!showYears&&!showMonths"}],class:e.pre+"-next-month-btn",on:{click:e.nm}},[e._v("›")]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:!e.showYears,expression:"!showYears"}],class:e.pre+"-next-year-btn",on:{click:function(t){e.year++}}},[e._v("»")]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:e.showYears,expression:"showYears"}],class:e.pre+"-next-decade-btn",on:{click:function(t){e.year+=10}}},[e._v("»")])],2),e._v(" "),s("div",{class:e.pre+"-body"},[s("div",{class:e.pre+"-days"},[e._l(e.local.weeks,function(t){return s("a",{key:t,class:e.pre+"-week"},[e._v(e._s(t))])}),e._v(" "),e._l(e.days,function(t,a){return s("a",{key:a,class:[t.p||t.n?e.pre+"-date-out":"",e.status(t.y,t.m,t.i,e.hour,e.minute,e.second,"YYYYMMDD")],on:{click:function(s){e.is(s)&&(e.day=t.i,e.ok(t))}}},[e._v(e._s(t.i))])})],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showMonths,expression:"showMonths"}],class:e.pre+"-months"},e._l(e.local.months,function(t,a){return s("a",{key:a,class:[e.status(e.year,a,e.day,e.hour,e.minute,e.second,"YYYYMM")],on:{click:function(t){e.is(t)&&(e.showMonths="M"===e.m,e.month=a,"M"===e.m&&e.ok())}}},[e._v(e._s(t))])})),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showYears,expression:"showYears"}],class:e.pre+"-years"},e._l(e.years,function(t,a){return s("a",{key:a,class:[0===a||11===a?e.pre+"-date-out":"",e.status(t,e.month,e.day,e.hour,e.minute,e.second,"YYYY")],on:{click:function(s){e.is(s)&&(e.showYears="Y"===e.m,e.year=t,"Y"===e.m&&e.ok())}}},[e._v(e._s(t))])})),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showHours,expression:"showHours"}],class:e.pre+"-hours"},[s("div",{class:e.pre+"-title"},[e._v(e._s(e.local.hourTip))]),e._v(" "),e._l(24,function(t,a){return s("a",{key:a,class:[e.status(e.year,e.month,e.day,a,e.minute,e.second,"YYYYMMDDHH")],on:{click:function(t){e.is(t)&&(e.showHours=!1,e.hour=a,e.ok("h"))}}},[e._v(e._s(a))])})],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showMinutes,expression:"showMinutes"}],class:e.pre+"-minutes"},[s("div",{class:e.pre+"-title"},[e._v(e._s(e.local.minuteTip))]),e._v(" "),e._l(60,function(t,a){return s("a",{key:a,class:[e.status(e.year,e.month,e.day,e.hour,a,e.second,"YYYYMMDDHHmm")],on:{click:function(t){e.is(t)&&(e.showMinutes=!1,e.minute=a,e.ok("h"))}}},[e._v(e._s(a))])})],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showSeconds,expression:"showSeconds"}],class:e.pre+"-seconds"},[s("div",{class:e.pre+"-title"},[e._v(e._s(e.local.secondTip))]),e._v(" "),e._l(60,function(t,a){return s("a",{key:a,class:[e.status(e.year,e.month,e.day,e.hour,e.minute,a,"YYYYMMDDHHmmss")],on:{click:function(t){e.is(t)&&(e.showSeconds=!1,e.second=a,e.ok("h"))}}},[e._v(e._s(a))])})],2)]),e._v(" "),"H"===e.m?s("div",{class:e.pre+"-foot"},[s("div",{class:e.pre+"-hour"},[s("a",{class:{on:e.showHours},attrs:{title:e.local.hourTip},on:{click:function(t){e.showHours=!e.showHours,e.showMinutes=e.showSeconds=!1}}},[e._v(e._s(e._f("dd")(e.hour)))]),e._v(" "),s("span",[e._v(":")]),e._v(" "),s("a",{class:{on:e.showMinutes},attrs:{title:e.local.minuteTip},on:{click:function(t){e.showMinutes=!e.showMinutes,e.showHours=e.showSeconds=!1}}},[e._v(e._s(e._f("dd")(e.minute)))]),e._v(" "),s("span",[e._v(":")]),e._v(" "),s("a",{class:{on:e.showSeconds},attrs:{title:e.local.secondTip},on:{click:function(t){e.showSeconds=!e.showSeconds,e.showHours=e.showMinutes=!1}}},[e._v(e._s(e._f("dd")(e.second)))])])]):e._e()])},staticRenderFns:[]};var o={name:"VueDatepickerLocal",components:{VueDatepickerLocalCalendar:s("VU/8")(a,i,!1,function(e){s("JXNQ")},null,null).exports},props:{name:[String],inputClass:[String],popupClass:[String],value:[Date,Array,String],disabled:[Boolean],type:{type:String,default:"normal"},rangeSeparator:{type:String,default:"~"},clearable:{type:Boolean,default:!1},placeholder:[String],disabledDate:{type:Function,default:function(){return!1}},format:{type:String,default:"YYYY-MM-DD"},local:{type:Object,default:function(){return{dow:1,hourTip:"选择小时",minuteTip:"选择分钟",secondTip:"选择秒数",yearSuffix:"年",monthsHead:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),weeks:"一_二_三_四_五_六_日".split("_"),cancelTip:"取消",submitTip:"确定"}}},showButtons:{type:Boolean,default:!1},dateRangeSelect:[Function]},data:function(){return{show:!1,dates:this.vi(this.value)}},computed:{range:function(){return 2===this.dates.length},text:function(){var e=this,t=this.value,s=this.dates.map(function(t){return e.tf(t)}).join(" "+this.rangeSeparator+" ");return Array.isArray(t)?t.length>1?s:"":t?s:""}},watch:{value:function(e){this.dates=this.vi(this.value)}},methods:{get:function(){return Array.isArray(this.value)?this.dates:this.dates[0]},cls:function(){this.$emit("input",this.range?[]:"")},vi:function(e){return Array.isArray(e)?e.length>1?e.map(function(e){return new Date(e)}):[new Date,new Date]:e?new Array(new Date(e)):[new Date]},ok:function(e){var t=this;t.$emit("input",t.get()),!e&&!t.showButtons&&setTimeout(function(){t.show=t.range})},tf:function(e,t){var s=e.getFullYear(),a=e.getMonth(),i=e.getDate(),o=e.getHours(),r=o%12==0?12:o%12,n=e.getMinutes(),c=e.getSeconds(),l=e.getMilliseconds(),u=function(e){return("0"+e).slice(-2)},p={YYYY:s,MM:u(a+1),MMM:this.local.months[a],MMMM:this.local.monthsHead[a],M:a+1,DD:u(i),D:i,HH:u(o),H:o,hh:u(r),h:r,mm:u(n),m:n,ss:u(c),s:c,S:l};return(t||this.format).replace(/Y+|M+|D+|H+|h+|m+|s+|S+/g,function(e){return p[e]})},dc:function(e){this.show=this.$el.contains(e.target)&&!this.disabled},submit:function(){this.$emit("confirm",this.get()),this.show=!1},cancel:function(){this.show=!1}},mounted:function(){document.addEventListener("click",this.dc,!0)},beforeDestroy:function(){document.removeEventListener("click",this.dc,!0)}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"datepicker",class:{"datepicker-range":e.range,datepicker__clearable:e.clearable&&e.text&&!e.disabled}},["inline"!==e.type?s("input",{class:[e.show?"focus":"",e.inputClass],attrs:{readonly:"",disabled:e.disabled,placeholder:e.placeholder,name:e.name},domProps:{value:e.text}}):e._e(),e._v(" "),s("a",{staticClass:"datepicker-close",on:{click:function(t){return t.stopPropagation(),e.cls(t)}}}),e._v(" "),s("transition",{attrs:{name:"datepicker-anim"}},[e.show||"inline"===e.type?s("div",{staticClass:"datepicker-popup",class:[e.popupClass,{"datepicker-inline":"inline"===e.type}],attrs:{tabindex:"-1"}},[e.range?[s("vue-datepicker-local-calendar",{attrs:{left:!0},model:{value:e.dates[0],callback:function(t){e.$set(e.dates,0,t)},expression:"dates[0]"}}),e._v(" "),s("vue-datepicker-local-calendar",{attrs:{right:!0},model:{value:e.dates[1],callback:function(t){e.$set(e.dates,1,t)},expression:"dates[1]"}})]:[s("vue-datepicker-local-calendar",{model:{value:e.dates[0],callback:function(t){e.$set(e.dates,0,t)},expression:"dates[0]"}})],e._v(" "),e.showButtons?s("div",{staticClass:"datepicker__buttons"},[s("button",{staticClass:"datepicker__button-cancel",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.cancel(t)}}},[e._v(e._s(this.local.cancelTip))]),e._v(" "),s("button",{staticClass:"datepicker__button-select",on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.submit(t)}}},[e._v(e._s(this.local.submitTip))])]):e._e()],2):e._e()])],1)},staticRenderFns:[]};var n=s("VU/8")(o,r,!1,function(e){s("mAuQ")},null,null);t.a=n.exports},"W+O9":function(e,t){},"WjA+":function(e,t,s){var a;a=function(){return function(e){var t={};function s(a){if(t[a])return t[a].exports;var i=t[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}return s.m=e,s.c=t,s.p="",s(0)}([function(e,t,s){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=s(1),o=s(6),r=s(13),n=s(3)("socket.io-client");e.exports=t=l;var c=t.managers={};function l(e,t){"object"===(void 0===e?"undefined":a(e))&&(t=e,e=void 0),t=t||{};var s,o=i(e),l=o.source,u=o.id,p=o.path,d=c[u]&&p in c[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(n("ignoring socket cache for %s",l),s=r(l,t)):(c[u]||(n("new io instance for %s",l),c[u]=r(l,t)),s=c[u]),o.query&&!t.query?t.query=o.query:t&&"object"===a(t.query)&&(t.query=function(e){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t.join("&")}(t.query)),s.socket(o.path,t)}t.protocol=o.protocol,t.connect=l,t.Manager=s(13),t.Socket=s(40)},function(e,t,s){(function(t){"use strict";var a=s(2),i=s(3)("socket.io-client:url");e.exports=function(e,s){var o=e;s=s||t.location,null==e&&(e=s.protocol+"//"+s.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?s.protocol+e:s.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==s?s.protocol+"//"+e:"https://"+e),i("parse %s",e),o=a(e));o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443"));o.path=o.path||"/";var r=-1!==o.host.indexOf(":")?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+r+":"+o.port,o.href=o.protocol+"://"+r+(s&&s.port===o.port?"":":"+o.port),o}}).call(t,function(){return this}())},function(e,t){var s=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,a=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var r=s.exec(e||""),n={},c=14;c--;)n[a[c]]=r[c]||"";return-1!=i&&-1!=o&&(n.source=t,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n}},function(e,t,s){function a(){var e;try{e=t.storage.debug}catch(e){}return e}(t=e.exports=s(4)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(){var e=arguments,s=this.useColors;if(e[0]=(s?"%c":"")+this.namespace+(s?" %c":" ")+e[0]+(s?"%c ":" ")+"+"+t.humanize(this.diff),!s)return e;var a="color: "+this.color,i=0,o=0;return(e=[e[0],a,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++i)}),e.splice(o,0,a),e},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=a,t.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(a())},function(e,t,s){(t=e.exports=function(e){function s(){}function o(){var e=o,s=+new Date,r=s-(a||s);e.diff=r,e.prev=a,e.curr=s,a=s,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=t.colors[i++%t.colors.length]);var n=Array.prototype.slice.call(arguments);n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&(n=["%o"].concat(n));var c=0;n[0]=n[0].replace(/%([a-z%])/g,function(s,a){if("%%"===s)return s;c++;var i=t.formatters[a];if("function"==typeof i){var o=n[c];s=i.call(e,o),n.splice(c,1),c--}return s}),"function"==typeof t.formatArgs&&(n=t.formatArgs.apply(e,n));var l=o.log||t.log||console.log.bind(console);l.apply(e,n)}s.enabled=!1,o.enabled=!0;var r=t.enabled(e)?o:s;return r.namespace=e,r}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e);for(var s=(e||"").split(/[\s,]+/),a=s.length,i=0;i<a;i++)s[i]&&("-"===(e=s[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var s,a;for(s=0,a=t.skips.length;s<a;s++)if(t.skips[s].test(e))return!1;for(s=0,a=t.names.length;s<a;s++)if(t.names[s].test(e))return!0;return!1},t.humanize=s(5),t.names=[],t.skips=[],t.formatters={};var a,i=0},function(e,t){var s=1e3,a=60*s,i=60*a,o=24*i,r=365.25*o;function n(e,t,s){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+s:Math.ceil(e/t)+" "+s+"s"}e.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){if((e=""+e).length>1e4)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*r;case"days":case"day":case"d":return n*o;case"hours":case"hour":case"hrs":case"hr":case"h":return n*i;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}(e):t.long?n(c=e,o,"day")||n(c,i,"hour")||n(c,a,"minute")||n(c,s,"second")||c+" ms":function(e){return e>=o?Math.round(e/o)+"d":e>=i?Math.round(e/i)+"h":e>=a?Math.round(e/a)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}(e);var c}},function(e,t,s){var a=s(3)("socket.io-parser"),i=s(7),o=(s(9),s(10)),r=s(11),n=s(12);function c(){}function l(e){var s="",o=!1;return s+=e.type,t.BINARY_EVENT!=e.type&&t.BINARY_ACK!=e.type||(s+=e.attachments,s+="-"),e.nsp&&"/"!=e.nsp&&(o=!0,s+=e.nsp),null!=e.id&&(o&&(s+=",",o=!1),s+=e.id),null!=e.data&&(o&&(s+=","),s+=i.stringify(e.data)),a("encoded %j as %s",e,s),s}function u(){this.reconstructor=null}function p(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:t.ERROR,data:"parser error"}}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=u,c.prototype.encode=function(e,s){(a("encoding packet %j",e),t.BINARY_EVENT==e.type||t.BINARY_ACK==e.type)?function(e,t){r.removeBlobs(e,function(e){var s=r.deconstructPacket(e),a=l(s.packet),i=s.buffers;i.unshift(a),t(i)})}(e,s):s([l(e)])},o(u.prototype),u.prototype.add=function(e){var s;if("string"==typeof e)s=function(e){var s={},o=0;if(s.type=Number(e.charAt(0)),null==t.types[s.type])return d();if(t.BINARY_EVENT==s.type||t.BINARY_ACK==s.type){for(var r="";"-"!=e.charAt(++o)&&(r+=e.charAt(o),o!=e.length););if(r!=Number(r)||"-"!=e.charAt(o))throw new Error("Illegal attachments");s.attachments=Number(r)}if("/"==e.charAt(o+1))for(s.nsp="";++o;){var n=e.charAt(o);if(","==n)break;if(s.nsp+=n,o==e.length)break}else s.nsp="/";var c=e.charAt(o+1);if(""!==c&&Number(c)==c){for(s.id="";++o;){var n=e.charAt(o);if(null==n||Number(n)!=n){--o;break}if(s.id+=e.charAt(o),o==e.length)break}s.id=Number(s.id)}if(e.charAt(++o))try{s.data=i.parse(e.substr(o))}catch(e){return d()}return a("decoded %s as %j",e,s),s}(e),t.BINARY_EVENT==s.type||t.BINARY_ACK==s.type?(this.reconstructor=new p(s),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",s)):this.emit("decoded",s);else{if(!n(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(s=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",s))}},u.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=r.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,s){(function(e,s){(function(){var a={function:!0,object:!0},i=a[typeof t]&&t&&!t.nodeType&&t,o=a[typeof window]&&window||this,r=i&&a[typeof e]&&e&&!e.nodeType&&"object"==typeof s&&s;function n(e,t){e||(e=o.Object()),t||(t=o.Object());var s=e.Number||o.Number,i=e.String||o.String,r=e.Object||o.Object,c=e.Date||o.Date,l=e.SyntaxError||o.SyntaxError,u=e.TypeError||o.TypeError,p=e.Math||o.Math,d=e.JSON||o.JSON;"object"==typeof d&&d&&(t.stringify=d.stringify,t.parse=d.parse);var h,m,g,f=r.prototype,v=f.toString,y=new c(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(e){}function _(e){if(_[e]!==g)return _[e];var a;if("bug-string-char-index"==e)a="a"!="a"[0];else if("json"==e)a=_("json-stringify")&&_("json-parse");else{var o,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var n=t.stringify,l="function"==typeof n&&y;if(l){(o=function(){return 1}).toJSON=o;try{l="0"===n(0)&&"0"===n(new s)&&'""'==n(new i)&&n(v)===g&&n(g)===g&&n()===g&&"1"===n(o)&&"[1]"==n([o])&&"[null]"==n([g])&&"null"==n(null)&&"[null,null,null]"==n([g,v,null])&&n({a:[o,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===n(null,o)&&"[\n 1,\n 2\n]"==n([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==n(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==n(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==n(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==n(new c(-1))}catch(e){l=!1}}a=l}if("json-parse"==e){var u=t.parse;if("function"==typeof u)try{if(0===u("0")&&!u(!1)){var p=5==(o=u(r)).a.length&&1===o.a[0];if(p){try{p=!u('"\t"')}catch(e){}if(p)try{p=1!==u("01")}catch(e){}if(p)try{p=1!==u("1.")}catch(e){}}}}catch(e){p=!1}a=p}}return _[e]=!!a}if(!_("json")){var w=_("bug-string-char-index");if(!y)var b=p.floor,k=[0,31,59,90,120,151,181,212,243,273,304,334],S=function(e,t){return k[t]+365*(e-1970)+b((e-1969+(t=+(t>1)))/4)-b((e-1901+t)/100)+b((e-1601+t)/400)};if((h=f.hasOwnProperty)||(h=function(e){var t,s={};return(s.__proto__=null,s.__proto__={toString:1},s).toString!=v?h=function(e){var t=this.__proto__,s=e in(this.__proto__=null,this);return this.__proto__=t,s}:(t=s.constructor,h=function(e){var s=(this.constructor||t).prototype;return e in this&&!(e in s&&this[e]===s[e])}),s=null,h.call(this,e)}),m=function(e,t){var s,i,o,r=0;for(o in(s=function(){this.valueOf=0}).prototype.valueOf=0,i=new s)h.call(i,o)&&r++;return s=i=null,r?m=2==r?function(e,t){var s,a={},i="[object Function]"==v.call(e);for(s in e)i&&"prototype"==s||h.call(a,s)||!(a[s]=1)||!h.call(e,s)||t(s)}:function(e,t){var s,a,i="[object Function]"==v.call(e);for(s in e)i&&"prototype"==s||!h.call(e,s)||(a="constructor"===s)||t(s);(a||h.call(e,s="constructor"))&&t(s)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var s,o,r="[object Function]"==v.call(e),n=!r&&"function"!=typeof e.constructor&&a[typeof e.hasOwnProperty]&&e.hasOwnProperty||h;for(s in e)r&&"prototype"==s||!n.call(e,s)||t(s);for(o=i.length;s=i[--o];n.call(e,s)&&t(s));}),m(e,t)},!_("json-stringify")){var D={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},L=function(e,t){return("000000"+(t||0)).slice(-e)},x=function(e){for(var t='"',s=0,a=e.length,i=!w||a>10,o=i&&(w?e.split(""):e);s<a;s++){var r=e.charCodeAt(s);switch(r){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=D[r];break;default:if(r<32){t+="\\u00"+L(2,r.toString(16));break}t+=i?o[s]:e.charAt(s)}}return t+'"'},C=function(e,t,s,a,i,o,r){var n,c,l,p,d,f,y,_,w,k,D,I,N,$,T,A;try{n=t[e]}catch(e){}if("object"==typeof n&&n)if("[object Date]"!=(c=v.call(n))||h.call(n,"toJSON"))"function"==typeof n.toJSON&&("[object Number]"!=c&&"[object String]"!=c&&"[object Array]"!=c||h.call(n,"toJSON"))&&(n=n.toJSON(e));else if(n>-1/0&&n<1/0){if(S){for(d=b(n/864e5),l=b(d/365.2425)+1970-1;S(l+1,0)<=d;l++);for(p=b((d-S(l,0))/30.42);S(l,p+1)<=d;p++);d=1+d-S(l,p),y=b((f=(n%864e5+864e5)%864e5)/36e5)%24,_=b(f/6e4)%60,w=b(f/1e3)%60,k=f%1e3}else l=n.getUTCFullYear(),p=n.getUTCMonth(),d=n.getUTCDate(),y=n.getUTCHours(),_=n.getUTCMinutes(),w=n.getUTCSeconds(),k=n.getUTCMilliseconds();n=(l<=0||l>=1e4?(l<0?"-":"+")+L(6,l<0?-l:l):L(4,l))+"-"+L(2,p+1)+"-"+L(2,d)+"T"+L(2,y)+":"+L(2,_)+":"+L(2,w)+"."+L(3,k)+"Z"}else n=null;if(s&&(n=s.call(t,e,n)),null===n)return"null";if("[object Boolean]"==(c=v.call(n)))return""+n;if("[object Number]"==c)return n>-1/0&&n<1/0?""+n:"null";if("[object String]"==c)return x(""+n);if("object"==typeof n){for($=r.length;$--;)if(r[$]===n)throw u();if(r.push(n),D=[],T=o,o+=i,"[object Array]"==c){for(N=0,$=n.length;N<$;N++)I=C(N,n,s,a,i,o,r),D.push(I===g?"null":I);A=D.length?i?"[\n"+o+D.join(",\n"+o)+"\n"+T+"]":"["+D.join(",")+"]":"[]"}else m(a||n,function(e){var t=C(e,n,s,a,i,o,r);t!==g&&D.push(x(e)+":"+(i?" ":"")+t)}),A=D.length?i?"{\n"+o+D.join(",\n"+o)+"\n"+T+"}":"{"+D.join(",")+"}":"{}";return r.pop(),A}};t.stringify=function(e,t,s){var i,o,r,n;if(a[typeof t]&&t)if("[object Function]"==(n=v.call(t)))o=t;else if("[object Array]"==n){r={};for(var c,l=0,u=t.length;l<u;c=t[l++],("[object String]"==(n=v.call(c))||"[object Number]"==n)&&(r[c]=1));}if(s)if("[object Number]"==(n=v.call(s))){if((s-=s%1)>0)for(i="",s>10&&(s=10);i.length<s;i+=" ");}else"[object String]"==n&&(i=s.length<=10?s:s.slice(0,10));return C("",((c={})[""]=e,c),o,r,i,"",[])}}if(!_("json-parse")){var I,N,$=i.fromCharCode,T={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},A=function(){throw I=N=null,l()},P=function(){for(var e,t,s,a,i,o=N,r=o.length;I<r;)switch(i=o.charCodeAt(I)){case 9:case 10:case 13:case 32:I++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=w?o.charAt(I):o[I],I++,e;case 34:for(e="@",I++;I<r;)if((i=o.charCodeAt(I))<32)A();else if(92==i)switch(i=o.charCodeAt(++I)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=T[i],I++;break;case 117:for(t=++I,s=I+4;I<s;I++)(i=o.charCodeAt(I))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||A();e+=$("0x"+o.slice(t,I));break;default:A()}else{if(34==i)break;for(i=o.charCodeAt(I),t=I;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++I);e+=o.slice(t,I)}if(34==o.charCodeAt(I))return I++,e;A();default:if(t=I,45==i&&(a=!0,i=o.charCodeAt(++I)),i>=48&&i<=57){for(48==i&&((i=o.charCodeAt(I+1))>=48&&i<=57)&&A(),a=!1;I<r&&((i=o.charCodeAt(I))>=48&&i<=57);I++);if(46==o.charCodeAt(I)){for(s=++I;s<r&&((i=o.charCodeAt(s))>=48&&i<=57);s++);s==I&&A(),I=s}if(101==(i=o.charCodeAt(I))||69==i){for(43!=(i=o.charCodeAt(++I))&&45!=i||I++,s=I;s<r&&((i=o.charCodeAt(s))>=48&&i<=57);s++);s==I&&A(),I=s}return+o.slice(t,I)}if(a&&A(),"true"==o.slice(I,I+4))return I+=4,!0;if("false"==o.slice(I,I+5))return I+=5,!1;if("null"==o.slice(I,I+4))return I+=4,null;A()}return"$"},E=function(e){var t,s;if("$"==e&&A(),"string"==typeof e){if("@"==(w?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=P());s||(s=!0))s&&(","==e?"]"==(e=P())&&A():A()),","==e&&A(),t.push(E(e));return t}if("{"==e){for(t={};"}"!=(e=P());s||(s=!0))s&&(","==e?"}"==(e=P())&&A():A()),","!=e&&"string"==typeof e&&"@"==(w?e.charAt(0):e[0])&&":"==P()||A(),t[e.slice(1)]=E(P());return t}A()}return e},U=function(e,t,s){var a=M(e,t,s);a===g?delete e[t]:e[t]=a},M=function(e,t,s){var a,i=e[t];if("object"==typeof i&&i)if("[object Array]"==v.call(i))for(a=i.length;a--;)U(i,a,s);else m(i,function(e){U(i,e,s)});return s.call(e,t,i)};t.parse=function(e,t){var s,a;return I=0,N=""+e,s=E(P()),"$"!=P()&&A(),I=N=null,t&&"[object Function]"==v.call(t)?M(((a={})[""]=s,a),"",t):s}}}return t.runInContext=n,t}if(!r||r.global!==r&&r.window!==r&&r.self!==r||(o=r),i)n(o,i);else{var c=o.JSON,l=o.JSON3,u=!1,p=n(o,o.JSON3={noConflict:function(){return u||(u=!0,o.JSON=c,o.JSON3=l,c=l=null),p}});o.JSON={parse:p.parse,stringify:p.stringify}}}).call(this)}).call(t,s(8)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t){function s(e){if(e)return function(e){for(var t in s.prototype)e[t]=s.prototype[t];return e}(e)}e.exports=s,s.prototype.on=s.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},s.prototype.once=function(e,t){var s=this;function a(){s.off(e,a),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},a.fn=t,this.on(e,a),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,a=this._callbacks[e];if(!a)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<a.length;i++)if((s=a[i])===t||s.fn===t){a.splice(i,1);break}return this},s.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),s=this._callbacks[e];if(s)for(var a=0,i=(s=s.slice(0)).length;a<i;++a)s[a].apply(this,t);return this},s.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},s.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,s){(function(e){var a=s(9),i=s(12);t.deconstructPacket=function(e){var t=[],s=e.data;var o=e;return o.data=function e(s){if(!s)return s;if(i(s)){var o={_placeholder:!0,num:t.length};return t.push(s),o}if(a(s)){for(var r=new Array(s.length),n=0;n<s.length;n++)r[n]=e(s[n]);return r}if("object"==typeof s&&!(s instanceof Date)){for(var c in r={},s)r[c]=e(s[c]);return r}return s}(s),o.attachments=t.length,{packet:o,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(s){if(s&&s._placeholder)return t[s.num];if(a(s)){for(var i=0;i<s.length;i++)s[i]=e(s[i]);return s}if(s&&"object"==typeof s){for(var o in s)s[o]=e(s[o]);return s}return s}(e.data),e.attachments=void 0,e},t.removeBlobs=function(t,s){var o=0,r=t;!function t(n,c,l){if(!n)return n;if(e.Blob&&n instanceof Blob||e.File&&n instanceof File){o++;var u=new FileReader;u.onload=function(){l?l[c]=this.result:r=this.result,--o||s(r)},u.readAsArrayBuffer(n)}else if(a(n))for(var p=0;p<n.length;p++)t(n[p],p,n);else if(n&&"object"==typeof n&&!i(n))for(var d in n)t(n[d],d,n)}(r),o||s(r)}}).call(t,function(){return this}())},function(e,t){(function(t){e.exports=function(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}}).call(t,function(){return this}())},function(e,t,s){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=s(14),o=s(40),r=s(41),n=s(6),c=s(43),l=s(44),u=s(3)("socket.io-client:manager"),p=s(38),d=s(46),h=Object.prototype.hasOwnProperty;function m(e,t){if(!(this instanceof m))return new m(e,t);e&&"object"===(void 0===e?"undefined":a(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=m,m.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},m.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.engine.id)},r(m.prototype),m.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},m.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},m.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},m.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},m.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},m.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},m.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},m.prototype.open=m.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=i(this.uri,this.opts);var s=this.engine,a=this;this.readyState="opening",this.skipReconnect=!1;var o=c(s,"open",function(){a.onopen(),e&&e()}),r=c(s,"error",function(t){if(u("connect_error"),a.cleanup(),a.readyState="closed",a.emitAll("connect_error",t),e){var s=new Error("Connection error");s.data=t,e(s)}else a.maybeReconnectOnOpen()});if(!1!==this._timeout){var n=this._timeout;u("connect attempt will timeout after %d",n);var l=setTimeout(function(){u("connect attempt timed out after %d",n),o.destroy(),s.close(),s.emit("error","timeout"),a.emitAll("connect_timeout",n)},n);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(o),this.subs.push(r),this},m.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(c(e,"data",l(this,"ondata"))),this.subs.push(c(e,"ping",l(this,"onping"))),this.subs.push(c(e,"pong",l(this,"onpong"))),this.subs.push(c(e,"error",l(this,"onerror"))),this.subs.push(c(e,"close",l(this,"onclose"))),this.subs.push(c(this.decoder,"decoded",l(this,"ondecoded")))},m.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},m.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},m.prototype.ondata=function(e){this.decoder.add(e)},m.prototype.ondecoded=function(e){this.emit("packet",e)},m.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},m.prototype.socket=function(e,t){var s=this.nsps[e];if(!s){s=new o(this,e,t),this.nsps[e]=s;var a=this;s.on("connecting",i),s.on("connect",function(){s.id=a.engine.id}),this.autoConnect&&i()}function i(){~p(a.connecting,s)||a.connecting.push(s)}return s},m.prototype.destroy=function(e){var t=p(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},m.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(s){for(var a=0;a<s.length;a++)t.engine.write(s[a],e.options);t.encoding=!1,t.processPacketQueue()}))},m.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},m.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},m.prototype.close=m.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},m.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},m.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var s=setTimeout(function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(s)}})}},m.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,s){e.exports=s(15)},function(e,t,s){e.exports=s(16),e.exports.parser=s(23)},function(e,t,s){(function(t){var a=s(17),i=s(31),o=s(3)("engine.io-client:socket"),r=s(38),n=s(23),c=s(2),l=s(39),u=s(32);function p(e,s){if(!(this instanceof p))return new p(e,s);s=s||{},e&&"object"==typeof e&&(s=e,e=null),e?(e=c(e),s.hostname=e.host,s.secure="https"===e.protocol||"wss"===e.protocol,s.port=e.port,e.query&&(s.query=e.query)):s.host&&(s.hostname=c(s.host).host),this.secure=null!=s.secure?s.secure:t.location&&"https:"===location.protocol,s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.agent=s.agent||!1,this.hostname=s.hostname||(t.location?location.hostname:"localhost"),this.port=s.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=s.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==s.upgrade,this.path=(s.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!s.forceJSONP,this.jsonp=!1!==s.jsonp,this.forceBase64=!!s.forceBase64,this.enablesXDR=!!s.enablesXDR,this.timestampParam=s.timestampParam||"t",this.timestampRequests=s.timestampRequests,this.transports=s.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=s.policyPort||843,this.rememberUpgrade=s.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=s.onlyBinaryUpgrades,this.perMessageDeflate=!1!==s.perMessageDeflate&&(s.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=s.pfx||null,this.key=s.key||null,this.passphrase=s.passphrase||null,this.cert=s.cert||null,this.ca=s.ca||null,this.ciphers=s.ciphers||null,this.rejectUnauthorized=void 0===s.rejectUnauthorized?null:s.rejectUnauthorized;var a="object"==typeof t&&t;a.global===a&&s.extraHeaders&&Object.keys(s.extraHeaders).length>0&&(this.extraHeaders=s.extraHeaders),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=p,p.priorWebsocketSuccess=!1,i(p.prototype),p.protocol=n.protocol,p.Socket=p,p.Transport=s(22),p.transports=s(17),p.parser=s(23),p.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=function(e){var t={};for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}(this.query);return t.EIO=n.protocol,t.transport=e,this.id&&(t.sid=this.id),new a[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders})},p.prototype.open=function(){var e;if(this.rememberUpgrade&&p.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},p.prototype.setTransport=function(e){o("setting transport %s",e.name);var t=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},p.prototype.probe=function(e){o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),s=!1,a=this;function i(){if(a.onlyBinaryUpgrades){var i=!this.supportsBinary&&a.transport.supportsBinary;s=s||i}s||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(i){if(!s)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',e),a.upgrading=!0,a.emit("upgrading",t),!t)return;p.priorWebsocketSuccess="websocket"===t.name,o('pausing current transport "%s"',a.transport.name),a.transport.pause(function(){s||"closed"!==a.readyState&&(o("changing transport and sending upgrade packet"),d(),a.setTransport(t),t.send([{type:"upgrade"}]),a.emit("upgrade",t),t=null,a.upgrading=!1,a.flush())})}else{o('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=t.name,a.emit("upgradeError",r)}}))}function r(){s||(s=!0,d(),t.close(),t=null)}function n(s){var i=new Error("probe error: "+s);i.transport=t.name,r(),o('probe transport "%s" failed because of error: %s',e,s),a.emit("upgradeError",i)}function c(){n("transport closed")}function l(){n("socket closed")}function u(e){t&&e.name!==t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),r())}function d(){t.removeListener("open",i),t.removeListener("error",n),t.removeListener("close",c),a.removeListener("close",l),a.removeListener("upgrading",u)}p.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",n),t.once("close",c),this.once("close",l),this.once("upgrading",u),t.open()},p.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",p.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},p.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(l(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)},p.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},p.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},p.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},p.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},p.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},p.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},p.prototype.write=p.prototype.send=function(e,t,s){return this.sendPacket("message",e,t,s),this},p.prototype.sendPacket=function(e,t,s,a){if("function"==typeof t&&(a=t,t=void 0),"function"==typeof s&&(a=s,s=null),"closing"!==this.readyState&&"closed"!==this.readyState){(s=s||{}).compress=!1!==s.compress;var i={type:e,data:t,options:s};this.emit("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}},p.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?a():t()}):this.upgrading?a():t()}function t(){e.onClose("forced close"),o("socket closing - telling transport to close"),e.transport.close()}function s(){e.removeListener("upgrade",s),e.removeListener("upgradeError",s),t()}function a(){e.once("upgrade",s),e.once("upgradeError",s)}return this},p.prototype.onError=function(e){o("socket error %j",e),p.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},p.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){o('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},p.prototype.filterUpgrades=function(e){for(var t=[],s=0,a=e.length;s<a;s++)~r(this.transports,e[s])&&t.push(e[s]);return t}}).call(t,function(){return this}())},function(e,t,s){(function(e){var a=s(18),i=s(20),o=s(35),r=s(36);t.polling=function(t){var s=!1,r=!1,n=!1!==t.jsonp;if(e.location){var c="https:"===location.protocol,l=location.port;l||(l=c?443:80),s=t.hostname!==location.hostname||l!==t.port,r=t.secure!==c}if(t.xdomain=s,t.xscheme=r,"open"in new a(t)&&!t.forceJSONP)return new i(t);if(!n)throw new Error("JSONP disabled");return new o(t)},t.websocket=r}).call(t,function(){return this}())},function(e,t,s){var a=s(19);e.exports=function(e){var t=e.xdomain,s=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||a))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!s&&i)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,s){(function(t){var a=s(18),i=s(21),o=s(31),r=s(33),n=s(3)("engine.io-client:polling-xhr");function c(){}function l(e){if(i.call(this,e),t.location){var s="https:"===location.protocol,a=location.port;a||(a=s?443:80),this.xd=e.hostname!==t.location.hostname||a!==e.port,this.xs=e.secure!==s}else this.extraHeaders=e.extraHeaders}function u(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function p(){for(var e in u.requests)u.requests.hasOwnProperty(e)&&u.requests[e].abort()}e.exports=l,e.exports.Request=u,r(l,i),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.extraHeaders=this.extraHeaders,new u(e)},l.prototype.doWrite=function(e,t){var s="string"!=typeof e&&void 0!==e,a=this.request({method:"POST",data:e,isBinary:s}),i=this;a.on("success",t),a.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=a},l.prototype.doPoll=function(){n("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},o(u.prototype),u.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var s=this.xhr=new a(e),i=this;try{n("xhr open %s: %s",this.method,this.uri),s.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in s.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&s.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if(this.supportsBinary&&(s.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?s.setRequestHeader("Content-type","application/octet-stream"):s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in s&&(s.withCredentials=!0),this.hasXDR()?(s.onload=function(){i.onLoad()},s.onerror=function(){i.onError(s.responseText)}):s.onreadystatechange=function(){4===s.readyState&&(200===s.status||1223===s.status?i.onLoad():setTimeout(function(){i.onError(s.status)},0))},n("xhr data %s",this.data),s.send(this.data)}catch(e){return void setTimeout(function(){i.onError(e)},0)}t.document&&(this.index=u.requestsCount++,u.requests[this.index]=this)},u.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},u.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},u.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},u.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}t.document&&delete u.requests[this.index],this.xhr=null}},u.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}if("application/octet-stream"===t)e=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{e=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(t){for(var s=new Uint8Array(this.xhr.response),a=[],i=0,o=s.length;i<o;i++)a.push(s[i]);e=String.fromCharCode.apply(null,a)}else e=this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},u.prototype.hasXDR=function(){return void 0!==t.XDomainRequest&&!this.xs&&this.enablesXDR},u.prototype.abort=function(){this.cleanup()},u.requestsCount=0,u.requests={},t.document&&(t.attachEvent?t.attachEvent("onunload",p):t.addEventListener&&t.addEventListener("beforeunload",p,!1))}).call(t,function(){return this}())},function(e,t,s){var a=s(22),i=s(32),o=s(23),r=s(33),n=s(34),c=s(3)("engine.io-client:polling");e.exports=u;var l=null!=new(s(18))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),a.call(this,e)}r(u,a),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function s(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var a=0;this.polling&&(c("we are currently polling - waiting to pause"),a++,this.once("pollComplete",function(){c("pre-pause polling complete"),--a||s()})),this.writable||(c("we are currently writing - waiting to pause"),a++,this.once("drain",function(){c("pre-pause writing complete"),--a||s()}))}else s()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;c("polling got data %s",e);o.decodePayload(e,this.socket.binaryType,function(e,s,a){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var s=function(){t.writable=!0,t.emit("drain")};o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,s)})},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",s="";return!1!==this.timestampRequests&&(e[this.timestampParam]=n()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==this.port||"http"===t&&80!==this.port)&&(s=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+s+this.path+e}},function(e,t,s){var a=s(23),i=s(31);function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders}e.exports=o,i(o.prototype),o.prototype.onError=function(e,t){var s=new Error(e);return s.type="TransportError",s.description=t,this.emit("error",s),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=a.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,s){(function(e){var a,i=s(24),o=s(25),r=s(26),n=s(27),c=s(28);e&&e.ArrayBuffer&&(a=s(29));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),p=l||u;t.protocol=3;var d=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=i(d),m={type:"error",data:"parser error"},g=s(30);function f(e,t,s){for(var a=new Array(e.length),i=n(e.length,s),o=function(e,s,i){t(s,function(t,s){a[e]=s,i(t,a)})},r=0;r<e.length;r++)o(r,e[r],i)}t.encodePacket=function(s,a,i,o){"function"==typeof a&&(o=a,a=!1),"function"==typeof i&&(o=i,i=null);var r=void 0===s.data?void 0:s.data.buffer||s.data;if(e.ArrayBuffer&&r instanceof ArrayBuffer)return function(e,s,a){if(!s)return t.encodeBase64Packet(e,a);var i=e.data,o=new Uint8Array(i),r=new Uint8Array(1+i.byteLength);r[0]=d[e.type];for(var n=0;n<o.length;n++)r[n+1]=o[n];return a(r.buffer)}(s,a,o);if(g&&r instanceof e.Blob)return function(e,s,a){if(!s)return t.encodeBase64Packet(e,a);if(p)return function(e,s,a){if(!s)return t.encodeBase64Packet(e,a);var i=new FileReader;return i.onload=function(){e.data=i.result,t.encodePacket(e,s,!0,a)},i.readAsArrayBuffer(e.data)}(e,s,a);var i=new Uint8Array(1);i[0]=d[e.type];var o=new g([i.buffer,e.data]);return a(o)}(s,a,o);if(r&&r.base64)return function(e,s){var a="b"+t.packets[e.type]+e.data.data;return s(a)}(s,o);var n=d[s.type];return void 0!==s.data&&(n+=i?c.encode(String(s.data)):String(s.data)),o(""+n)},t.encodeBase64Packet=function(s,a){var i,o="b"+t.packets[s.type];if(g&&s.data instanceof e.Blob){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];a(o+e)},r.readAsDataURL(s.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(s.data))}catch(e){for(var n=new Uint8Array(s.data),c=new Array(n.length),l=0;l<n.length;l++)c[l]=n[l];i=String.fromCharCode.apply(null,c)}return o+=e.btoa(i),a(o)},t.decodePacket=function(e,s,a){if(void 0===e)return m;if("string"==typeof e){if("b"==e.charAt(0))return t.decodeBase64Packet(e.substr(1),s);if(a&&!1===(e=function(e){try{e=c.decode(e)}catch(e){return!1}return e}(e)))return m;var i=e.charAt(0);return Number(i)==i&&h[i]?e.length>1?{type:h[i],data:e.substring(1)}:{type:h[i]}:m}i=new Uint8Array(e)[0];var o=r(e,1);return g&&"blob"===s&&(o=new g([o])),{type:h[i],data:o}},t.decodeBase64Packet=function(e,t){var s=h[e.charAt(0)];if(!a)return{type:s,data:{base64:!0,data:e.substr(1)}};var i=a.decode(e.substr(1));return"blob"===t&&g&&(i=new g([i])),{type:s,data:i}},t.encodePayload=function(e,s,a){"function"==typeof s&&(a=s,s=null);var i=o(e);if(s&&i)return g&&!p?t.encodePayloadAsBlob(e,a):t.encodePayloadAsArrayBuffer(e,a);if(!e.length)return a("0:");f(e,function(e,a){t.encodePacket(e,!!i&&s,!0,function(e){a(null,function(e){return e.length+":"+e}(e))})},function(e,t){return a(t.join(""))})},t.decodePayload=function(e,s,a){if("string"!=typeof e)return t.decodePayloadAsBinary(e,s,a);var i;if("function"==typeof s&&(a=s,s=null),""==e)return a(m,0,1);for(var o,r,n="",c=0,l=e.length;c<l;c++){var u=e.charAt(c);if(":"!=u)n+=u;else{if(""==n||n!=(o=Number(n)))return a(m,0,1);if(n!=(r=e.substr(c+1,o)).length)return a(m,0,1);if(r.length){if(i=t.decodePacket(r,s,!0),m.type==i.type&&m.data==i.data)return a(m,0,1);if(!1===a(i,c+o,l))return}c+=o,n=""}}return""!=n?a(m,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,s){if(!e.length)return s(new ArrayBuffer(0));f(e,function(e,s){t.encodePacket(e,!0,!0,function(e){return s(null,e)})},function(e,t){var a=t.reduce(function(e,t){var s;return e+(s="string"==typeof t?t.length:t.byteLength).toString().length+s+2},0),i=new Uint8Array(a),o=0;return t.forEach(function(e){var t="string"==typeof e,s=e;if(t){for(var a=new Uint8Array(e.length),r=0;r<e.length;r++)a[r]=e.charCodeAt(r);s=a.buffer}i[o++]=t?0:1;var n=s.byteLength.toString();for(r=0;r<n.length;r++)i[o++]=parseInt(n[r]);i[o++]=255;for(a=new Uint8Array(s),r=0;r<a.length;r++)i[o++]=a[r]}),s(i.buffer)})},t.encodePayloadAsBlob=function(e,s){f(e,function(e,s){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var a=new Uint8Array(e.length),i=0;i<e.length;i++)a[i]=e.charCodeAt(i);e=a.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),r=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)r[i]=parseInt(o[i]);if(r[o.length]=255,g){var n=new g([t.buffer,r.buffer,e]);s(null,n)}})},function(e,t){return s(new g(t))})},t.decodePayloadAsBinary=function(e,s,a){"function"==typeof s&&(a=s,s=null);for(var i=e,o=[],n=!1;i.byteLength>0;){for(var c=new Uint8Array(i),l=0===c[0],u="",p=1;255!=c[p];p++){if(u.length>310){n=!0;break}u+=c[p]}if(n)return a(m,0,1);i=r(i,2+u.length),u=parseInt(u);var d=r(i,0,u);if(l)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var h=new Uint8Array(d);d="";for(p=0;p<h.length;p++)d+=String.fromCharCode(h[p])}o.push(d),i=r(i,u)}var g=o.length;o.forEach(function(e,i){a(t.decodePacket(e,s,!0),i,g)})}}).call(t,function(){return this}())},function(e,t){e.exports=Object.keys||function(e){var t=[],s=Object.prototype.hasOwnProperty;for(var a in e)s.call(e,a)&&t.push(a);return t}},function(e,t,s){(function(t){var a=s(9);e.exports=function(e){return function e(s){if(!s)return!1;if(t.Buffer&&t.Buffer.isBuffer(s)||t.ArrayBuffer&&s instanceof ArrayBuffer||t.Blob&&s instanceof Blob||t.File&&s instanceof File)return!0;if(a(s)){for(var i=0;i<s.length;i++)if(e(s[i]))return!0}else if(s&&"object"==typeof s)for(var o in s.toJSON&&(s=s.toJSON()),s)if(Object.prototype.hasOwnProperty.call(s,o)&&e(s[o]))return!0;return!1}(e)}}).call(t,function(){return this}())},function(e,t){e.exports=function(e,t,s){var a=e.byteLength;if(t=t||0,s=s||a,e.slice)return e.slice(t,s);if(t<0&&(t+=a),s<0&&(s+=a),s>a&&(s=a),t>=a||t>=s||0===a)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(s-t),r=t,n=0;r<s;r++,n++)o[n]=i[r];return o.buffer}},function(e,t){function s(){}e.exports=function(e,t,a){var i=!1;return a=a||s,o.count=e,0===e?t():o;function o(e,s){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=a):0!==o.count||i||t(null,s)}}},function(e,t,s){var a;(function(e,i){!function(o){var r="object"==typeof t&&t,n=("object"==typeof e&&e&&e.exports,"object"==typeof i&&i);n.global!==n&&n.window;var c,l,u,p=String.fromCharCode;function d(e){for(var t,s,a=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(s=e.charCodeAt(i++)))?a.push(((1023&t)<<10)+(1023&s)+65536):(a.push(t),i--):a.push(t);return a}function h(e,t){return p(e>>t&63|128)}function m(e){if(0==(4294967168&e))return p(e);var t="";return 0==(4294965248&e)?t=p(e>>6&31|192):0==(4294901760&e)?(t=p(e>>12&15|224),t+=h(e,6)):0==(4292870144&e)&&(t=p(e>>18&7|240),t+=h(e,12),t+=h(e,6)),t+=p(63&e|128)}function g(){if(u>=l)throw Error("Invalid byte index");var e=255&c[u];if(u++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(){var e,t;if(u>l)throw Error("Invalid byte index");if(u==l)return!1;if(e=255&c[u],u++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|g())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|g()<<6|g())>=2048)return t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(15&e)<<18|g()<<12|g()<<6|g())>=65536&&t<=1114111)return t;throw Error("Invalid WTF-8 detected")}var v={version:"1.0.0",encode:function(e){for(var t=d(e),s=t.length,a=-1,i="";++a<s;)i+=m(t[a]);return i},decode:function(e){c=d(e),l=c.length,u=0;for(var t,s=[];!1!==(t=f());)s.push(t);return function(e){for(var t,s=e.length,a=-1,i="";++a<s;)(t=e[a])>65535&&(i+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=p(t);return i}(s)}};void 0===(a=function(){return v}.call(t,s,t,e))||(e.exports=a)}()}).call(t,s(8)(e),function(){return this}())},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(256),a=0;a<e.length;a++)s[e.charCodeAt(a)]=a;t.encode=function(t){var s,a=new Uint8Array(t),i=a.length,o="";for(s=0;s<i;s+=3)o+=e[a[s]>>2],o+=e[(3&a[s])<<4|a[s+1]>>4],o+=e[(15&a[s+1])<<2|a[s+2]>>6],o+=e[63&a[s+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){var t,a,i,o,r,n=.75*e.length,c=e.length,l=0;"="===e[e.length-1]&&(n--,"="===e[e.length-2]&&n--);var u=new ArrayBuffer(n),p=new Uint8Array(u);for(t=0;t<c;t+=4)a=s[e.charCodeAt(t)],i=s[e.charCodeAt(t+1)],o=s[e.charCodeAt(t+2)],r=s[e.charCodeAt(t+3)],p[l++]=a<<2|i>>4,p[l++]=(15&i)<<4|o>>2,p[l++]=(3&o)<<6|63&r;return u}}()},function(e,t){(function(t){var s=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,a=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=a&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=s&&s.prototype.append&&s.prototype.getBlob;function r(e){for(var t=0;t<e.length;t++){var s=e[t];if(s.buffer instanceof ArrayBuffer){var a=s.buffer;if(s.byteLength!==a.byteLength){var i=new Uint8Array(s.byteLength);i.set(new Uint8Array(a,s.byteOffset,s.byteLength)),a=i.buffer}e[t]=a}}}function n(e,t){t=t||{};var a=new s;r(e);for(var i=0;i<e.length;i++)a.append(e[i]);return t.type?a.getBlob(t.type):a.getBlob()}function c(e,t){return r(e),new Blob(e,t||{})}e.exports=a?i?t.Blob:c:o?n:void 0}).call(t,function(){return this}())},function(e,t){function s(e){if(e)return function(e){for(var t in s.prototype)e[t]=s.prototype[t];return e}(e)}e.exports=s,s.prototype.on=s.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},s.prototype.once=function(e,t){var s=this;function a(){s.off(e,a),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},a.fn=t,this.on(e,a),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,a=this._callbacks[e];if(!a)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<a.length;i++)if((s=a[i])===t||s.fn===t){a.splice(i,1);break}return this},s.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),s=this._callbacks[e];if(s)for(var a=0,i=(s=s.slice(0)).length;a<i;++a)s[a].apply(this,t);return this},s.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},s.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){t.encode=function(e){var t="";for(var s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t},t.decode=function(e){for(var t={},s=e.split("&"),a=0,i=s.length;a<i;a++){var o=s[a].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var s=function(){};s.prototype=t.prototype,e.prototype=new s,e.prototype.constructor=e}},function(e,t){"use strict";var s,a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,o={},r=0,n=0;function c(e){var t="";do{t=a[e%i]+t,e=Math.floor(e/i)}while(e>0);return t}function l(){var e=c(+new Date);return e!==s?(r=0,s=e):e+"."+c(r++)}for(;n<i;n++)o[a[n]]=n;l.encode=c,l.decode=function(e){var t=0;for(n=0;n<e.length;n++)t=t*i+o[e.charAt(n)];return t},e.exports=l},function(e,t,s){(function(t){var a=s(21),i=s(33);e.exports=l;var o,r=/\n/g,n=/\\n/g;function c(){}function l(e){a.call(this,e),this.query=this.query||{},o||(t.___eio||(t.___eio=[]),o=t.___eio),this.index=o.length;var s=this;o.push(function(e){s.onData(e)}),this.query.j=this.index,t.document&&t.addEventListener&&t.addEventListener("beforeunload",function(){s.script&&(s.script.onerror=c)},!1)}i(l,a),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),a.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var s=document.getElementsByTagName("script")[0];s?s.parentNode.insertBefore(t,s):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},l.prototype.doWrite=function(e,t){var s=this;if(!this.form){var a,i=document.createElement("form"),o=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=c,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function l(){u(),t()}function u(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(e){s.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+s.iframeId+'">';a=document.createElement(e)}catch(e){(a=document.createElement("iframe")).name=s.iframeId,a.src="javascript:0"}a.id=s.iframeId,s.form.appendChild(a),s.iframe=a}this.form.action=this.uri(),u(),e=e.replace(n,"\\\n"),this.area.value=e.replace(r,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===s.iframe.readyState&&l()}:this.iframe.onload=l}}).call(t,function(){return this}())},function(e,t,s){(function(t){var a=s(22),i=s(23),o=s(32),r=s(33),n=s(34),c=s(3)("engine.io-client:websocket"),l=t.WebSocket||t.MozWebSocket,u=l;if(!u&&"undefined"==typeof window)try{u=s(37)}catch(e){}function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,a.call(this,e)}e.exports=p,r(p,a),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent,perMessageDeflate:this.perMessageDeflate};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders);try{this.ws=l?new u(e):new u(e,void 0,t)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(p.prototype.onData=function(e){var t=this;setTimeout(function(){a.prototype.onData.call(t,e)},0)}),p.prototype.write=function(e){var s=this;this.writable=!1;for(var a=e.length,o=0,r=a;o<r;o++)!function(e){i.encodePacket(e,s.supportsBinary,function(i){if(!l){var o={};if(e.options&&(o.compress=e.options.compress),s.perMessageDeflate)("string"==typeof i?t.Buffer.byteLength(i):i.length)<s.perMessageDeflate.threshold&&(o.compress=!1)}try{l?s.ws.send(i):s.ws.send(i,o)}catch(e){c("websocket closed before onclose event")}--a||n()})}(e[o]);function n(){s.emit("flush"),setTimeout(function(){s.writable=!0,s.emit("drain")},0)}},p.prototype.onClose=function(){a.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",s="";return this.port&&("wss"===t&&443!==this.port||"ws"===t&&80!==this.port)&&(s=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=n()),this.supportsBinary||(e.b64=1),(e=o.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+s+this.path+e},p.prototype.check=function(){return!(!u||"__initialize"in u&&this.name===p.prototype.name)}}).call(t,function(){return this}())},function(e,t){},function(e,t){var s=[].indexOf;e.exports=function(e,t){if(s)return e.indexOf(t);for(var a=0;a<e.length;++a)if(e[a]===t)return a;return-1}},function(e,t){(function(t){var s=/^[\],:{}\s]*$/,a=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,r=/^\s+/,n=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(r,"").replace(n,""),t.JSON&&JSON.parse?JSON.parse(e):s.test(e.replace(a,"@").replace(i,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(t,function(){return this}())},function(e,t,s){"use strict";var a=s(6),i=s(41),o=s(42),r=s(43),n=s(44),c=s(3)("socket.io-client:socket"),l=s(45);e.exports=d;var u={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=i.prototype.emit;function d(e,t,s){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,s&&s.query&&(this.query=s.query),this.io.autoConnect&&this.open()}i(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[r(e,"open",n(this,"onopen")),r(e,"packet",n(this,"onpacket")),r(e,"close",n(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(u.hasOwnProperty(e))return p.apply(this,arguments),this;var t=o(arguments),s=a.EVENT;l(t)&&(s=a.BINARY_EVENT);var i={type:s,data:t,options:{}};return i.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),delete this.flags,this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){c("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:a.CONNECT,query:this.query}):this.packet({type:a.CONNECT}))},d.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){if(e.nsp===this.nsp)switch(e.type){case a.CONNECT:this.onconnect();break;case a.EVENT:case a.BINARY_EVENT:this.onevent(e);break;case a.ACK:case a.BINARY_ACK:this.onack(e);break;case a.DISCONNECT:this.ondisconnect();break;case a.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,s=!1;return function(){if(!s){s=!0;var i=o(arguments);c("sending ack %j",i);var r=l(i)?a.BINARY_ACK:a.ACK;t.packet({type:r,id:e,data:i})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:a.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags=this.flags||{},this.flags.compress=e,this}},function(e,t){function s(e){if(e)return function(e){for(var t in s.prototype)e[t]=s.prototype[t];return e}(e)}e.exports=s,s.prototype.on=s.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},s.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,a=this._callbacks["$"+e];if(!a)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<a.length;i++)if((s=a[i])===t||s.fn===t){a.splice(i,1);break}return this},s.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),s=this._callbacks["$"+e];if(s)for(var a=0,i=(s=s.slice(0)).length;a<i;++a)s[a].apply(this,t);return this},s.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},s.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports=function(e,t){for(var s=[],a=(t=t||0)||0;a<e.length;a++)s[a-t]=e[a];return s}},function(e,t){"use strict";e.exports=function(e,t,s){return e.on(t,s),{destroy:function(){e.removeListener(t,s)}}}},function(e,t){var s=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var a=s.call(arguments,2);return function(){return t.apply(e,a.concat(s.call(arguments)))}}},function(e,t,s){(function(t){var a=s(9);e.exports=function(e){return function e(s){if(!s)return!1;if(t.Buffer&&t.Buffer.isBuffer&&t.Buffer.isBuffer(s)||t.ArrayBuffer&&s instanceof ArrayBuffer||t.Blob&&s instanceof Blob||t.File&&s instanceof File)return!0;if(a(s)){for(var i=0;i<s.length;i++)if(e(s[i]))return!0}else if(s&&"object"==typeof s)for(var o in s.toJSON&&"function"==typeof s.toJSON&&(s=s.toJSON()),s)if(Object.prototype.hasOwnProperty.call(s,o)&&e(s[o]))return!0;return!1}(e)}}).call(t,function(){return this}())},function(e,t){function s(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=s,s.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-s:e+s}return 0|Math.min(e,this.max)},s.prototype.reset=function(){this.attempts=0},s.prototype.setMin=function(e){this.ms=e},s.prototype.setMax=function(e){this.max=e},s.prototype.setJitter=function(e){this.jitter=e}}])},e.exports=a()},XBlY:function(e,t){},Xmbd:function(e,t){},b6p9:function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a);t.a={name:"RealtimeMonitor",props:["deviceMonitorId"],data:function(){return{systemProcess:"system",directionalComprehensive:"directional",directionalMonitor:"load_navigation",directionalMonitorHtml:"",loadVarlistData:[],loadVardata:[],getSingleItemSelectedId:"",getSingleItemTypeId:"",systemMonitorDateNow:"",processMonitorDateNow:"",value:"0",cpuEcharts:"",memoryEcharts:"",harddiskEcharts:"",networkFlowEcharts:"",echartsOption:{},DeviceStatusDetail:[],cpuEchartsData:[],memoryEchartsData:[],harddiskEchartsData:[],networkFlowEchartsData:[],cpuPercentage:"",datumSpeed:"0",freeMemory:"",totalMemory:"",memoryPercentage:"",diskToalSize:"",diskUsedSize:"",diskPercentage:"",netIoTra:"",netIoRec:"",networkFlowReceiveData:[],networkFlowSendData:[],robotProcessDetailInfo:[],mtEcharts:[],mtEchartsData:[]}},created:function(){this.tabDirectionalMonitor(),this.getDeviceDetail(),window.tabDirectionalMonitorTime=setInterval(this.tabDirectionalMonitor,1e3),null!==localStorage.getItem("loadVarItemSelected")&&(this.loadVarlistData=JSON.parse(localStorage.getItem("loadVarItemSelected")))},beforeDestroy:function(){clearInterval(window.reloadLoadVarlistData),clearInterval(window.tabDirectionalMonitorTime),clearInterval(window.reloadEcharts)},mounted:function(){this.getRobotProcessDetailInfo(),setTimeout(this.initEcharts,100)},methods:{getRobotProcessDetailInfo:function(){var e=this,t=i()({event:"get_robot_process_detail_info",robot_id:this.deviceMonitorId});this.$api.post("/",t,function(t){if(0===t.code){e.robotProcessDetailInfo=t.process_info_list;for(var s=0;s<e.robotProcessDetailInfo.length;s++)e.mtEchartsData[s]=[],e.mtEchartsData[s].virmm=[],e.mtEchartsData[s].rss=[],e.mtEchartsData[s].averageCpu=[],e.mtEchartsData[s].averageMem=[]}else e.$layer.msg("设备进程详情获取失败！")})},getDeviceDetail:function(){var e=this,t=i()({event:"get_robot_detail_info",robot_id:this.deviceMonitorId});this.$api.post("/",t,function(t){if(0===t.code){e.DeviceStatusDetail=t.data,e.totalMemory=(t.data.total_memory/1024/1024/1024).toFixed(2),e.diskToalSize=(t.data.disk_totoal_size/1024/1024).toFixed(2);for(var s=0,a=t.data.cpu_list.length,i=0;i<a;i++)s+=parseFloat(t.data.cpu_list[i].cpu_hz);a>0&&(e.datumSpeed=s/a)}else e.$layer.msg("设备详情获取失败！")})},loadCpuEcharts:function(){var e=this;this.echartsOption.title.text="CPU(单位：%)",this.echartsOption.yAxis.max=100,this.echartsOption.series[0].itemStyle.normal.color="rgb(110,176,214)",this.echartsOption.series[0].areaStyle.normal.color="rgb(241,246,250)",this.echartsOption.tooltip.formatter=function(t){return t=t[0],e.getDetailTime(t.name)+"<br>CPU已使用："+t.value[1]+"%"}},loadMemoryEcharts:function(){var e=this;this.echartsOption.title.text="内存(单位：%)",this.echartsOption.yAxis.max=100,this.echartsOption.series[0].itemStyle.normal.color="rgb(218,181,229)",this.echartsOption.series[0].areaStyle.normal.color="rgb(244,242,244)",this.echartsOption.tooltip.formatter=function(t){return t=t[0],e.getDetailTime(t.name)+"<br>内存已使用："+t.value[1]+"%"}},loadHarddiskEcharts:function(){var e=this;this.echartsOption.title.text="磁盘(单位：%)",this.echartsOption.yAxis.max=100,this.echartsOption.series[0].itemStyle.normal.color="rgb(129,192,84)",this.echartsOption.series[0].areaStyle.normal.color="rgb(239,247,233)",this.echartsOption.tooltip.formatter=function(t){return t=t[0],e.getDetailTime(t.name)+"<br>磁盘已使用："+t.value[1]+"%"}},loadNetworkFlowEcharts:function(){var e=this;this.echartsOption.title.text="网络流量(单位：Kbps)",this.echartsOption.yAxis.max=null,this.echartsOption.legend.data=["发送流量","接收流量"],this.echartsOption.legend.top="10%",this.echartsOption.legend.selectedMode=!1,this.echartsOption.series[0].itemStyle.normal.color="rgb(189,122,62)",this.echartsOption.series[0].areaStyle.normal.color="rgb(252,243,235)",this.echartsOption.series[0].name="发送流量",this.echartsOption.series.push({name:"接收流量",type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(255, 57, 0)"}},areaStyle:{normal:{color:new e.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(241,246,250)"},{offset:1,color:"rgb(241,246,250)"}])}},data:[]}),this.echartsOption.tooltip.formatter=function(t){return e.getDetailTime(t[0].name)+"<br>发送流量："+t[0].value[1]+"Kbps<br>接收流量："+t[1].value[1]+"Kbps"}},loadProcessEcharts:function(e){var t=this;this.echartsOption.title.text="进程名称："+e,this.echartsOption.yAxis.max=null,this.echartsOption.yAxis.axisLabel=!1,this.echartsOption.legend.data=["VIR","RSS","Average_cpu","Average_mem"],this.echartsOption.legend.top="38",this.echartsOption.legend.selectedMode=!0,this.echartsOption.series=[];for(var s=["rgb(51, 204, 153)","rgb(198, 127, 198)","rgb(126, 218, 58)","rgb(55, 168, 233)"],a=0;a<4;a++)this.echartsOption.series.push({name:this.echartsOption.legend.data[a],type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{normal:{color:s[a]}},areaStyle:{normal:{color:new t.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(241,246,250)"},{offset:1,color:"rgb(241,246,250)"}])}},data:[]});this.echartsOption.tooltip.formatter=function(e){console.log(e);for(var s=t.getDetailTime(e[0].name),a=0;a<e.length;a++)s+="<br>"+e[a].seriesName+"："+e[a].value[1]+(0===e[a].seriesIndex||1===e[a].seriesIndex?"KByte":"%");return s}},initEcharts:function(){var e=this;e.systemMonitorDateNow=+new Date((new Date).getTime()-3e4),e.processMonitorDateNow=+new Date((new Date).getTime()-3e4),this.echartsOption={title:{top:13,left:"4%",textStyle:{fontSize:19}},legend:{data:[]},tooltip:{trigger:"axis",formatter:function(t){return t=t[0],e.getDetailTime(t.name)+"<br>值："+t.value[1]},axisPointer:{animation:!0}},xAxis:{type:"time",show:!0,splitLine:{show:!0},axisLine:{show:!0},axisPointer:{show:!0},axisTick:{show:!1},axisLabel:{show:!0}},yAxis:{type:"value",show:!0,boundaryGap:["0%","100%"],splitLine:{show:!0},axisTick:{show:!1},axisLabel:{show:!0},axisLine:{show:!0}},series:[{name:"data",type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(110,176,214)"}},areaStyle:{normal:{color:new e.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(241,246,250)"},{offset:1,color:"rgb(241,246,250)"}])}},data:[]}]},e.cpuEcharts=e.$echarts.init(document.getElementById("cpuEcharts")),e.memoryEcharts=e.$echarts.init(document.getElementById("memoryEcharts")),e.harddiskEcharts=e.$echarts.init(document.getElementById("harddiskEcharts")),e.networkFlowEcharts=e.$echarts.init(document.getElementById("networkFlowEcharts"));for(var t=0;t<e.robotProcessDetailInfo.length;t++)e.mtEcharts[t]=e.$echarts.init(document.getElementById("mtEcharts"+t));e.loadCpuEcharts(),e.cpuEcharts.setOption(e.echartsOption),e.loadMemoryEcharts(),e.memoryEcharts.setOption(e.echartsOption),e.loadHarddiskEcharts(),e.harddiskEcharts.setOption(e.echartsOption),e.loadNetworkFlowEcharts(),e.networkFlowEcharts.setOption(e.echartsOption);for(var s=0;s<e.robotProcessDetailInfo.length;s++)this.loadProcessEcharts(e.robotProcessDetailInfo[s].process_name),e.mtEcharts[s].setOption(e.echartsOption);for(var a=0;a<10;a++)e.dealEchartsData([]),e.mtEchartsDataDeal();e.reloadEchartsData(),window.reloadEcharts=setInterval(e.reloadEchartsData,3e3),window.onresize=function(){e.cpuEcharts.resize(),e.memoryEcharts.resize(),e.harddiskEcharts.resize(),e.networkFlowEcharts.resize();for(var t=0;t<e.robotProcessDetailInfo.length;t++)e.mtEcharts[t].resize()}},reloadEchartsData:function(){var e=this;if("system"===this.systemProcess){var t=i()({event:"get_robot_system_info",robot_id:e.deviceMonitorId});e.$api.post("/",t,function(t){0===t.code?(e.dealEchartsData(t),"{}"===i()(t.system_info)&&(e.$layer.msg("设备:"+e.deviceMonitorId+"已下线！",{time:3e3}),e.$emit("deviceMonitorId",""))):e.$layer.msg("设备的系统监控信息获取失败！")})}else if("process"===this.systemProcess){var s=i()({event:"get_robot_process_detail_info",robot_id:e.deviceMonitorId});e.$api.post("/",s,function(t){0===t.code?(e.robotProcessDetailInfo=t.process_info_list,e.mtEchartsDataDeal()):e.$layer.msg("设备进程详情获取失败！")})}},mtEchartsDataDeal:function(){var e=this.robotProcessDetailInfo;this.processMonitorDateNow=new Date(+this.processMonitorDateNow+3e3);for(var t=0;t<e.length;t++){var s=0,a=0,i=0,o=0;this.mtEchartsData[0].virmm.length>=10&&(s=e[t].vir_mm,a=e[t].rss,i=e[t].average_cpu,o=e[t].average_mem,this.mtEchartsData[t].virmm.shift(),this.mtEchartsData[t].rss.shift(),this.mtEchartsData[t].averageCpu.shift(),this.mtEchartsData[t].averageMem.shift()),this.mtEchartsData[t].virmm.push({name:this.processMonitorDateNow.toString(),value:[this.processMonitorDateNow,s]}),this.mtEchartsData[t].rss.push({name:this.processMonitorDateNow.toString(),value:[this.processMonitorDateNow,a]}),this.mtEchartsData[t].averageCpu.push({name:this.processMonitorDateNow.toString(),value:[this.processMonitorDateNow,i]}),this.mtEchartsData[t].averageMem.push({name:this.processMonitorDateNow.toString(),value:[this.processMonitorDateNow,o]}),console.log(this.mtEchartsData[t].virmm),console.log(this.mtEchartsData[t].rss),this.mtEcharts[t].setOption({series:[{data:this.mtEchartsData[t].virmm},{data:this.mtEchartsData[t].rss},{data:this.mtEchartsData[t].averageCpu},{data:this.mtEchartsData[t].averageMem}]})}},dealEchartsData:function(e){this.systemMonitorDateNow=new Date(+this.systemMonitorDateNow+3e3),this.cpuEchartsData.length>=10?(this.cpuPercentage=e.system_info.cpu_percentage,this.freeMemory=(e.system_info.free_mem/1024/1024/1024).toFixed(2),this.memoryPercentage=100*(1-e.system_info.free_mem/this.DeviceStatusDetail.total_memory),this.diskUsedSize=(e.system_info.disk_used_size/1024/1024).toFixed(2),this.diskPercentage=100*(e.system_info.disk_used_size/this.DeviceStatusDetail.disk_totoal_size).toFixed(2),this.netIoTra=(e.system_info.net_io_tra/1024).toFixed(2),this.netIoRec=(e.system_info.net_io_rec/1024).toFixed(2),this.cpuEchartsData.shift(),this.memoryEchartsData.shift(),this.harddiskEchartsData.shift(),this.networkFlowSendData.shift(),this.networkFlowReceiveData.shift()):(this.cpuPercentage=0,this.memoryPercentage=0,this.diskPercentage=0,this.netIoTra=0,this.netIoRec=0),this.cpuEchartsData.push({name:this.systemMonitorDateNow.toString(),value:[this.systemMonitorDateNow,Math.round(this.cpuPercentage)]}),this.memoryEchartsData.push({name:this.systemMonitorDateNow.toString(),value:[this.systemMonitorDateNow,Math.round(this.memoryPercentage)]}),this.harddiskEchartsData.push({name:this.systemMonitorDateNow.toString(),value:[this.systemMonitorDateNow,Math.round(this.diskPercentage)]}),this.networkFlowSendData.push({name:this.systemMonitorDateNow.toString(),value:[this.systemMonitorDateNow,this.netIoTra]}),this.networkFlowReceiveData.push({name:this.systemMonitorDateNow.toString(),value:[this.systemMonitorDateNow,this.netIoRec]}),this.cpuEcharts.setOption({series:[{data:this.cpuEchartsData}]}),this.memoryEcharts.setOption({series:[{data:this.memoryEchartsData}]}),this.harddiskEcharts.setOption({series:[{data:this.harddiskEchartsData}]}),this.networkFlowEcharts.setOption({series:[{data:this.networkFlowSendData},{data:this.networkFlowReceiveData}]})},getSingleItem:function(e){var t=this;t.getSingleItemSelectedId=e.target.getAttribute("data-id");var s=parseInt(e.target.getAttribute("data-key")),a=parseInt(e.target.getAttribute("data-type"));if(t.loadVarlistData.forEach(function(e,a){s!==parseInt(a)&&(t.loadVarlistData[a].expend=!1)}),t.loadVarlistData[s].expend=!t.loadVarlistData[s].expend,t.loadVarlistData[s].expend){var o=t.deviceMonitorId.toString(),r=t.getSingleItemSelectedId.toString();t.getSingleItemTypeId=a.toString();var n=i()({event:"load_vardata",robot_id:o,data:[{var_id:r,type_id:t.getSingleItemTypeId}]});t.$api.post("/",n,function(e){0===e.code&&(t.loadVardata=e.data[t.getSingleItemSelectedId.toString()])})}clearInterval(window.reloadLoadVarlistData),window.reloadLoadVarlistData=setInterval(this.reloadLoadVarlistData,1e3)},reloadLoadVarlistData:function(){var e=this,t=i()({event:"load_vardata",robot_id:e.deviceMonitorId.toString(),data:[{var_id:e.getSingleItemSelectedId.toString(),type_id:e.getSingleItemTypeId}]});e.$api.post("/",t,function(t){0===t.code&&(e.loadVardata=t.data[e.getSingleItemSelectedId.toString()])})},selectParameterSource:function(){var t=this;t.$layer.open({type:2,area:["700px","500px"],title:"选择参数源",shade:.3,shadeClose:!1,id:"ComprehensiveMonitor",maxmin:!1,anim:1,content:e.url+"/#/ComprehensiveMonitor?robotid="+t.deviceMonitorId.toString(),cancel:function(){localStorage.removeItem("loadVarItemSelected")},end:function(){t.$router.push({path:window.location.hash.replace(/#/g,"")}),null!==localStorage.getItem("loadVarItemSelected")&&(t.loadVarlistData=JSON.parse(localStorage.getItem("loadVarItemSelected")))},yes:function(e){},success:function(){}})},tabSystemProcess:function(e){this.systemProcess=0===e?"system":"process"},tabDirectionalComprehensive:function(e){clearInterval(window.reloadLoadVarlistData),clearInterval(window.tabDirectionalMonitorTime),0===e?(this.directionalComprehensive="directional",window.tabDirectionalMonitorTime=setInterval(this.tabDirectionalMonitor,1e3)):(this.directionalComprehensive="comprehensive",null!==localStorage.getItem("loadVarItemSelected")&&(window.reloadLoadVarlistData=setInterval(this.reloadLoadVarlistData,1e3)))},tabDirectionalMonitor:function(e){var t=this;if(e&&(this.$refs.scrollTop.scrollTop=0,this.directionalMonitor=e.target.getAttribute("data-type")),"/DeviceStatus"!==this.$route.path)return clearInterval(window.tabDirectionalMonitorTime),!1;var s=i()({event:this.directionalMonitor,robot_id:this.deviceMonitorId.toString()});this.$api.post("/",s,function(e){t.directionalMonitorHtml=e})},getDetailTime:function(e){var t=new Date(e),s=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),o=t.getHours(),r=t.getMinutes(),n=t.getSeconds();return a<10&&(a="0"+a),i<10&&(i="0"+i),o<10&&(o="0"+o),r<10&&(r="0"+r),n<10&&(n="0"+n),s+"-"+a+"-"+i+" "+o+":"+r+":"+n}},watch:{robotProcessDetailInfo:function(e,t){t.length>0&&0===e.length&&(this.$layer.msg("设备:"+this.deviceMonitorId+"已下线！",{time:3e3}),this.$emit("deviceMonitorId",""))}}}}).call(t,s("DuR2"))},bElu:function(e,t){},ccZh:function(e,t,s){"use strict";var a=s("gR1W"),i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"common-menu"},[s("div",{staticClass:"header"},[s("img",{staticClass:"logo",attrs:{src:"static/images/common-menu/logo.png"}}),e._v(" "),s("div",{staticClass:"user"},[s("div",{staticClass:"user-name"},[s("span",{staticClass:"welcome"},[e._v("欢迎您,"),s("span",{staticClass:"name",attrs:{title:e.userName}},[e._v(e._s(e.userName))])]),e._v(" "),s("span",{staticClass:"exit",attrs:{title:"退出登录"},on:{click:e.exitLogin}},[s("img",{attrs:{src:"static/images/common-menu/exit.png"}})]),e._v(" "),s("router-link",{staticClass:"personal",attrs:{to:"PersonalCenter",title:"个人中心"}},[s("img",{attrs:{src:"static/images/common-menu/"+("/PersonalCenter"===e.routerName?"personal-center-active.png":"personal-center.png")}})])],1)])]),e._v(" "),"root"===e.userName?s("ul",{staticClass:"menu-list"},[s("li",{class:"/UserManage"===e.routerName?"active":""},[s("router-link",{staticClass:"menu-item",attrs:{to:"UserManage"}},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:"static/images/common-menu/"+("/UserManage"===e.routerName?"user-manage-active.png":"user-manage.png")}})]),e._v(" "),s("span",{staticClass:"menu-name"},[e._v("用户管理")]),e._v(" "),s("span",{staticClass:"arrow"},["/UserManage"===e.routerName?s("img",{attrs:{src:"static/images/common-menu/menu-list-arrow.png"}}):e._e()])])],1),e._v(" "),s("li",{class:"/RootUserSoftwareManage"===e.routerName?"active":""},[s("router-link",{staticClass:"menu-item",attrs:{to:"RootUserSoftwareManage"}},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:"static/images/common-menu/"+("/RootUserSoftwareManage"===e.routerName?"software-version-upgrades-active.png":"software-version-upgrades.png")}})]),e._v(" "),s("span",{staticClass:"menu-name"},[e._v("软件版本管理")]),e._v(" "),s("span",{staticClass:"arrow"},["/RootUserSoftwareManage"===e.routerName?s("img",{attrs:{src:"static/images/common-menu/menu-list-arrow.png"}}):e._e()])])],1),e._v(" "),s("li",{class:"/"===e.routerName?"active":""},[s("router-link",{staticClass:"menu-item",attrs:{to:""}},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:"static/images/common-menu/"+("/"===e.routerName?"firmware-version-upgrades-active.png":"firmware-version-upgrades.png")}})]),e._v(" "),s("span",{staticClass:"menu-name"},[e._v("固件版本管理")]),e._v(" "),s("span",{staticClass:"arrow"},["/"===e.routerName?s("img",{attrs:{src:"static/images/common-menu/menu-list-arrow.png"}}):e._e()])])],1)]):s("ul",{staticClass:"menu-list"},[s("li",{class:"/DeviceStatus"===e.routerName?"active":""},[s("router-link",{staticClass:"menu-item",attrs:{to:"DeviceStatus"}},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:"static/images/common-menu/"+("/DeviceStatus"===e.routerName?"equipment-state-active.png":"equipment-state.png")}})]),e._v(" "),s("span",{staticClass:"menu-name"},[e._v("设备状态")]),e._v(" "),s("span",{staticClass:"arrow"},["/DeviceStatus"===e.routerName?s("img",{attrs:{src:"static/images/common-menu/menu-list-arrow.png"}}):e._e()])])],1),e._v(" "),s("li",{class:"/BaseConfig"===e.routerName?"active":""},[s("router-link",{staticClass:"menu-item",attrs:{to:"BaseConfig"}},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:"static/images/common-menu/"+("/BaseConfig"===e.routerName?"basic-config-active.png":"basic-config.png")}})]),e._v(" "),s("span",{staticClass:"menu-name"},[e._v("基本配置")]),e._v(" "),s("span",{staticClass:"arrow"},["/BaseConfig"===e.routerName?s("img",{attrs:{src:"static/images/common-menu/menu-list-arrow.png"}}):e._e()])])],1),e._v(" "),s("li",{class:"/SoftwareUpgrade"===e.routerName?"active":""},[s("router-link",{staticClass:"menu-item",attrs:{to:"SoftwareUpgrade"}},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:"static/images/common-menu/"+("/SoftwareUpgrade"===e.routerName?"software-version-upgrades-active.png":"software-version-upgrades.png")}})]),e._v(" "),s("span",{staticClass:"menu-name"},[e._v("软件升级")]),e._v(" "),s("span",{staticClass:"arrow"},["/SoftwareUpgrade"===e.routerName?s("img",{attrs:{src:"static/images/common-menu/menu-list-arrow.png"}}):e._e()])])],1),e._v(" "),s("li",{class:"/BackupLogFile"===e.routerName?"active":""},[s("router-link",{staticClass:"menu-item",attrs:{to:"/BackupLogFile"}},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:"static/images/common-menu/"+("/BackupLogFile"===e.routerName?"export-log-files-active.png":"export-log-files.png")}})]),e._v(" "),s("span",{staticClass:"menu-name"},[e._v("备份日志文件")]),e._v(" "),s("span",{staticClass:"arrow"},["/BackupLogFile"===e.routerName?s("img",{attrs:{src:"static/images/common-menu/menu-list-arrow.png"}}):e._e()])])],1),e._v(" "),s("li",{class:"/ManageCenter"===e.routerName?"active":""},[s("router-link",{staticClass:"menu-item",attrs:{to:"/ManageCenter"}},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:"static/images/common-menu/"+("/ManageCenter"===e.routerName?"management-center-active.png":"management-center.png")}})]),e._v(" "),s("span",{staticClass:"menu-name"},[e._v("管理中心")]),e._v(" "),s("span",{staticClass:"arrow"},["/ManageCenter"===e.routerName?s("img",{attrs:{src:"static/images/common-menu/menu-list-arrow.png"}}):e._e()])])],1),e._v(" "),s("li",{class:"/DownloadCenter"===e.routerName?"active":""},[s("router-link",{staticClass:"menu-item",attrs:{to:"/DownloadCenter"}},[s("span",{staticClass:"icon"},[s("img",{attrs:{src:"static/images/common-menu/"+("/DownloadCenter"===e.routerName?"download-center-active.png":"download-center.png")}})]),e._v(" "),s("span",{staticClass:"menu-name"},[e._v("下载中心")]),e._v(" "),s("span",{staticClass:"arrow"},["/DownloadCenter"===e.routerName?s("img",{attrs:{src:"static/images/common-menu/menu-list-arrow.png"}}):e._e()])])],1)])])},staticRenderFns:[]};var o=function(e){s("W+O9")},r=s("VU/8")(a.a,i,!1,o,"data-v-108bdfc9",null);t.a=r.exports},gR1W:function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a),o=s("k0sY");t.a={name:"Menu",data:function(){return{routerName:"/DeviceStatus",userName:""}},created:function(){this.isLogin(),this.routerName=this.$route.path,this.pageListen()},methods:{pageListen:function(){this.routerName=this.$route.path;-1===["/UserManage","/RootUserSoftwareManage","/PersonalCenter"].indexOf(this.routerName)&&"root"===this.userName?this.$router.push({path:"/UserManage"}):-1===["/DeviceStatus","/BaseConfig","/SoftwareUpgrade","/ManageCenter","/DownloadCenter","/PersonalCenter","/BackupLogFile"].indexOf(this.routerName)&&"root"!==this.userName&&this.$router.push({path:"/DeviceStatus"})},isLogin:function(){null===localStorage.getItem("login_token")?window.location.href="/":this.userName=localStorage.getItem("username")},exitLogin:function(){var e=this;e.$layer.confirm("确定要登出系统吗？",{title:"确认"},function(){sessionStorage.setItem("exitLogin","true");var t=i()({event:"event_logout",login_token:localStorage.getItem("login_token")});e.$api.post("/",t,function(t){0===t.code?(localStorage.removeItem("uuid"),localStorage.removeItem("token"),localStorage.removeItem("login_token"),localStorage.removeItem("username"),window.location.href="/",console.log(t)):1===t.code?e.$layer.msg("该用户未登录！"):e.$layer.msg("注销失败")})})},socketConnect:function(){""===e.socket&&(e.socket=new WebSocket("ws://"+e.serverIp+":"+sessionStorage.getItem("websocketPort")),console.log(e.socket),e.socket.onopen=function(){var t=i()({code:0,data:{uuid:localStorage.getItem("uuid")}});e.socket.send(t)},e.socket.onmessage=function(e){e=JSON.parse(e.data),o.a.$emit("socketData",e),console.log(e),e.uuid&&(null!==localStorage.getItem("uuid")&&e.uuid!==localStorage.getItem("uuid")||(localStorage.removeItem("uuid"),localStorage.removeItem("token"),localStorage.removeItem("login_token"),localStorage.removeItem("username"),sessionStorage.setItem("loginOutMsg",e.msg),window.location.href="/"))},e.socket.onclose=function(){console.log("websocket断开连接"),localStorage.removeItem("uuid"),localStorage.removeItem("token"),localStorage.removeItem("login_token"),localStorage.removeItem("username")},e.socket.onerror=function(e){console.log("websocket断开连接"+e),localStorage.removeItem("uuid"),localStorage.removeItem("token"),localStorage.removeItem("login_token"),localStorage.removeItem("username")})}},watch:{}}}).call(t,s("DuR2"))},gyMJ:function(e,t,s){"use strict";(function(e){var a=e.apiAddr,i=s("mtWM");function o(e,t,s,o,r){i({method:e,url:t,data:"POST"===e||"PUT"===e?s:null,params:"GET"===e||"DELETE"===e?s:null,baseURL:a,withCredentials:!1}).then(function(e){o(e.data)}).catch(function(e){console.log(e.message)})}t.a={get:function(e,t,s,a){return o("GET",e,t,s)},post:function(e,t,s,a){return o("POST",e,t,s)},put:function(e,t,s,a){return o("PUT",e,t,s)},delete:function(e,t,s,a){return o("DELETE",e,t,s)}}}).call(t,s("DuR2"))},isEs:function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a);t.a={name:"uploadSoftwareVersion",data:function(){return{packageid:"",packageName:"",remarks:"",uploadTime:"",userName:"",version:""}},created:function(){window.onpopstate=function(){parent.layer.close(parent.layer.index)};var t=JSON.parse(sessionStorage.getItem("editSoftwareParm"));t.id&&(this.packageid=t.id,this.packageName=t.package_name,this.remarks=t.remarks,this.uploadTime=e.getDetailTime(t.time),this.userName=t.user_name,this.version=t.version)},methods:{yes:function(){var e=this.remarks.replace(/(^\s*)|(\s*$)/g,"");if(e.length>100)return parent.layer.msg("备注不允许超过100个字符！"),!1;var t=i()({event:"event_package_update",package_id:this.packageid,remark:e});this.$api.post("/",t,function(e){0===e.code?(parent.layer.msg("软件版本修改成功！"),parent.layer.close(window.parent.layer.getFrameIndex("EditSoftwareVersion"))):parent.layer.msg("软件版本修改失败！")})},cancel:function(){parent.layer.close(window.parent.layer.getFrameIndex("EditSoftwareVersion"))}},watch:{remarks:function(e,t){}}}}).call(t,s("DuR2"))},it27:function(e,t){},k0sY:function(e,t,s){"use strict";var a=new(s("7+uW").a);t.a=a},l2A8:function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a);t.a={name:"SoftwareVersionList",data:function(){return{routerfrom:"",softwareList:[],deviceid:[],selectVersion:""}},created:function(){window.onpopstate=function(){parent.layer.close(parent.layer.index)},this.$route.query.deviceid&&(this.routerfrom=this.$route.query.routerfrom,this.deviceid=JSON.parse(this.$route.query.deviceid)),this.getSoftwareList()},methods:{SoftwareUpgrade:function(){var e=this,t=JSON.parse(localStorage.getItem("uploadStatus"));if(""===this.selectVersion)return this.$layer.msg("请先选择一个软件版本！"),!1;if("true"===localStorage.getItem("isUploading")&&t&&t[0].filename===this.selectVersion.package_name)return this.$layer.msg("正在上传该软件的新版本，请稍后再升级！"),!1;var s=JSON.parse(localStorage.getItem("transferQueueing")),a=[];for(var o in s){var r=this.deviceid.indexOf(s[o].robot_id);-1!==r&&""!==s[o].task_id&&(a.push(s[o].robot_id),this.deviceid.splice(r,1))}if(this.deviceid.length>0){if(this.deviceid.length>1e3)return this.$layer.msg("最多只能选择1000个设备！"),!1;var n=i()({event:"event_robot_upgrade",robot_list:this.deviceid,package_id:this.selectVersion.id,login_token:localStorage.getItem("login_token")});this.$api.post("/",n,function(t){if(0===t.code){var s=[];for(var a in t.transfer_list)s.push({packet_id:e.selectVersion.id,robot_id:t.transfer_list[a].robot_id,task_id:t.transfer_list[a].task_id,version:e.selectVersion.version});localStorage.setItem("transferQueueing",i()(s)),localStorage.setItem("isUpgradeing","true"),parent.layer.close(parent.layer.index),"detail"===e.routerfrom&&(parent.window.location.href="/#/SoftwareUpgrade")}else e.$layer.msg("软件升级失败！")})}else parent.layer.close(parent.layer.index),parent.layer.msg("设备：【"+a.toString()+"】，正在升级中，请稍后再试！")},uploadTimeComputed:function(t){return e.getDetailTime(t)},getSoftwareList:function(){var e=this,t=i()({event:"event_packages",login_token:localStorage.getItem("login_token")});this.$api.post("/",t,function(t){0===t.code?e.softwareList=t.data.users:e.$layer.msg("软件包列表获取失败！")})},uploadNewVersion:function(){parent.layer.close(parent.layer.index),parent.window.location.href="/#/ManageCenter"},yes:function(){this.SoftwareUpgrade()},cancel:function(){parent.layer.close(parent.layer.index)}}}}).call(t,s("DuR2"))},lYFx:function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a),o=s("PKHa"),r=s("ccZh");t.a={name:"SoftwareUpgrade",components:{DeviceListCommon:o.a,Menu:r.a},data:function(){return{clearChecked:!1,searchDevice:"",selectGroupName:"",groupNameListData:[],selectedDeviceList:[]}},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{actionBarImplement:function(e){var t=[e.data.robot_id];if("unlockAndLock"===e.method){var s=0===parseInt(e.data.lock_status)?1:0;this.unlockAndLock(t,s)}if("changeNtp"===e.method){var a=e.data.ntp_server;this.changeNtpAddress(t,a)}},unlockAndLock:function(e,t){var s=this;if(0===e.length)return this.$layer.msg("请先选择一个设备！"),!1;var a=i()({event:"event_modify_file_lock",robot_list:e,opcode:t});this.$api.post("/",a,function(e){0===e.code?1===t?s.$layer.msg("正在加锁！"):0===t&&s.$layer.msg("正在解锁！"):s.$layer.msg("加解锁失败！")}),this.clearChecked=!this.clearChecked},backupConfigFile:function(){this.$layer.msg("备份配置文件开发中......")},changeNtpAddress:function(t,s){if(0===t.length)return this.$layer.msg("请先选择一个设备！"),!1;var a=this;a.$layer.open({type:2,area:["380px","250px"],title:"更改NTP服务地址",shade:.3,shadeClose:!1,id:"ChangeNtpAddress",maxmin:!1,anim:1,content:e.url+"/#/ChangeNtpAddress?selectedDeviceList="+i()(t)+"&ntp="+s,yes:function(e){a.$layer.close(e)},end:function(){a.$router.push({path:window.location.hash.replace(/#/g,"")})},success:function(){}})},getselectedGroup:function(e){this.selectGroupName=e},getSelectedDeviceList:function(e){console.log(e),this.selectedDeviceList=e},getGroupName:function(e){this.selectGroupName="",this.groupNameListData=e},limitInput:function(){-1!==this.searchDevice.indexOf(" ")&&(this.searchDevice=this.searchDevice.replace(/\s/g,""),this.$layer.msg("不允许输入空格！")),this.searchDevice.length>=50&&this.$layer.msg("只允许输入50个字符！")}},watch:{}}}).call(t,s("DuR2"))},lo6S:function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a);t.a={name:"SoftwareVersionManage",data:function(){return{softwareList:[],userName:"",searchSoftwareVersion:""}},created:function(){null!==sessionStorage.getItem("uploadStatus")&&this.openUploadProgress(),this.userName=localStorage.getItem("username"),this.getSoftwareList()},beforeDestroy:function(){this.$layer.close(this.$layer.getFrameIndex("SoftwareUploadProgress")),clearInterval(window.uploadSuccessInterval)},mounted:function(){},methods:{fileIsNotExist:function(e){var t=this,s=!0,a=i()({event:"event_exist_files",login_token:localStorage.getItem("login_token"),file_type:1,file_name:e});return t.$api.post("/",a,function(e){0!==e.code?(t.$layer.msg(e.msg),s=!1):s=!0}),s},searchSoftwareFilter:function(){var e=this;return""!==e.searchSoftwareVersion?e.softwareList.filter(function(t){var s=e.searchSoftwareVersion.replace(/^\s+|\s+$/g,""),a=("版本号："+t.version).toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),i=("文件名："+t.package_name).toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),o=("上传时间："+t.time).toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),r=("上传者："+t.user_name).toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),n=("备注："+t.remarks).toLocaleUpperCase().indexOf(s.toLocaleUpperCase());return(-1!==a||-1!==i||-1!==o||-1!==r||-1!==n)&&t}):e.softwareList},firstIsCancel:function(){var e=JSON.parse(sessionStorage.getItem("uploadStatus"));e&&-1!==e[0].status.indexOf("%")&&"true"===sessionStorage.getItem("isUploading")&&null!==sessionStorage.getItem("uploadSoftwarePage")&&(e[0].status="已取消",sessionStorage.setItem("isUploading","false"),sessionStorage.setItem("uploadStatus",i()(e)))},openUploadProgress:function(){var t=this;t.$layer.open({type:2,area:["640px","370px"],title:"软件版本上传",shade:0,offset:"rb",shadeClose:!1,id:"SoftwareUploadProgress",maxmin:1,anim:-1,content:e.url+"/#/SoftwareUploadProgress",cancel:function(){return"true"===sessionStorage.getItem("isUploading")?t.$layer.confirm("列表中有未上传完成的文件，确定要放弃上传吗？",{title:"放弃上传",id:"GiveUpUpload"},function(){parent.layer.close(2);var e=JSON.parse(sessionStorage.getItem("uploadStatus"));e[0].status="已取消",sessionStorage.setItem("uploadStatus",i()(e)),parent.layer.close(parent.layer.index),parent.layer.close(window.parent.layer.getFrameIndex("UploadSoftwareVersion")),parent.layer.close(window.parent.layer.getFrameIndex("SoftwareUploadProgress")),sessionStorage.setItem("isUploading","false")}):(sessionStorage.setItem("isUploading","false"),sessionStorage.removeItem("uploadStatus"),parent.layer.close(window.parent.layer.getFrameIndex("SoftwareUploadProgress"))),!1},end:function(){},yes:function(e){},success:function(){t.firstIsCancel()}})},formatUploadTime:function(t){return e.getDetailTime(t)},editSoftware:function(t,s){var a=this,o=i()({event:"event_exist_files",login_token:localStorage.getItem("login_token"),file_type:1,file_name:s});a.$api.post("/",o,function(s){if(0!==s.code)a.$layer.msg(s.msg),a.getSoftwareList();else{var o=a.softwareList[t],r={id:o.id,package_name:o.package_name,remarks:o.remarks,time:o.time,user_name:o.user_name,version:o.version};sessionStorage.setItem("editSoftwareParm",i()(r)),a.$layer.open({type:2,area:["475px","645px"],title:"编辑版本信息",shade:.3,shadeClose:!1,id:"EditSoftwareVersion",maxmin:!1,anim:1,content:e.url+"/#/EditSoftwareVersion",end:function(){a.$router.push({path:window.location.hash.replace(/#/g,"")}),a.getSoftwareList()},yes:function(e){},success:function(){}})}})},downloadSoftware:function(e){var t=this,s=i()({event:"event_exist_files",login_token:localStorage.getItem("login_token"),file_type:1,file_name:e});t.$api.post("/",s,function(s){if(0!==s.code)t.$layer.msg(s.msg),t.getSoftwareList();else{var a=localStorage.getItem("login_token");window.location.href=sessionStorage.getItem("upDowndApiAddr")+"/download/login_token="+a+",type=1/"+e.replace(/#/g,"%23")}})},deleteSoftware:function(e,t){var s=this,a=i()({event:"event_exist_files",login_token:localStorage.getItem("login_token"),file_type:1,file_name:t});s.$api.post("/",a,function(a){if(0!==a.code)s.$layer.msg(a.msg),s.getSoftwareList();else{var o=i()({event:"event_query_file_state",author_id:localStorage.getItem("login_token"),file_type:1,file_name:t});s.$api.post("/",o,function(t){if(console.log(t),0===t.code){if(1===t.bOccupied)return s.$layer.msg("该文件正在被占用，请稍后再试！"),!1;s.$layer.confirm("确认删除该版本？",{title:"确认"},function(){var t=i()({event:"event_package_remove",package_id:e});s.$api.post("/",t,function(e){0===e.code?(console.log(e),s.$layer.msg("软件版本删除成功！"),s.getSoftwareList()):s.$layer.msg("软件版本删除失败！")})})}else s.$layer.msg("查询文件状态失败！")})}})},getSoftwareList:function(){var e=this,t=i()({event:"event_packages",login_token:localStorage.getItem("login_token")});this.$api.post("/",t,function(t){0===t.code?e.softwareList=t.data.users:e.$layer.msg("软件包列表获取失败！")})},uploadSoftwareVersion:function(){if("true"===sessionStorage.getItem("isUploading"))this.$layer.msg("列表中有未上传完成的文件，请稍后再上传新版本！");else{var t=this;t.openUploadProgress();t.$layer.open({type:2,area:["475px","645px"],title:"软件版本管理",shade:.3,shadeClose:!1,id:"UploadSoftwareVersion",maxmin:!1,anim:1,content:e.url+"/#/UploadSoftwareVersion",end:function(){t.$router.push({path:window.location.hash.replace(/#/g,"")}),null===sessionStorage.getItem("uploadStatus")&&t.$layer.close(t.$layer.getFrameIndex("SoftwareUploadProgress")),t.getSoftwareList()},yes:function(e){},success:function(){}})}},limitInput:function(){-1!==this.searchSoftwareVersion.indexOf(" ")&&(this.searchSoftwareVersion=this.searchSoftwareVersion.replace(/\s/g,""),this.$layer.msg("不允许输入空格！")),this.searchSoftwareVersion.length>=50&&this.$layer.msg("只允许输入50个字符！")}},watch:{}}}).call(t,s("DuR2"))},mAuQ:function(e,t){},me7q:function(e,t){},p3Mr:function(e,t){},rzEX:function(e,t){},"sI/C":function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a),o=s("k0sY"),r=s("PKHa"),n=s("ccZh");t.a={name:"SoftwareUpgrade",components:{DeviceListCommon:r.a,Menu:n.a},data:function(){return{clearChecked:!1,searchDevice:"",selectGroupName:"",groupNameListData:[],selectedDeviceList:[],userTransferQueue:[],versionList:[],version:""}},created:function(){this.getSoftwareList()},mounted:function(){var e=this;o.a.$on("socketData",function(t){e.serverResponse(t)})},beforeDestroy:function(){o.a.$off("socketData"),this.$layer.close(window.parent.layer.getFrameIndex("SoftwareUpgradeStatus"))},methods:{actionBarImplement:function(e){if("oneKeyUpdate"===e.method){var t=[e.data.robot_id];this.oneKeyUpdate(t)}},oneKeyUpdate:function(t){if(0===t.length)return this.$layer.msg("请先选择一个设备！"),!1;var s=this;s.$layer.open({type:2,area:["1000px","645px"],title:"一键更新",shade:.3,shadeClose:!1,maxmin:!1,anim:1,content:e.url+"/#/SoftwareVersionList?deviceid="+i()(t),end:function(){if("#/ManageCenter"===window.location.hash)return s.$router.push({path:"/ManageCenter"}),!1;s.$router.push({path:window.location.hash.replace(/#/g,"")}),"true"===localStorage.getItem("isUpgradeing")&&(localStorage.removeItem("isUpgradeing"),s.getUserTransferQueue(),s.clearChecked=!s.clearChecked)},yes:function(e){},success:function(){}})},getUserTransferQueue:function(){var t=this;t.$layer.open({type:2,area:["640px","370px"],title:"软件升级",shade:0,shadeClose:!1,id:"SoftwareUpgradeStatus",offset:"rb",maxmin:!0,anim:-1,content:e.url+"/#/SoftwareUpgradeStatus",cancel:function(){return null!==localStorage.getItem("transferQueueing")&&"[]"!==localStorage.getItem("transferQueueing")?t.$layer.confirm("列表中有未升级完成的文件，确定要放弃升级吗？",{title:"放弃升级"},function(){var e=JSON.parse(localStorage.getItem("transferQueueing"));for(var s in e)t.cancelUpgrade(e[s].robot_id,e[s].task_id);localStorage.removeItem("userTransferQueue"),localStorage.removeItem("transferQueueing"),t.$layer.close(t.$layer.index),t.$layer.close(t.$layer.getFrameIndex("SoftwareUpgradeStatus"))}):(localStorage.removeItem("userTransferQueue"),t.$layer.close(t.$layer.getFrameIndex("SoftwareUpgradeStatus"))),!1},end:function(){t.$router.push({path:window.location.hash.replace(/#/g,"")})},yes:function(e){},success:function(){}})},cancelUpgrade:function(e,t){var s=this,a=i()({event:"cancle_file_transform_task",login_token:localStorage.getItem("login_token"),robot_id:e,task_list:[t]});s.$api.post("/",a,function(e){if(0===e.code){var t=JSON.parse(localStorage.getItem("transferQueueing"));for(var a in t)if(""!==t[a].task_id){t[a].step="已取消",t[a].task_id="";var o=[];null!==localStorage.getItem("userTransferQueue")&&(o=JSON.parse(localStorage.getItem("userTransferQueue"))),o.push(t[a]),localStorage.setItem("userTransferQueue",i()(o)),t.splice(a,1),0===t.length&&localStorage.removeItem("transferQueueing")}null!==localStorage.getItem("transferQueueing")&&localStorage.setItem("transferQueueing",i()(t))}else s.$layer.msg("软件升级取消失败！")})},getSoftwareList:function(){var e=this,t=i()({event:"query_user_transfer_queue",login_token:localStorage.getItem("login_token"),file_type:1});e.$api.post("/",t,function(t){if(0===t.code){if(e.userTransferQueue=t.transfer_list,0===e.userTransferQueue.length){if(null!==localStorage.getItem("transferQueueing")&&"[]"!==localStorage.getItem("transferQueueing")){var s=JSON.parse(localStorage.getItem("transferQueueing"));for(var a in s)s[a].task_id="";if(null===localStorage.getItem("userTransferQueue"))localStorage.setItem("userTransferQueue",i()(s));else{var o=JSON.parse(localStorage.getItem("userTransferQueue"));o=o.concat(s),localStorage.setItem("userTransferQueue",i()(o))}localStorage.removeItem("transferQueueing")}}else localStorage.setItem("transferQueueing",i()(e.userTransferQueue));(null!==localStorage.getItem("userTransferQueue")&&"[]"!==localStorage.getItem("userTransferQueue")||null!==localStorage.getItem("transferQueueing")&&"[]"!==localStorage.getItem("transferQueueing"))&&e.getUserTransferQueue()}else e.$layer.msg("软件包列表获取失败！")})},getOnlineDeviceInfo:function(e){-1===this.versionList.indexOf(e.shell_version)&&this.versionList.push(e.shell_version)},onlineRobotList:function(e){var t=e;for(var s in this.versionList=[],t)for(var a in t[s].robot_list){var i=t[s].robot_list[a].shell_version;-1===this.versionList.indexOf(i)&&this.versionList.push(i)}0===this.versionList.length&&(this.version="")},getselectedGroup:function(e){this.selectGroupName=e},getSelectedDeviceList:function(e){console.log(e),this.selectedDeviceList=e},getGroupName:function(e){this.selectGroupName="",this.groupNameListData=e},limitInput:function(){-1!==this.searchDevice.indexOf(" ")&&(this.searchDevice=this.searchDevice.replace(/\s/g,""),this.$layer.msg("不允许输入空格！")),this.searchDevice.length>=50&&this.$layer.msg("只允许输入50个字符！")},serverResponse:function(e){if(259===e.msg_type&&e.login_token===localStorage.getItem("login_token")&&null!==localStorage.getItem("transferQueueing")){var t=JSON.parse(localStorage.getItem("transferQueueing"));for(var s in console.log(e),t)if(t[s].task_id===e.task_id){if(t[s].step=e.step+"%",100===e.step||e.error_code>0){e.error_code>0&&(t[s].step="-1"),t[s].task_id="";var a=[];null===localStorage.getItem("userTransferQueue")?(a.push(t[s]),localStorage.setItem("userTransferQueue",i()(a))):((a=JSON.parse(localStorage.getItem("userTransferQueue"))).push(t[s]),localStorage.setItem("userTransferQueue",i()(a))),t.splice(s,1),0===t.length&&localStorage.removeItem("transferQueueing")}localStorage.setItem("transferQueueing",i()(t))}else t[s].step="等待",localStorage.setItem("transferQueueing",i()(t))}}},watch:{}}}).call(t,s("DuR2"))},soZF:function(e,t,s){"use strict";var a=s("mvHQ"),i=s.n(a),o={name:"UpdateGroupName",props:["searchDeviceFilter","groupList","groupIndex","allGroupNameList","originalGroupNameList","editGroupName","oldProcessgroupalias","oldUpdateGroupIndex"],data:function(){return{editGroupKeyDownWhich:"",reloadeditGroupName:[]}},created:function(){console.log(this.originalGroupNameList)},mounted:function(){},watch:{},methods:{editGroupOtherKey:function(){var e=this.$refs.editGroupNameFocus.value.replace(/\s+/g,"");-1!==this.$refs.editGroupNameFocus.value.indexOf(" ")&&(this.$refs.editGroupNameFocus.value=e,this.$layer.msg("组名不允许存在空格！"))},editGroupKeyDown:function(e){var t="";e||(e=window.event),e.keyCode?t=e.keyCode:e.which&&(t=e.which),13===t&&window.event?e.returnValue=!1:13===t&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation(),this.editGroupKeyDownWhich=t},updateGroupName:function(e,t,s,a){var o=this;if(0===e)o.reloadeditGroupName=[],o.reloadeditGroupName[t]=!o.reloadeditGroupName[t],o.$emit("editGroupName",o.reloadeditGroupName),o.oldUpdateGroupIndex!==t&&-1!==o.oldUpdateGroupIndex&&o.$refs.editGroupNameFocus&&(o.$refs.editGroupNameFocus.value=o.oldProcessgroupalias),o.$emit("getoldUpdateGroupIndex",t),""===a?o.$emit("getoldProcessgroupalias",s):o.$emit("getoldProcessgroupalias",a);else if(1===e){var r=o.$refs.editGroupNameFocus.value.replace(/\s+/g,"");if(""===r)return o.$layer.msg("组名不能为空！"),!1;if(r.length>32)return o.$layer.msg("组名不允许超过32个字符！"),!1;if(r.length<4)return o.$layer.msg("组名不允许少于4个字符！"),!1;if(-1!==o.allGroupNameList.indexOf(r)&&r!==a&&""!==a||-1!==o.originalGroupNameList.indexOf(r)&&r!==s&&""!==s)return o.$layer.msg("组名不允许重复！"),!1;o.$forceUpdate(),o.reloadeditGroupName[t]=!o.reloadeditGroupName[t],o.$emit("editGroupName",o.reloadeditGroupName)}if(!o.reloadeditGroupName[t]){var n=i()({event:"event_group_alias",login_token:localStorage.getItem("login_token"),group_name:s,alias:r});o.$api.post("/",n,function(e){if(0===e.code){var s=o.allGroupNameList.indexOf(o.oldProcessgroupalias);o.allGroupNameList.splice(s,1,r),o.$emit("updateGroupNameAfter",{grouNameText:r,index:t}),""!==o.selectedGroup&&o.$emit("selectedGroup",r),o.$layer.msg("组名修改成功！")}else o.$layer.msg("编辑组名失败！")})}}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"updategroupname"},[s("input",{ref:e.editGroupName[e.groupIndex]?"editGroupNameFocus":"",class:e.editGroupName[e.groupIndex]?"group-name group-name-active":"group-name ",style:"width:"+8*(""===e.groupList.process_group_alias?e.groupList.process_group.length:e.groupList.process_group_alias.length)+"px;min-width:80px;",attrs:{type:"text",title:"默认组名："+e.groupList.process_group,disabled:!e.editGroupName[e.groupIndex]},domProps:{value:""===e.groupList.process_group_alias?e.groupList.process_group:e.groupList.process_group_alias},on:{keydown:e.editGroupKeyDown,keyup:function(t){13===e.editGroupKeyDownWhich?e.updateGroupName(1,e.groupIndex,e.groupList.process_group,e.groupList.process_group_alias):e.editGroupOtherKey()}}}),e._v(" "),e.editGroupName[e.groupIndex]?e._e():s("span",{staticClass:"group-device-length"},[e._v("\n    ("),s("span",{staticClass:"device-count"},[e._v(e._s(e.searchDeviceFilter.length))]),e._v(")\n  ")]),e._v(" "),s("span",{staticClass:"update-group-name"},[s("img",{directives:[{name:"show",rawName:"v-show",value:!e.editGroupName[e.groupIndex],expression:"!editGroupName[groupIndex]"}],attrs:{src:"static/images/commonly/edit.png","data-groupindex":e.groupIndex,title:"编辑组名"},on:{click:function(t){e.updateGroupName(0,e.groupIndex,e.groupList.process_group,e.groupList.process_group_alias)}}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:e.editGroupName[e.groupIndex],expression:"editGroupName[groupIndex]"}],attrs:{src:"static/images/commonly/edit-confim.png","data-groupindex":e.groupIndex,title:"完成修改"},on:{click:function(t){e.updateGroupName(1,e.groupIndex,e.groupList.process_group,e.groupList.process_group_alias)}}})])])},staticRenderFns:[]};var n=s("VU/8")(o,r,!1,function(e){s("BwDV")},null,null);t.a=n.exports},xSqM:function(e,t,s){"use strict";(function(e){var a=s("mvHQ"),i=s.n(a),o=s("ccZh");t.a={name:"UserManage",components:{Menu:o.a},data:function(){return{userList:[],userNameList:[],searchUser:""}},created:function(){this.getUserList()},methods:{searchUserFilter:function(){var e=this;return""!==e.searchUser?e.userList.filter(function(t){var s=e.searchUser.replace(/^\s+|\s+$/g,""),a=t.user_name.toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),i="密码：******".toLocaleUpperCase().indexOf(s.toLocaleUpperCase()),o=("用户权限："+t.permission).indexOf(s);return(-1!==a||-1!==i||-1!==o)&&t}):e.userList},getUserList:function(){var e=this,t=i()({event:"event_users",login_token:localStorage.getItem("login_token")});e.$api.post("/",t,function(t){if(0===t.code){for(var s in e.userList=t.data.users,e.userNameList=[],e.userList)e.userNameList.push(e.userList[s].user_name);console.log(t.data.users)}else 104===t.code||106===t.code?(localStorage.setItem("tokenInvalid",!0),window.location.href="/"):105===t.code?e.$layer.msg("该用户名权限不足！"):e.$layer.msg("获取用户列表失败！")})},editUser:function(t,s){if(s){var a=i()({login_token:localStorage.getItem("login_token"),target_id:s.target_id,username:s.user_name,permission:s.permission});sessionStorage.setItem("editUserParm",a)}else{var o=i()(this.userNameList);sessionStorage.setItem("addUserParm",o)}var r=this;r.$layer.open({type:2,area:["300px","330px"],title:t,shade:.3,shadeClose:!1,id:"EditUser",maxmin:!1,anim:1,content:e.url+"/#/EditUser",end:function(){r.$router.push({path:window.location.hash.replace(/#/g,"")}),r.getUserList(),sessionStorage.removeItem("editUserParm")},yes:function(e){},success:function(){}})},resetPassword:function(e){var t=this;this.$layer.confirm("确认对该用户重置密码？",{title:"确认"},function(s){var a=i()({event:"event_reset_pwd",login_token:localStorage.getItem("login_token"),target_id:e});t.$api.post("/",a,function(e){0===e.code?(t.$layer.close(s),t.$layer.msg("密码重置成功！")):103===e.code?t.$layer.msg("该用户不存在！"):104===e.code||106===e.code?(localStorage.setItem("tokenInvalid",!0),window.location.href="/"):t.$layer.msg("重置密码失败！")})})},delUser:function(e){var t=this;t.$layer.confirm("确认删除该用户？",{title:"确认"},function(s){var a=i()({event:"event_remove_user",login_token:localStorage.getItem("login_token"),target_id:e});t.$api.post("/",a,function(e){0===e.code?(t.getUserList(),t.$layer.close(s),t.$layer.msg("删除用户成功！")):103===e.code?t.$layer.msg("该用户不存在！"):104===e.code||106===e.code?(localStorage.setItem("tokenInvalid",!0),window.location.href="/"):105===e.code?t.$layer.msg("该用户名权限不足！"):t.$layer.msg("删除用户失败！")})})},limitInput:function(){-1!==this.searchUser.indexOf(" ")&&(this.searchUser=this.searchUser.replace(/\s/g,""),this.$layer.msg("不允许输入空格！")),this.searchUser.length>=50&&this.$layer.msg("只允许输入50个字符！")}},watch:{}}}).call(t,s("DuR2"))},z6SM:function(e,t){}},["NHnr"]);